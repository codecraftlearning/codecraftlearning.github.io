import{A as dC,B as hC,C as qa,D as hl,E as Ct,G as Ha,H as ag,I as ug,J as cg,K as Ot,a as q,b as De,e as ng,f as N,g as rC,h as cl,i as iC,j as oC,k as sC,l as aC,m as rg,n as uC,o as Ba,p as ig,q as ll,r as cC,s as lC,t as og,u as ke,v as Fi,w as Vn,x as dl,y as $a,z as sg}from"./chunk-EMNZ2YI5.js";var fC=null;var lg=1,dg=Symbol("SIGNAL");function _e(n){let e=fC;return fC=n,e}var pC={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function CP(n){if(!(pg(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===lg)){if(!n.producerMustRecompute(n)&&!hg(n)){n.dirty=!1,n.lastCleanEpoch=lg;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=lg}}function gC(n){return n&&(n.nextProducerIndex=0),_e(n)}function mC(n,e){if(_e(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(pg(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)fg(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function hg(n){fl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(CP(t),r!==t.version))return!0}return!1}function yC(n){if(fl(n),pg(n))for(let e=0;e<n.producerNode.length;e++)fg(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function fg(n,e){if(TP(n),fl(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)fg(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];fl(i),i.producerIndexOfThis[r]=e}}function pg(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function fl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function TP(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function bP(){throw new Error}var AP=bP;function vC(n){AP=n}function re(n){return typeof n=="function"}function Uo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var pl=Uo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Vi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var He=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof pl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{_C(o)}catch(s){e=e??[],s instanceof pl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new pl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)_C(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Vi(t,e)}remove(e){let{_finalizers:t}=this;t&&Vi(t,e),e instanceof n&&e._removeParent(this)}};He.EMPTY=(()=>{let n=new He;return n.closed=!0,n})();var gg=He.EMPTY;function gl(n){return n instanceof He||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function _C(n){re(n)?n():n.unsubscribe()}var gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Bo={setTimeout(n,e,...t){let{delegate:r}=Bo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Bo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ml(n){Bo.setTimeout(()=>{let{onUnhandledError:e}=gn;if(e)e(n);else throw n})}function za(){}var wC=mg("C",void 0,void 0);function IC(n){return mg("E",void 0,n)}function EC(n){return mg("N",n,void 0)}function mg(n,e,t){return{kind:n,value:e,error:t}}var Li=null;function $o(n){if(gn.useDeprecatedSynchronousErrorHandling){let e=!Li;if(e&&(Li={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Li;if(Li=null,t)throw r}}else n()}function DC(n){gn.useDeprecatedSynchronousErrorHandling&&Li&&(Li.errorThrown=!0,Li.error=n)}var ji=class extends He{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gl(e)&&e.add(this)):this.destination=RP}static create(e,t,r){return new dr(e,t,r)}next(e){this.isStopped?vg(EC(e),this):this._next(e)}error(e){this.isStopped?vg(IC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vg(wC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},SP=Function.prototype.bind;function yg(n,e){return SP.call(n,e)}var _g=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yl(r)}else yl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yl(t)}}},dr=class extends ji{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&gn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yg(e.next,o),error:e.error&&yg(e.error,o),complete:e.complete&&yg(e.complete,o)}):i=e}this.destination=new _g(i)}};function yl(n){gn.useDeprecatedSynchronousErrorHandling?DC(n):ml(n)}function MP(n){throw n}function vg(n,e){let{onStoppedNotification:t}=gn;t&&Bo.setTimeout(()=>t(n,e))}var RP={closed:!0,next:za,error:MP,complete:za};var qo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function kt(n){return n}function vl(...n){return wg(n)}function wg(n){return n.length===0?kt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=NP(t)?t:new dr(t,r,i);return $o(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=CC(r),new r((i,o)=>{let s=new dr({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[qo](){return this}pipe(...t){return wg(t)(this)}toPromise(t){return t=CC(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function CC(n){var e;return(e=n??gn.Promise)!==null&&e!==void 0?e:Promise}function xP(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function NP(n){return n&&n instanceof ji||xP(n)&&gl(n)}function Ig(n){return re(n?.lift)}function de(n){return e=>{if(Ig(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new Eg(n,e,t,r,i)}var Eg=class extends ji{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ho(){return de((n,e)=>{let t=null;n._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var zo=class extends ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ig(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new He;let t=this.getSubject();e.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=He.EMPTY)}return e}refCount(){return Ho()(this)}};var TC=Uo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class n extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new _l(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new TC}next(t){$o(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){$o(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){$o(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gg:(this.currentObservers=null,o.push(t),new He(()=>{this.currentObservers=null,Vi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ie;return t.source=this,t}}return n.create=(e,t)=>new _l(e,t),n})(),_l=class extends Ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:gg}};var ft=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ga={now(){return(Ga.delegate||Date).now()},delegate:void 0};var wl=class extends Ue{constructor(e=1/0,t=1/0,r=Ga){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Il=class extends He{constructor(e,t){super()}schedule(e,t=0){return this}};var Wa={setInterval(n,e,...t){let{delegate:r}=Wa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Wa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Go=class extends Il{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Wa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Wa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Vi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Wo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Wo.now=Ga.now;var Ko=class extends Wo{constructor(e,t=Wo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ka=new Ko(Go);var El=class extends Go{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Dl=class extends Ko{};var Dg=new Dl(El);var Ft=new ie(n=>n.complete());function bC(n){return n&&re(n.schedule)}function Cg(n){return n[n.length-1]}function Cl(n){return re(Cg(n))?n.pop():void 0}function Ln(n){return bC(Cg(n))?n.pop():void 0}function AC(n,e){return typeof Cg(n)=="number"?n.pop():e}var Tl=n=>n&&typeof n.length=="number"&&typeof n!="function";function bl(n){return re(n?.then)}function Al(n){return re(n[qo])}function Sl(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function Ml(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function PP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Rl=PP();function xl(n){return re(n?.[Rl])}function Nl(n){return iC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield cl(t.read());if(i)return yield cl(void 0);yield yield cl(r)}}finally{t.releaseLock()}})}function Pl(n){return re(n?.getReader)}function xe(n){if(n instanceof ie)return n;if(n!=null){if(Al(n))return OP(n);if(Tl(n))return kP(n);if(bl(n))return FP(n);if(Sl(n))return SC(n);if(xl(n))return VP(n);if(Pl(n))return LP(n)}throw Ml(n)}function OP(n){return new ie(e=>{let t=n[qo]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kP(n){return new ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function FP(n){return new ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ml)})}function VP(n){return new ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function SC(n){return new ie(e=>{jP(n,e).catch(t=>e.error(t))})}function LP(n){return SC(Nl(n))}function jP(n,e){var t,r,i,o;return rC(this,void 0,void 0,function*(){try{for(t=oC(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ht(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Zt(n,e=0){return de((t,r)=>{t.subscribe(he(r,i=>Ht(r,n,()=>r.next(i),e),()=>Ht(r,n,()=>r.complete(),e),i=>Ht(r,n,()=>r.error(i),e)))})}function on(n,e=0){return de((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function MC(n,e){return xe(n).pipe(on(e),Zt(e))}function RC(n,e){return xe(n).pipe(on(e),Zt(e))}function xC(n,e){return new ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function NC(n,e){return new ie(t=>{let r;return Ht(t,e,()=>{r=n[Rl](),Ht(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Ol(n,e){if(!n)throw new Error("Iterable cannot be null");return new ie(t=>{Ht(t,e,()=>{let r=n[Symbol.asyncIterator]();Ht(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function PC(n,e){return Ol(Nl(n),e)}function OC(n,e){if(n!=null){if(Al(n))return MC(n,e);if(Tl(n))return xC(n,e);if(bl(n))return RC(n,e);if(Sl(n))return Ol(n,e);if(xl(n))return NC(n,e);if(Pl(n))return PC(n,e)}throw Ml(n)}function pe(n,e){return e?OC(n,e):xe(n)}function Z(...n){let e=Ln(n);return pe(n,e)}function Qo(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new ie(e?i=>e.schedule(r,0,i):r)}function Tg(n){return!!n&&(n instanceof ie||re(n.lift)&&re(n.subscribe))}var hr=Uo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function J(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:UP}=Array;function BP(n,e){return UP(e)?n(...e):n(e)}function kl(n){return J(e=>BP(n,e))}var{isArray:$P}=Array,{getPrototypeOf:qP,prototype:HP,keys:zP}=Object;function Fl(n){if(n.length===1){let e=n[0];if($P(e))return{args:e,keys:null};if(GP(e)){let t=zP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function GP(n){return n&&typeof n=="object"&&qP(n)===HP}function Vl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Qa(...n){let e=Ln(n),t=Cl(n),{args:r,keys:i}=Fl(n);if(r.length===0)return pe([],e);let o=new ie(WP(r,e,i?s=>Vl(i,s):kt));return t?o.pipe(kl(t)):o}function WP(n,e,t=kt){return r=>{kC(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)kC(e,()=>{let l=pe(n[u],e),d=!1;l.subscribe(he(r,f=>{o[u]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function kC(n,e,t){n?Ht(t,n,e):e()}function FC(n,e,t,r,i,o,s,a){let u=[],l=0,d=0,f=!1,g=()=>{f&&!u.length&&!l&&e.complete()},y=C=>l<r?T(C):u.push(C),T=C=>{o&&e.next(C),l++;let A=!1;xe(t(C,d++)).subscribe(he(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let F=u.shift();s?Ht(e,s,()=>T(F)):T(F)}g()}catch(F){e.error(F)}}))};return n.subscribe(he(e,y,()=>{f=!0,g()})),()=>{a?.()}}function Ye(n,e,t=1/0){return re(e)?Ye((r,i)=>J((o,s)=>e(r,o,i,s))(xe(n(r,i))),t):(typeof e=="number"&&(t=e),de((r,i)=>FC(r,i,n,t)))}function jn(n=1/0){return Ye(kt,n)}function VC(){return jn(1)}function Yo(...n){return VC()(pe(n,Ln(n)))}function Ll(n){return new ie(e=>{xe(n()).subscribe(e)})}function bg(...n){let e=Cl(n),{args:t,keys:r}=Fl(n),i=new ie(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let d=0;d<s;d++){let f=!1;xe(t[d]).subscribe(he(o,g=>{f||(f=!0,l--),a[d]=g},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?Vl(r,a):a),o.complete())}))}});return e?i.pipe(kl(e)):i}function Ag(...n){let e=Ln(n),t=AC(n,1/0),r=n;return r.length?r.length===1?xe(r[0]):jn(t)(pe(r,e)):Ft}function Ze(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>n.call(e,o,i++)&&r.next(o)))})}function jr(n){return de((e,t)=>{let r=null,i=!1,o;r=e.subscribe(he(t,void 0,void 0,s=>{o=xe(n(s,jr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function LC(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(he(s,d=>{let f=l++;u=a?n(u,d,f):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function fr(n,e){return re(e)?Ye(n,e,1):Ye(n,1)}function Ur(n){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Un(n){return n<=0?()=>Ft:de((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Sg(n){return J(()=>n)}function jl(n,e=kt){return n=n??KP,de((t,r)=>{let i,o=!0;t.subscribe(he(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function KP(n,e){return n===e}function Ul(n=QP){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function QP(){return new hr}function Br(n){return de((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function sn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ze((i,o)=>n(i,o,r)):kt,Un(1),t?Ur(e):Ul(()=>new hr))}function Zo(n){return n<=0?()=>Ft:de((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Mg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ze((i,o)=>n(i,o,r)):kt,Zo(1),t?Ur(e):Ul(()=>new hr))}function Jo(){return de((n,e)=>{let t,r=!1;n.subscribe(he(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function $r(n,e){return de(LC(n,e,arguments.length>=2,!0))}function jC(n={}){let{connector:e=()=>new Ue,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,d=f=!1},T=()=>{let C=s;y(),C?.unsubscribe()};return de((C,A)=>{l++,!f&&!d&&g();let F=u=u??e();A.add(()=>{l--,l===0&&!f&&!d&&(a=Rg(T,i))}),F.subscribe(A),!s&&l>0&&(s=new dr({next:H=>F.next(H),error:H=>{f=!0,g(),a=Rg(y,t,H),F.error(H)},complete:()=>{d=!0,g(),a=Rg(y,r),F.complete()}}),xe(C).subscribe(s))})(o)}}function Rg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new dr({next:()=>{r.unsubscribe(),n()}});return xe(e(...t)).subscribe(r)}function Bl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,jC({connector:()=>new wl(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function qr(...n){let e=Ln(n);return de((t,r)=>{(e?Yo(n,t,e):Yo(n,t)).subscribe(r)})}function Pe(n,e){return de((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(he(r,u=>{i?.unsubscribe();let l=0,d=o++;xe(n(u,d)).subscribe(i=he(r,f=>r.next(e?e(u,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function $l(n,e){return re(e)?Pe(()=>n,e):Pe(()=>n)}function ql(n){return de((e,t)=>{xe(n).subscribe(he(t,()=>t.complete(),za)),!t.closed&&e.subscribe(t)})}function Je(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?de((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):kt}var ST="https://g.co/ng/security#xss",W=class extends Error{constructor(e,t){super(Sd(e,t)),this.code=e}};function Sd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function lu(n){return{toString:n}.toString()}var Hl="__parameters__";function YP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function MT(n,e,t){return lu(()=>{let r=YP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,d){let f=u.hasOwnProperty(Hl)?u[Hl]:Object.defineProperty(u,Hl,{value:[]})[Hl];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var pt=globalThis;function Ae(n){for(let e in n)if(n[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function ZP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Lt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Lt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Gg(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var JP=Ae({__forward_ref__:Ae});function At(n){return n.__forward_ref__=At,n.toString=function(){return Lt(this())},n}function Vt(n){return RT(n)?n():n}function RT(n){return typeof n=="function"&&n.hasOwnProperty(JP)&&n.__forward_ref__===At}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function rt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Md(n){return UC(n,NT)||UC(n,PT)}function xT(n){return Md(n)!==null}function UC(n,e){return n.hasOwnProperty(e)?n[e]:null}function XP(n){let e=n&&(n[NT]||n[PT]);return e||null}function BC(n){return n&&(n.hasOwnProperty($C)||n.hasOwnProperty(eO))?n[$C]:null}var NT=Ae({\u0275prov:Ae}),$C=Ae({\u0275inj:Ae}),PT=Ae({ngInjectableDef:Ae}),eO=Ae({ngInjectorDef:Ae}),U=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function OT(n){return n&&!!n.\u0275providers}var tO=Ae({\u0275cmp:Ae}),nO=Ae({\u0275dir:Ae}),rO=Ae({\u0275pipe:Ae}),iO=Ae({\u0275mod:Ae}),rd=Ae({\u0275fac:Ae}),Ya=Ae({__NG_ELEMENT_ID__:Ae}),qC=Ae({__NG_ENV_ID__:Ae});function Rd(n){return typeof n=="string"?n:n==null?"":String(n)}function oO(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Rd(n)}function sO(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new W(-200,n)}function Xm(n,e){throw new W(-201,!1)}var ge=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ge||{}),Wg;function kT(){return Wg}function zt(n){let e=Wg;return Wg=n,e}function FT(n,e,t){let r=Md(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ge.Optional)return null;if(e!==void 0)return e;Xm(n,"Injector")}var aO={},Ja=aO,Kg="__NG_DI_FLAG__",id="ngTempTokenPath",uO="ngTokenPath",cO=/\n/gm,lO="\u0275",HC="__source",rs;function dO(){return rs}function Hr(n){let e=rs;return rs=n,e}function hO(n,e=ge.Default){if(rs===void 0)throw new W(-203,!1);return rs===null?FT(n,void 0,e):rs.get(n,e&ge.Optional?null:void 0,e)}function V(n,e=ge.Default){return(kT()||hO)(Vt(n),e)}function L(n,e=ge.Default){return V(n,xd(e))}function xd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Qg(n){let e=[];for(let t=0;t<n.length;t++){let r=Vt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,o=ge.Default;for(let s=0;s<r.length;s++){let a=r[s],u=fO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(V(i,o))}else e.push(V(r))}return e}function VT(n,e){return n[Kg]=e,n.prototype[Kg]=e,n}function fO(n){return n[Kg]}function pO(n,e,t,r){let i=n[id];throw e[HC]&&i.unshift(e[HC]),n.message=gO(`
`+n.message,i,t,r),n[uO]=i,n[id]=null,n}function gO(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==lO?n.slice(2):n;let i=Lt(e);if(Array.isArray(e))i=e.map(Lt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Lt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(cO,`
  `)}`}var ut=VT(MT("Optional"),8);var ey=VT(MT("SkipSelf"),4);function $i(n,e){let t=n.hasOwnProperty(rd);return t?n[rd]:null}function mO(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function yO(n){return n.flat(Number.POSITIVE_INFINITY)}function ty(n,e){n.forEach(t=>Array.isArray(t)?ty(t,e):e(t))}function LT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function od(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function vO(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function ny(n,e,t){let r=du(n,e);return r>=0?n[r|1]=t:(r=~r,vO(n,r,e,t)),r}function xg(n,e){let t=du(n,e);if(t>=0)return n[t|1]}function du(n,e){return _O(n,e,1)}function _O(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var os={},Gt=[],ss=new U(""),jT=new U("",-1),UT=new U(""),sd=class{get(e,t=Ja){if(t===Ja){let r=new Error(`NullInjectorError: No provider for ${Lt(e)}!`);throw r.name="NullInjectorError",r}return t}},BT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(BT||{}),qn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(qn||{}),Be=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Be||{});function wO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Yg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];IO(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function $T(n){return n===3||n===4||n===6}function IO(n){return n.charCodeAt(0)===64}function Xa(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?zC(n,t,i,null,e[++r]):zC(n,t,i,null,null))}}return n}function zC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var qT="ng-template";function EO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&wO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(ry(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function ry(n){return n.type===4&&n.value!==qT}function DO(n,e,t){let r=n.type===4&&!t?qT:n.value;return e===r}function CO(n,e,t){let r=4,i=n.attrs,o=i!==null?AO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!mn(r)&&!mn(u))return!1;if(s&&mn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!DO(n,u,t)||u===""&&e.length===1){if(mn(r))return!1;s=!0}}else if(r&8){if(i===null||!EO(n,i,u,t)){if(mn(r))return!1;s=!0}}else{let l=e[++a],d=TO(u,i,ry(n),t);if(d===-1){if(mn(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(mn(r))return!1;s=!0}}}}return mn(r)||s}function mn(n){return(n&1)===0}function TO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return SO(e,n)}function bO(n,e,t=!1){for(let r=0;r<e.length;r++)if(CO(n,e[r],t))return!0;return!1}function AO(n){for(let e=0;e<n.length;e++){let t=n[e];if($T(t))return e}return n.length}function SO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function GC(n,e){return n?":not("+e.trim()+")":e}function MO(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!mn(s)&&(e+=GC(o,i),i=""),r=s,o=o||!mn(r);t++}return i!==""&&(e+=GC(o,i)),e}function RO(n){return n.map(MO).join(",")}function xO(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!mn(i))break;i=o}r++}return{attrs:e,classes:t}}function HT(n){return lu(()=>{let e=YT(n),t=De(q({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===BT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||qn.Emulated,styles:n.styles||Gt,_:null,schemas:n.schemas||null,tView:null,id:""});ZT(t);let r=n.dependencies;return t.directiveDefs=KC(r,!1),t.pipeDefs=KC(r,!0),t.id=OO(t),t})}function NO(n){return Gr(n)||GT(n)}function PO(n){return n!==null}function it(n){return lu(()=>({type:n.type,bootstrap:n.bootstrap||Gt,declarations:n.declarations||Gt,imports:n.imports||Gt,exports:n.exports||Gt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function WC(n,e){if(n==null)return os;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Be.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Be.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ee(n){return lu(()=>{let e=YT(n);return ZT(e),e})}function zT(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Gr(n){return n[tO]||null}function GT(n){return n[nO]||null}function WT(n){return n[rO]||null}function KT(n){let e=Gr(n)||GT(n)||WT(n);return e!==null?e.standalone:!1}function QT(n,e){let t=n[iO]||null;if(!t&&e===!0)throw new Error(`Type ${Lt(n)} does not have '\u0275mod' property.`);return t}function YT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||os,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Gt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:WC(n.inputs,e),outputs:WC(n.outputs),debugInfo:null}}function ZT(n){n.features?.forEach(e=>e(n))}function KC(n,e){if(!n)return null;let t=e?WT:NO;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(PO)}function OO(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Gn(n){return{\u0275providers:n}}function kO(...n){return{\u0275providers:JT(!0,n),\u0275fromNgModule:!0}}function JT(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return ty(e,s=>{let a=s;Zg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&XT(i,o),t}function XT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];iy(i,o=>{e(o,r)})}}function Zg(n,e,t,r){if(n=Vt(n),!n)return!1;let i=null,o=BC(n),s=!o&&Gr(n);if(!o&&!s){let u=n.ngModule;if(o=BC(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Zg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{ty(o.imports,d=>{Zg(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&XT(l,e)}if(!a){let l=$i(i)||(()=>new i);e({provide:i,useFactory:l,deps:Gt},i),e({provide:UT,useValue:i,multi:!0},i),e({provide:ss,useValue:()=>V(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;iy(u,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function iy(n,e){for(let t of n)OT(t)&&(t=t.\u0275providers),Array.isArray(t)?iy(t,e):e(t)}var FO=Ae({provide:String,useValue:Ae});function eb(n){return n!==null&&typeof n=="object"&&FO in n}function VO(n){return!!(n&&n.useExisting)}function LO(n){return!!(n&&n.useFactory)}function as(n){return typeof n=="function"}function jO(n){return!!n.useClass}var Nd=new U(""),Zl={},UO={},Ng;function oy(){return Ng===void 0&&(Ng=new sd),Ng}var bt=class{},eu=class extends bt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xg(e,s=>this.processProvider(s)),this.records.set(jT,Xo(void 0,this)),i.has("environment")&&this.records.set(bt,Xo(void 0,this));let o=this.records.get(Nd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(UT,Gt,ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Hr(this),r=zt(void 0),i;try{return e()}finally{Hr(t),zt(r)}}get(e,t=Ja,r=ge.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(qC))return e[qC](this);r=xd(r);let i,o=Hr(this),s=zt(void 0);try{if(!(r&ge.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=zO(e)&&Md(e);l&&this.injectableDefInScope(l)?u=Xo(Jg(e),Zl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ge.Self?oy():this.parent;return t=r&ge.Optional&&t===Ja?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[id]=a[id]||[]).unshift(Lt(e)),o)throw a;return pO(a,e,"R3InjectorError",this.source)}else throw a}finally{zt(s),Hr(o)}}resolveInjectorInitializers(){let e=_e(null),t=Hr(this),r=zt(void 0),i;try{let o=this.get(ss,Gt,ge.Self);for(let s of o)s()}finally{Hr(t),zt(r),_e(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Lt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){e=Vt(e);let t=as(e)?e:Vt(e&&e.provide),r=$O(e);if(!as(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Xo(void 0,Zl,!0),i.factory=()=>Qg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=_e(null);try{return t.value===Zl&&(t.value=UO,t.value=t.factory()),typeof t.value=="object"&&t.value&&HO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{_e(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Vt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Jg(n){let e=Md(n),t=e!==null?e.factory:$i(n);if(t!==null)return t;if(n instanceof U)throw new W(204,!1);if(n instanceof Function)return BO(n);throw new W(204,!1)}function BO(n){if(n.length>0)throw new W(204,!1);let t=XP(n);return t!==null?()=>t.factory(n):()=>new n}function $O(n){if(eb(n))return Xo(void 0,n.useValue);{let e=tb(n);return Xo(e,Zl)}}function tb(n,e,t){let r;if(as(n)){let i=Vt(n);return $i(i)||Jg(i)}else if(eb(n))r=()=>Vt(n.useValue);else if(LO(n))r=()=>n.useFactory(...Qg(n.deps||[]));else if(VO(n))r=()=>V(Vt(n.useExisting));else{let i=Vt(n&&(n.useClass||n.provide));if(qO(n))r=()=>new i(...Qg(n.deps));else return $i(i)||Jg(i)}return r}function Xo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function qO(n){return!!n.deps}function HO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function zO(n){return typeof n=="function"||typeof n=="object"&&n instanceof U}function Xg(n,e){for(let t of n)Array.isArray(t)?Xg(t,e):t&&OT(t)?Xg(t.\u0275providers,e):e(t)}function En(n,e){n instanceof eu&&n.assertNotDestroyed();let t,r=Hr(n),i=zt(void 0);try{return e()}finally{Hr(r),zt(i)}}function nb(){return kT()!==void 0||dO()!=null}function GO(n){if(!nb())throw new W(-203,!1)}function WO(n){let e=pt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function KO(n){return typeof n=="function"}var vr=0,se=1,ne=2,gt=3,vn=4,Dn=5,tu=6,nu=7,jt=8,us=9,_n=10,$e=11,ru=12,QC=13,fs=14,wn=15,hu=16,es=17,pr=18,Pd=19,rb=20,zr=21,Pg=22,qi=23,Jt=25,ib=1;var Hi=7,ad=8,cs=9,Tt=10,sy=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(sy||{});function Ui(n){return Array.isArray(n)&&typeof n[ib]=="object"}function _r(n){return Array.isArray(n)&&n[ib]===!0}function ay(n){return(n.flags&4)!==0}function Od(n){return n.componentOffset>-1}function kd(n){return(n.flags&1)===1}function Wr(n){return!!n.template}function QO(n){return(n[ne]&512)!==0}var em=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function ob(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Cn(){return sb}function sb(n){return n.type.prototype.ngOnChanges&&(n.setInput=ZO),YO}Cn.ngInherit=!0;function YO(){let n=ub(this),e=n?.current;if(e){let t=n.previous;if(t===os)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ZO(n,e,t,r,i){let o=this.declaredInputs[r],s=ub(n)||JO(n,{previous:os,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new em(l&&l.currentValue,t,u===os),ob(n,e,i,t)}var ab="__ngSimpleChanges__";function ub(n){return n[ab]||null}function JO(n,e){return n[ab]=e}var YC=null;var Bn=function(n,e,t){YC?.(n,e,t)},cb="svg",XO="math",ek=!1;function tk(){return ek}function Hn(n){for(;Array.isArray(n);)n=n[vr];return n}function lb(n,e){return Hn(e[n])}function an(n,e){return Hn(e[n.index])}function uy(n,e){return n.data[e]}function db(n,e){return n[e]}function Yr(n,e){let t=e[n];return Ui(t)?t:t[vr]}function nk(n){return(n[ne]&4)===4}function cy(n){return(n[ne]&128)===128}function rk(n){return _r(n[gt])}function ls(n,e){return e==null?null:n[e]}function hb(n){n[es]=0}function ik(n){n[ne]&1024||(n[ne]|=1024,cy(n)&&iu(n))}function ok(n,e){for(;n>0;)e=e[fs],n--;return e}function ly(n){return!!(n[ne]&9216||n[qi]?.dirty)}function tm(n){n[_n].changeDetectionScheduler?.notify(1),ly(n)?iu(n):n[ne]&64&&(tk()?(n[ne]|=1024,iu(n)):n[_n].changeDetectionScheduler?.notify())}function iu(n){n[_n].changeDetectionScheduler?.notify();let e=ou(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!cy(e)));)e=ou(e)}function fb(n,e){if((n[ne]&256)===256)throw new W(911,!1);n[zr]===null&&(n[zr]=[]),n[zr].push(e)}function sk(n,e){if(n[zr]===null)return;let t=n[zr].indexOf(e);t!==-1&&n[zr].splice(t,1)}function ou(n){let e=n[gt];return _r(e)?e[gt]:e}var ce={lFrame:Ib(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ak(){return ce.lFrame.elementDepthCount}function uk(){ce.lFrame.elementDepthCount++}function ck(){ce.lFrame.elementDepthCount--}function pb(){return ce.bindingsEnabled}function lk(){return ce.skipHydrationRootTNode!==null}function dk(n){return ce.skipHydrationRootTNode===n}function hk(){ce.skipHydrationRootTNode=null}function fe(){return ce.lFrame.lView}function ze(){return ce.lFrame.tView}function f8(n){return ce.lFrame.contextLView=n,n[jt]}function p8(n){return ce.lFrame.contextLView=null,n}function St(){let n=gb();for(;n!==null&&n.type===64;)n=n.parent;return n}function gb(){return ce.lFrame.currentTNode}function fk(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Zi(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function dy(){return ce.lFrame.isParent}function mb(){ce.lFrame.isParent=!1}function pk(){return ce.lFrame.contextLView}function Fd(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function gk(n){return ce.lFrame.bindingIndex=n}function fu(){return ce.lFrame.bindingIndex++}function yb(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function mk(){return ce.lFrame.inI18n}function yk(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,nm(e)}function vk(){return ce.lFrame.currentDirectiveIndex}function nm(n){ce.lFrame.currentDirectiveIndex=n}function _k(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function vb(){return ce.lFrame.currentQueryIndex}function hy(n){ce.lFrame.currentQueryIndex=n}function wk(n){let e=n[se];return e.type===2?e.declTNode:e.type===1?n[Dn]:null}function _b(n,e,t){if(t&ge.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ge.Host);)if(i=wk(o),i===null||(o=o[fs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ce.lFrame=wb();return r.currentTNode=e,r.lView=n,!0}function fy(n){let e=wb(),t=n[se];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function wb(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?Ib(n):e}function Ib(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Eb(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Db=Eb;function py(){let n=Eb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ik(n){return(ce.lFrame.contextLView=ok(n,ce.lFrame.contextLView))[jt]}function Zr(){return ce.lFrame.selectedIndex}function zi(n){ce.lFrame.selectedIndex=n}function Vd(){let n=ce.lFrame;return uy(n.tView,n.selectedIndex)}function g8(){ce.lFrame.currentNamespace=cb}function m8(){Ek()}function Ek(){ce.lFrame.currentNamespace=null}function Dk(){return ce.lFrame.currentNamespace}var Cb=!0;function Ld(){return Cb}function jd(n){Cb=n}function Ck(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=sb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Ud(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Jl(n,e,t){Tb(n,e,3,t)}function Xl(n,e,t,r){(n[ne]&3)===t&&Tb(n,e,t,r)}function Og(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function Tb(n,e,t,r){let i=r!==void 0?n[es]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[es]+=65536),(a<o||o==-1)&&(Tk(n,t,e,u),n[es]=(n[es]&4294901760)+u+2),u++}function ZC(n,e){Bn(4,n,e);let t=_e(null);try{e.call(n)}finally{_e(t),Bn(5,n,e)}}function Tk(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[es]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,ZC(a,o)):ZC(a,o)}var is=-1,Gi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function bk(n){return n instanceof Gi}function Ak(n){return(n.flags&8)!==0}function Sk(n){return(n.flags&16)!==0}function bb(n){return n!==is}function ud(n){return n&32767}function Mk(n){return n>>16}function cd(n,e){let t=Mk(n),r=e;for(;t>0;)r=r[fs],t--;return r}var rm=!0;function ld(n){let e=rm;return rm=n,e}var Rk=256,Ab=Rk-1,Sb=5,xk=0,$n={};function Nk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ya)&&(r=t[Ya]),r==null&&(r=t[Ya]=xk++);let i=r&Ab,o=1<<i;e.data[n+(i>>Sb)]|=o}function dd(n,e){let t=Mb(n,e);if(t!==-1)return t;let r=e[se];r.firstCreatePass&&(n.injectorIndex=e.length,kg(r.data,n),kg(e,null),kg(r.blueprint,null));let i=gy(n,e),o=n.injectorIndex;if(bb(i)){let s=ud(i),a=cd(i,e),u=a[se].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function kg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Mb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function gy(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Ob(i),r===null)return is;if(t++,i=i[fs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return is}function im(n,e,t){Nk(n,e,t)}function Pk(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if($T(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function Rb(n,e,t){if(t&ge.Optional||n!==void 0)return n;Xm(e,"NodeInjector")}function xb(n,e,t,r){if(t&ge.Optional&&r===void 0&&(r=null),!(t&(ge.Self|ge.Host))){let i=n[us],o=zt(void 0);try{return i?i.get(e,r,t&ge.Optional):FT(e,r,t&ge.Optional)}finally{zt(o)}}return Rb(r,e,t)}function Nb(n,e,t,r=ge.Default,i){if(n!==null){if(e[ne]&2048&&!(r&ge.Self)){let s=Vk(n,e,t,r,$n);if(s!==$n)return s}let o=Pb(n,e,t,r,$n);if(o!==$n)return o}return xb(e,t,r,i)}function Pb(n,e,t,r,i){let o=kk(t);if(typeof o=="function"){if(!_b(e,n,r))return r&ge.Host?Rb(i,t,r):xb(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ge.Optional))Xm(t);else return s}finally{Db()}}else if(typeof o=="number"){let s=null,a=Mb(n,e),u=is,l=r&ge.Host?e[wn][Dn]:null;for((a===-1||r&ge.SkipSelf)&&(u=a===-1?gy(n,e):e[a+8],u===is||!XC(r,!1)?a=-1:(s=e[se],a=ud(u),e=cd(u,e)));a!==-1;){let d=e[se];if(JC(o,a,d.data)){let f=Ok(a,e,t,s,r,l);if(f!==$n)return f}u=e[a+8],u!==is&&XC(r,e[se].data[a+8]===l)&&JC(o,a,e)?(s=d,a=ud(u),e=cd(u,e)):a=-1}}return i}function Ok(n,e,t,r,i,o){let s=e[se],a=s.data[n+8],u=r==null?Od(a)&&rm:r!=s&&(a.type&3)!==0,l=i&ge.Host&&o===a,d=ed(a,s,t,u,l);return d!==null?Wi(e,s,d,a):$n}function ed(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let T=s[y];if(y<u&&t===T||y>=u&&T.type===t)return y}if(i){let y=s[u];if(y&&Wr(y)&&y.type===t)return u}return null}function Wi(n,e,t,r){let i=n[t],o=e.data;if(bk(i)){let s=i;s.resolving&&sO(oO(o[t]));let a=ld(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?zt(s.injectImpl):null,d=_b(n,r,ge.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&Ck(t,o[t],e)}finally{l!==null&&zt(l),ld(a),s.resolving=!1,Db()}}return i}function kk(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ya)?n[Ya]:void 0;return typeof e=="number"?e>=0?e&Ab:Fk:e}function JC(n,e,t){let r=1<<n;return!!(t[e+(n>>Sb)]&r)}function XC(n,e){return!(n&ge.Self)&&!(n&ge.Host&&e)}var Bi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Nb(this._tNode,this._lView,e,xd(r),t)}};function Fk(){return new Bi(St(),fe())}function un(n){return lu(()=>{let e=n.prototype.constructor,t=e[rd]||om(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[rd]||om(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function om(n){return RT(n)?()=>{let e=om(Vt(n));return e&&e()}:$i(n)}function Vk(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=Pb(o,s,t,r|ge.Self,$n);if(a!==$n)return a;let u=o.parent;if(!u){let l=s[rb];if(l){let d=l.get(t,$n,r);if(d!==$n)return d}u=Ob(s),s=s[fs]}o=u}return i}function Ob(n){let e=n[se],t=e.type;return t===2?e.declTNode:t===1?n[Dn]:null}function my(n){return Pk(St(),n)}function eT(n,e=null,t=null,r){let i=kb(n,e,t,r);return i.resolveInjectorInitializers(),i}function kb(n,e=null,t=null,r,i=new Set){let o=[t||Gt,kO(n)];return r=r||(typeof n=="object"?void 0:Lt(n)),new eu(o,e||oy(),r||null,i)}var ct=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Ja}static{this.NULL=new sd}static create(t,r){if(Array.isArray(t))return eT({name:""},r,t,"");{let i=t.name??"";return eT({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=G({token:n,providedIn:"any",factory:()=>V(jT)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var Lk="ngOriginalError";function Fg(n){return n[Lk]}var zn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Fg(e);for(;t&&Fg(t);)t=Fg(t);return t||null}},Fb=new U("",{providedIn:"root",factory:()=>L(zn).handleError.bind(void 0)}),yy=(()=>{class n{static{this.__NG_ELEMENT_ID__=jk}static{this.__NG_ENV_ID__=t=>t}}return n})(),sm=class extends yy{constructor(e){super(),this._lView=e}onDestroy(e){return fb(this._lView,e),()=>sk(this._lView,e)}};function jk(){return new sm(fe())}function Uk(){return ps(St(),fe())}function ps(n,e){return new Mt(an(n,e))}var Mt=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Uk}}return n})();function Bk(n){return n instanceof Mt?n.nativeElement:n}var am=class extends Ue{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,nb()&&(this.destroyRef=L(yy,{optional:!0})??void 0)}emit(e){let t=_e(null);try{super.next(e)}finally{_e(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Vg(o),i&&(i=Vg(i)),s&&(s=Vg(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof He&&e.add(a),a}};function Vg(n){return e=>{setTimeout(n,void 0,e)}}var Fe=am;function $k(){return this._results[Symbol.iterator]()}var um=class n{get changes(){return this._changes??=new Fe}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=$k)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=yO(e);(this._changesDetected=!mO(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Vb(n){return(n.flags&128)===128}var Lb=new Map,qk=0;function Hk(){return qk++}function zk(n){Lb.set(n[Pd],n)}function Gk(n){Lb.delete(n[Pd])}var tT="__ngContext__";function Kr(n,e){Ui(e)?(n[tT]=e[Pd],zk(e)):n[tT]=e}function jb(n){return Bb(n[ru])}function Ub(n){return Bb(n[vn])}function Bb(n){for(;n!==null&&!_r(n);)n=n[vn];return n}var cm;function $b(n){cm=n}function Wk(){if(cm!==void 0)return cm;if(typeof document<"u")return document;throw new W(210,!1)}var Bd=new U("",{providedIn:"root",factory:()=>Kk}),Kk="ng",vy=new U(""),lt=new U("",{providedIn:"platform",factory:()=>"unknown"});var _y=new U("",{providedIn:"root",factory:()=>Wk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Qk="h",Yk="b";var Zk=()=>null;function wy(n,e,t=!1){return Zk(n,e,t)}var qb=!1,Jk=new U("",{providedIn:"root",factory:()=>qb});var zl;function Xk(){if(zl===void 0&&(zl=null,pt.trustedTypes))try{zl=pt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return zl}function $d(n){return Xk()?.createHTML(n)||n}var Gl;function e1(){if(Gl===void 0&&(Gl=null,pt.trustedTypes))try{Gl=pt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gl}function nT(n){return e1()?.createScriptURL(n)||n}var gr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ST})`}},lm=class extends gr{getTypeName(){return"HTML"}},dm=class extends gr{getTypeName(){return"Style"}},hm=class extends gr{getTypeName(){return"Script"}},fm=class extends gr{getTypeName(){return"URL"}},pm=class extends gr{getTypeName(){return"ResourceURL"}};function Tn(n){return n instanceof gr?n.changingThisBreaksApplicationSecurity:n}function Jr(n,e){let t=t1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ST})`)}return t===e}function t1(n){return n instanceof gr&&n.getTypeName()||null}function Hb(n){return new lm(n)}function zb(n){return new dm(n)}function Gb(n){return new hm(n)}function Wb(n){return new fm(n)}function Kb(n){return new pm(n)}function n1(n){let e=new mm(n);return r1()?new gm(e):e}var gm=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString($d(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}},mm=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=$d(e),t}};function r1(){try{return!!new window.DOMParser().parseFromString($d(""),"text/html")}catch{return!1}}var i1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qd(n){return n=String(n),n.match(i1)?n:"unsafe:"+n}function wr(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function pu(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var Qb=wr("area,br,col,hr,img,wbr"),Yb=wr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zb=wr("rp,rt"),o1=pu(Zb,Yb),s1=pu(Yb,wr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),a1=pu(Zb,wr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rT=pu(Qb,s1,a1,o1),Jb=wr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),u1=wr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),c1=wr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),l1=pu(Jb,u1,c1),d1=wr("script,style,template"),ym=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=p1(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=f1(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=iT(e).toLowerCase();if(!rT.hasOwnProperty(t))return this.sanitizedSomething=!0,!d1.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!l1.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;Jb[a]&&(u=qd(u)),this.buf.push(" ",s,'="',oT(u),'"')}return this.buf.push(">"),!0}endElement(e){let t=iT(e).toLowerCase();rT.hasOwnProperty(t)&&!Qb.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(oT(e))}};function h1(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function f1(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw Xb(e);return e}function p1(n){let e=n.firstChild;if(e&&h1(n,e))throw Xb(e);return e}function iT(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function Xb(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var g1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m1=/([^\#-~ |!])/g;function oT(n){return n.replace(/&/g,"&amp;").replace(g1,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(m1,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Wl;function e0(n,e){let t=null;try{Wl=Wl||n1(n);let r=e?String(e):"";t=Wl.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=Wl.getInertBodyElement(r)}while(r!==o);let a=new ym().sanitizeChildren(sT(t)||t);return $d(a)}finally{if(t){let r=sT(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function sT(n){return"content"in n&&y1(n)?n.content:null}function y1(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Wn=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Wn||{});function v1(n){let e=n0();return e?e.sanitize(Wn.URL,n)||"":Jr(n,"URL")?Tn(n):qd(Rd(n))}function _1(n){let e=n0();if(e)return nT(e.sanitize(Wn.RESOURCE_URL,n)||"");if(Jr(n,"ResourceURL"))return nT(Tn(n));throw new W(904,!1)}function w1(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?_1:v1}function t0(n,e,t){return w1(e,t)(n)}function n0(){let n=fe();return n&&n[_n].sanitizer}var I1=/^>|^->|<!--|-->|--!>|<!-$/g,E1=/(<|>)/g,D1="\u200B$1\u200B";function C1(n){return n.replace(I1,e=>e.replace(E1,D1))}function y8(n){return n.ownerDocument}function r0(n){return n instanceof Function?n():n}function T1(n){return(n??L(ct)).get(lt)==="browser"}var mr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(mr||{}),b1;function Iy(n,e){return b1(n,e)}function ts(n,e,t,r,i){if(r!=null){let o,s=!1;_r(r)?o=r:Ui(r)&&(s=!0,r=r[vr]);let a=Hn(r);n===0&&t!==null?i==null?a0(e,t,a):hd(e,t,a,i||null,!0):n===1&&t!==null?hd(e,t,a,i||null,!0):n===2?H1(e,a,s):n===3&&e.destroyNode(a),o!=null&&G1(e,n,o,t,i)}}function A1(n,e){return n.createText(e)}function S1(n,e,t){n.setValue(e,t)}function M1(n,e){return n.createComment(C1(e))}function i0(n,e,t){return n.createElement(e,t)}function R1(n,e){o0(n,e),e[vr]=null,e[Dn]=null}function x1(n,e,t,r,i,o){r[vr]=i,r[Dn]=e,Gd(n,r,t,1,i,o)}function o0(n,e){e[_n].changeDetectionScheduler?.notify(1),Gd(n,e,e[$e],2,null,null)}function N1(n){let e=n[ru];if(!e)return Lg(n[se],n);for(;e;){let t=null;if(Ui(e))t=e[ru];else{let r=e[Tt];r&&(t=r)}if(!t){for(;e&&!e[vn]&&e!==n;)Ui(e)&&Lg(e[se],e),e=e[gt];e===null&&(e=n),Ui(e)&&Lg(e[se],e),t=e&&e[vn]}e=t}}function P1(n,e,t,r){let i=Tt+r,o=t.length;r>0&&(t[i-1][vn]=e),r<o-Tt?(e[vn]=t[i],LT(t,Tt+r,e)):(t.push(e),e[vn]=null),e[gt]=t;let s=e[hu];s!==null&&t!==s&&O1(s,e);let a=e[pr];a!==null&&a.insertView(n),tm(e),e[ne]|=128}function O1(n,e){let t=n[cs],i=e[gt][gt][wn];e[wn]!==i&&(n[ne]|=sy.HasTransplantedViews),t===null?n[cs]=[e]:t.push(e)}function s0(n,e){let t=n[cs],r=t.indexOf(e);t.splice(r,1)}function su(n,e){if(n.length<=Tt)return;let t=Tt+e,r=n[t];if(r){let i=r[hu];i!==null&&i!==n&&s0(i,r),e>0&&(n[t-1][vn]=r[vn]);let o=od(n,Tt+e);R1(r[se],r);let s=o[pr];s!==null&&s.detachView(o[se]),r[gt]=null,r[vn]=null,r[ne]&=-129}return r}function Hd(n,e){if(!(e[ne]&256)){let t=e[$e];t.destroyNode&&Gd(n,e,t,3,null,null),N1(e)}}function Lg(n,e){if(e[ne]&256)return;let t=_e(null);try{e[ne]&=-129,e[ne]|=256,e[qi]&&yC(e[qi]),F1(n,e),k1(n,e),e[se].type===1&&e[$e].destroy();let r=e[hu];if(r!==null&&_r(e[gt])){r!==e[gt]&&s0(r,e);let i=e[pr];i!==null&&i.detachView(n)}Gk(e)}finally{_e(t)}}function k1(n,e){let t=n.cleanup,r=e[nu];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[nu]=null);let i=e[zr];if(i!==null){e[zr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function F1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Gi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Bn(4,a,u);try{u.call(a)}finally{Bn(5,a,u)}}else{Bn(4,i,o);try{o.call(i)}finally{Bn(5,i,o)}}}}}function V1(n,e,t){return L1(n,e.parent,t)}function L1(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[vr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===qn.None||o===qn.Emulated)return null}return an(r,t)}}function hd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function a0(n,e,t){n.appendChild(e,t)}function aT(n,e,t,r,i){r!==null?hd(n,e,t,r,i):a0(n,e,t)}function j1(n,e,t,r){n.removeChild(e,t,r)}function Ey(n,e){return n.parentNode(e)}function U1(n,e){return n.nextSibling(e)}function B1(n,e,t){return q1(n,e,t)}function $1(n,e,t){return n.type&40?an(n,t):null}var q1=$1,uT;function zd(n,e,t,r){let i=V1(n,r,e),o=e[$e],s=r.parent||e[Dn],a=B1(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)aT(o,i,t[u],a,!1);else aT(o,i,t,a,!1);uT!==void 0&&uT(o,r,e,t,i)}function td(n,e){if(e!==null){let t=e.type;if(t&3)return an(e,n);if(t&4)return vm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return td(n,r);{let i=n[e.index];return _r(i)?vm(-1,i):Hn(i)}}else{if(t&32)return Iy(e,n)()||Hn(n[e.index]);{let r=u0(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ou(n[wn]);return td(i,r)}else return td(n,e.next)}}}return null}function u0(n,e){if(e!==null){let r=n[wn][Dn],i=e.projection;return r.projection[i]}return null}function vm(n,e){let t=Tt+n+1;if(t<e.length){let r=e[t],i=r[se].firstChild;if(i!==null)return td(r,i)}return e[Hi]}function H1(n,e,t){let r=Ey(n,e);r&&j1(n,r,e,t)}function Dy(n,e,t,r,i,o,s){for(;t!=null;){let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Kr(Hn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Dy(n,e,t.child,r,i,o,!1),ts(e,n,i,a,o);else if(u&32){let l=Iy(t,r),d;for(;d=l();)ts(e,n,i,d,o);ts(e,n,i,a,o)}else u&16?z1(n,e,r,t,i,o):ts(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Gd(n,e,t,r,i,o){Dy(t,r,n.firstChild,e,i,o,!1)}function z1(n,e,t,r,i,o){let s=t[wn],u=s[Dn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let d=u[l];ts(e,n,i,d,o)}else{let l=u,d=s[gt];Vb(r)&&(l.flags|=128),Dy(n,e,l,d,i,o,!0)}}function G1(n,e,t,r,i){let o=t[Hi],s=Hn(t);o!==s&&ts(e,n,r,o,i);for(let a=Tt;a<t.length;a++){let u=t[a];Gd(u[se],u,n,e,r,o)}}function W1(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:mr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=mr.Important),n.setStyle(t,r,i,o))}}function K1(n,e,t){n.setAttribute(e,"style",t)}function c0(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function l0(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Yg(n,e,r),i!==null&&c0(n,e,i),o!==null&&K1(n,e,o)}var bn={};function v8(n=1){d0(ze(),fe(),Zr()+n,!1)}function d0(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Jl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Xl(e,o,0,t)}zi(t)}function Y(n,e=ge.Default){let t=fe();if(t===null)return V(n,e);let r=St();return Nb(r,t,Vt(n),e)}function h0(){let n="invalid";throw new Error(n)}function f0(n,e,t,r,i,o){let s=_e(null);try{let a=null;i&Be.SignalBased&&(a=e[r][dg]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Be.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):ob(e,a,r,o)}finally{_e(s)}}function Q1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)zi(~i);else{let o=i,s=t[++r],a=t[++r];yk(s,o);let u=e[o];a(2,u)}}}finally{zi(-1)}}function Wd(n,e,t,r,i,o,s,a,u,l,d){let f=e.blueprint.slice();return f[vr]=i,f[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(f[ne]|=2048),hb(f),f[gt]=f[fs]=n,f[jt]=t,f[_n]=s||n&&n[_n],f[$e]=a||n&&n[$e],f[us]=u||n&&n[us]||null,f[Dn]=o,f[Pd]=Hk(),f[tu]=d,f[rb]=l,f[wn]=e.type==2?n[wn]:f,f}function gu(n,e,t,r,i){let o=n.data[e];if(o===null)o=Y1(n,e,t,r,i),mk()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=fk();o.injectorIndex=s===null?-1:s.injectorIndex}return Zi(o,!0),o}function Y1(n,e,t,r,i){let o=gb(),s=dy(),a=s?o:o&&o.parent,u=n.data[e]=nF(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function p0(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function g0(n,e,t,r,i){let o=Zr(),s=r&2;try{zi(-1),s&&e.length>Jt&&d0(n,e,Jt,!1),Bn(s?2:0,i),t(r,i)}finally{zi(o),Bn(s?3:1,i)}}function Cy(n,e,t){if(ay(e)){let r=_e(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{_e(r)}}}function Ty(n,e,t){pb()&&(uF(n,e,t,an(t,e)),(t.flags&64)===64&&v0(n,e,t))}function by(n,e,t=an){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function m0(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ay(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ay(n,e,t,r,i,o,s,a,u,l,d){let f=Jt+r,g=f+i,y=Z1(f,g),T=typeof l=="function"?l():l;return y[se]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:d}}function Z1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:bn);return t}function J1(n,e,t,r){let o=r.get(Jk,qb)||t===qn.ShadowDom,s=n.selectRootElement(e,o);return X1(s),s}function X1(n){eF(n)}var eF=()=>null;function tF(n,e,t,r){let i=I0(e);i.push(t),n.firstCreatePass&&E0(n).push(r,i.length-1)}function nF(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return lk()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function cT(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Be.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?lT(r,t,l,a,u):lT(r,t,l,a)}return r}function lT(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function rF(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let d=r;d<i;d++){let f=o[d],g=t?t.get(f):null,y=g?g.inputs:null,T=g?g.outputs:null;u=cT(0,f.inputs,d,u,y),l=cT(1,f.outputs,d,l,T);let C=u!==null&&s!==null&&!ry(e)?_F(u,d,s):null;a.push(C)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function iF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Sy(n,e,t,r,i,o,s,a){let u=an(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Ry(n,t,d,r,i),Od(e)&&oF(t,e.index)):e.type&3?(r=iF(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function oF(n,e){let t=Yr(e,n);t[ne]&16||(t[ne]|=64)}function My(n,e,t,r){if(pb()){let i=r===null?null:{"":-1},o=lF(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&y0(n,e,t,s,i,a),i&&dF(t,r,i)}t.mergedAttrs=Xa(t.mergedAttrs,t.attrs)}function y0(n,e,t,r,i,o){for(let l=0;l<r.length;l++)im(dd(t,e),n,r[l].type);fF(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=p0(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Xa(t.mergedAttrs,d.hostAttrs),pF(n,t,e,u,d),hF(u,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}rF(n,t,o)}function sF(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;aF(s)!=a&&s.push(a),s.push(t,r,o)}}function aF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function uF(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Od(t)&&gF(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||dd(t,e),Kr(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Wi(e,n,a,t);if(Kr(l,e),s!==null&&vF(e,a-i,l,u,t,s),Wr(u)){let d=Yr(t.index,e);d[jt]=Wi(e,n,a,t)}}}function v0(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=vk();try{zi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];nm(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&cF(u,l)}}finally{zi(-1),nm(s)}}function cF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function lF(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(bO(e,s.selectors,!1))if(r||(r=[]),Wr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;_m(n,e,u)}else r.unshift(s),_m(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function _m(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function dF(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new W(-301,!1);r.push(e[i],o)}}}function hF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Wr(e)&&(t[""]=n)}}function fF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function pF(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=$i(i.type,!0)),s=new Gi(o,Wr(i),Y);n.blueprint[r]=s,t[r]=s,sF(n,e,r,p0(n,t,i.hostVars,bn),i)}function gF(n,e,t){let r=an(e,n),i=m0(t),o=n[_n].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Kd(n,Wd(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function mF(n,e,t,r,i,o){let s=an(n,e);yF(e[$e],s,o,n.value,t,r,i)}function yF(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Rd(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function vF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],d=s[a++],f=s[a++];f0(r,t,u,l,d,f)}}function _F(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function _0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function w0(n,e){let t=n.contentQueries;if(t!==null){let r=_e(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];hy(o),a.contentQueries(2,e[s],s)}}}finally{_e(r)}}}function Kd(n,e){return n[ru]?n[QC][vn]=e:n[ru]=e,n[QC]=e,e}function wm(n,e,t){hy(0);let r=_e(null);try{e(n,t)}finally{_e(r)}}function I0(n){return n[nu]||(n[nu]=[])}function E0(n){return n.cleanup||(n.cleanup=[])}function D0(n,e){let t=n[us],r=t?t.get(zn,null):null;r&&r.handleError(e)}function Ry(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],d=n.data[s];f0(d,l,r,a,u,i)}}function wF(n,e,t){let r=lb(e,n);S1(n[$e],r,t)}function IF(n,e){let t=Yr(e,n),r=t[se];EF(r,t);let i=t[vr];i!==null&&t[tu]===null&&(t[tu]=wy(i,t[us])),xy(r,t,t[jt])}function EF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function xy(n,e,t){fy(e);try{let r=n.viewQuery;r!==null&&wm(1,r,t);let i=n.template;i!==null&&g0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[pr]?.finishViewCreation(n),n.staticContentQueries&&w0(n,e),n.staticViewQueries&&wm(2,n.viewQuery,t);let o=n.components;o!==null&&DF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,py()}}function DF(n,e){for(let t=0;t<e.length;t++)IF(n,e[t])}function Ny(n,e,t,r){let i=_e(null);try{let o=e.tView,a=n[ne]&4096?4096:16,u=Wd(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[hu]=l;let d=n[pr];return d!==null&&(u[pr]=d.createEmbeddedView(o)),xy(o,u,t),u}finally{_e(i)}}function CF(n,e){let t=Tt+e;if(t<n.length)return n[t]}function fd(n,e){return!e||e.firstChild===null||Vb(n)}function Py(n,e,t,r=!0){let i=e[se];if(P1(i,e,n,t),r){let s=vm(t,n),a=e[$e],u=Ey(a,n[Hi]);u!==null&&x1(i,n[Dn],a,e,u,s)}let o=e[tu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function TF(n,e){let t=su(n,e);return t!==void 0&&Hd(t[se],t),t}function pd(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(Hn(o)),_r(o)&&bF(o,r);let s=t.type;if(s&8)pd(n,e,t.child,r);else if(s&32){let a=Iy(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=u0(e,t);if(Array.isArray(a))r.push(...a);else{let u=ou(e[wn]);pd(u[se],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function bF(n,e){for(let t=Tt;t<n.length;t++){let r=n[t],i=r[se].firstChild;i!==null&&pd(r[se],r,i,e)}n[Hi]!==n[vr]&&e.push(n[Hi])}var C0=[];function AF(n){return n[qi]??SF(n)}function SF(n){let e=C0.pop()??Object.create(RF);return e.lView=n,e}function MF(n){n.lView[qi]!==n&&(n.lView=null,C0.push(n))}var RF=De(q({},pC),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{iu(n.lView)},consumerOnSignalRead(){this.lView[qi]=this}}),T0=100;function b0(n,e=!0,t=0){let r=n[_n],i=r.rendererFactory,o=!1;o||i.begin?.();try{xF(n,t)}catch(s){throw e&&D0(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function xF(n,e){Im(n,e);let t=0;for(;ly(n);){if(t===T0)throw new W(103,!1);t++,Im(n,1)}}function NF(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1;!o&&e[_n].inlineEffectRunner?.flush(),fy(e);let s=null,a=null;!o&&PF(n)&&(a=AF(e),s=gC(a));try{hb(e),gk(n.bindingStartIndex),t!==null&&g0(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let f=n.preOrderCheckHooks;f!==null&&Jl(e,f,null)}else{let f=n.preOrderHooks;f!==null&&Xl(e,f,0,null),Og(e,0)}if(OF(e),A0(e,0),n.contentQueries!==null&&w0(n,e),!o)if(u){let f=n.contentCheckHooks;f!==null&&Jl(e,f)}else{let f=n.contentHooks;f!==null&&Xl(e,f,1),Og(e,1)}Q1(n,e);let l=n.components;l!==null&&M0(e,l,0);let d=n.viewQuery;if(d!==null&&wm(2,d,r),!o)if(u){let f=n.viewCheckHooks;f!==null&&Jl(e,f)}else{let f=n.viewHooks;f!==null&&Xl(e,f,2),Og(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Pg]){for(let f of e[Pg])f();e[Pg]=null}o||(e[ne]&=-73)}catch(u){throw iu(e),u}finally{a!==null&&(mC(a,s),MF(a)),py()}}function PF(n){return n.type!==2}function A0(n,e){for(let t=jb(n);t!==null;t=Ub(t))for(let r=Tt;r<t.length;r++){let i=t[r];S0(i,e)}}function OF(n){for(let e=jb(n);e!==null;e=Ub(e)){if(!(e[ne]&sy.HasTransplantedViews))continue;let t=e[cs];for(let r=0;r<t.length;r++){let i=t[r],o=i[gt];ik(i)}}}function kF(n,e,t){let r=Yr(e,n);S0(r,t)}function S0(n,e){cy(n)&&Im(n,e)}function Im(n,e){let r=n[se],i=n[ne],o=n[qi],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&hg(o)),o&&(o.dirty=!1),n[ne]&=-9217,s)NF(r,n,r.template,n[jt]);else if(i&8192){A0(n,1);let a=r.components;a!==null&&M0(n,a,1)}}function M0(n,e,t){for(let r=0;r<e.length;r++)kF(n,e[r],t)}function Oy(n){for(n[_n].changeDetectionScheduler?.notify();n;){n[ne]|=64;let e=ou(n);if(QO(n)&&!e)return n;n=e}return null}var Ki=class{get rootNodes(){let e=this._lView,t=e[se];return pd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jt]}set context(e){this._lView[jt]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[gt];if(_r(e)){let t=e[ad],r=t?t.indexOf(this):-1;r>-1&&(su(e,r),od(t,r))}this._attachedToViewContainer=!1}Hd(this._lView[se],this._lView)}onDestroy(e){fb(this._lView,e)}markForCheck(){Oy(this._cdRefInjectingView||this._lView)}detach(){this._lView[ne]&=-129}reattach(){tm(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,b0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,o0(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e,tm(this._lView)}},Qi=(()=>{class n{static{this.__NG_ELEMENT_ID__=LF}}return n})(),FF=Qi,VF=class extends FF{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Ny(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ki(i)}};function LF(){return Qd(St(),fe())}function Qd(n,e){return n.type&4?new VF(e,n,ps(n,e)):null}var w8=new RegExp(`^(\\d+)*(${Yk}|${Qk})*(.*)`);var jF=()=>null;function gd(n,e){return jF(n,e)}var md=class{},Em=class{},yd=class{};function UF(n){let e=Error(`No component factory found for ${Lt(n)}.`);return e[BF]=n,e}var BF="ngComponent";var Dm=class{resolveComponentFactory(e){throw UF(e)}},Yd=(()=>{class n{static{this.NULL=new Dm}}return n})(),au=class{},cn=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>$F()}}return n})();function $F(){let n=fe(),e=St(),t=Yr(e.index,n);return(Ui(t)?t:n)[$e]}var qF=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>null})}}return n})(),jg={};var dT=new Set;function mu(n){dT.has(n)||(dT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function hT(...n){}function HF(){let n=typeof pt.requestAnimationFrame=="function",e=pt[n?"requestAnimationFrame":"setTimeout"],t=pt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var ue=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fe(!1),this.onMicrotaskEmpty=new Fe(!1),this.onStable=new Fe(!1),this.onError=new Fe(!1),typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=HF().nativeRequestAnimationFrame,WF(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new W(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,zF,hT,hT);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},zF={};function ky(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function GF(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(pt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Cm(n),n.isCheckStableRunning=!0,ky(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Cm(n))}function WF(n){let e=()=>{GF(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(KF(a))return t.invokeTask(i,o,s,a);try{return fT(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),pT(n)}},onInvoke:(t,r,i,o,s,a,u)=>{try{return fT(n),t.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),pT(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Cm(n),ky(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Cm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function fT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function pT(n){n._nesting--,ky(n)}var Tm=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fe,this.onMicrotaskEmpty=new Fe,this.onStable=new Fe,this.onError=new Fe}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function KF(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}function QF(n="zone.js",e){return n==="noop"?new Tm:n==="zone.js"?new ue(e):n}var ns=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ns||{}),YF={destroy(){}};function Zd(n,e){!e&&GO(Zd);let t=e?.injector??L(ct);if(!T1(t))return YF;mu("NgAfterNextRender");let r=t.get(Fy),i=r.handler??=new Am,o=e?.phase??ns.MixedReadWrite,s=()=>{i.unregister(u),a()},a=t.get(yy).onDestroy(s),u=En(t,()=>new bm(o,()=>{s(),n()}));return i.register(u),{destroy:s}}var bm=class{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=L(ue),this.errorHandler=L(zn,{optional:!0}),L(md,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Am=class{constructor(){this.executingCallbacks=!1,this.buckets={[ns.EarlyRead]:new Set,[ns.Write]:new Set,[ns.MixedReadWrite]:new Set,[ns.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Fy=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})();function vd(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Gg(i,a);else if(o==2){let u=a,l=e[++s];r=Gg(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var _d=class extends Yd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Gr(e);return new ds(t,this.ngModule)}};function gT(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function ZF(n){let e=n.toLowerCase();return e==="svg"?cb:e==="math"?XO:null}var Sm=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=xd(r);let i=this.injector.get(e,jg,r);return i!==jg||t===jg?i:this.parentInjector.get(e,t,r)}},ds=class extends yd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=gT(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return gT(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=RO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=_e(null);try{i=i||this.ngModule;let s=i instanceof bt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Sm(e,s):e,u=a.get(au,null);if(u===null)throw new W(407,!1);let l=a.get(qF,null),d=a.get(Fy,null),f=a.get(md,null),g={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},y=u.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",C=r?J1(y,r,this.componentDef.encapsulation,a):i0(y,T,ZF(T)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let F=null;C!==null&&(F=wy(C,a,!0));let H=Ay(0,null,null,1,0,null,null,null,null,null,null),P=Wd(null,H,null,A,null,null,g,y,a,null,F);fy(P);let K,te;try{let X=this.componentDef,I,v=null;X.findHostDirectiveDefs?(I=[],v=new Map,X.findHostDirectiveDefs(X,I,v),I.push(X)):I=[X];let w=JF(P,C),E=XF(w,C,X,I,P,g,y);te=uy(H,Jt),C&&nV(y,X,C,r),t!==void 0&&rV(te,this.ngContentSelectors,t),K=tV(E,X,I,v,P,[iV]),xy(H,P,null)}finally{py()}return new Mm(this.componentType,K,ps(te,P),P,te)}finally{_e(o)}}},Mm=class extends Em{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ki(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Ry(o[se],o,i,e,t),this.previousInputValues.set(e,t);let s=Yr(this._tNode.index,o);Oy(s)}}get injector(){return new Bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function JF(n,e){let t=n[se],r=Jt;return n[r]=e,gu(t,r,2,"#host",null)}function XF(n,e,t,r,i,o,s){let a=i[se];eV(r,n,e,s);let u=null;e!==null&&(u=wy(e,i[us]));let l=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Wd(i,m0(t),null,d,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&_m(a,n,r.length-1),Kd(i,f),i[n.index]=f}function eV(n,e,t,r){for(let i of n)e.mergedAttrs=Xa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(vd(e,e.mergedAttrs,!0),t!==null&&l0(r,t,e))}function tV(n,e,t,r,i,o){let s=St(),a=i[se],u=an(s,i);y0(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,g=Wi(i,a,f,s);Kr(g,i)}v0(a,i,s),u&&Kr(u,i);let l=Wi(i,a,s.directiveStart+s.componentOffset,s);if(n[jt]=i[jt]=l,o!==null)for(let d of o)d(l,e);return Cy(a,s,i),l}function nV(n,e,t,r){if(r)Yg(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=xO(e.selectors[0]);i&&Yg(n,t,i),o&&o.length>0&&c0(n,t,o.join(" "))}}function rV(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function iV(){let n=St();Ud(fe()[se],n)}var Xr=(()=>{class n{static{this.__NG_ELEMENT_ID__=oV}}return n})();function oV(){let n=St();return x0(n,fe())}var sV=Xr,R0=class extends sV{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ps(this._hostTNode,this._hostLView)}get injector(){return new Bi(this._hostTNode,this._hostLView)}get parentInjector(){let e=gy(this._hostTNode,this._hostLView);if(bb(e)){let t=cd(e,this._hostLView),r=ud(e),i=t[se].data[r+8];return new Bi(i,t)}else return new Bi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=mT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Tt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=gd(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,fd(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!KO(e),a;if(s)a=t;else{let T=t||{};a=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef}let u=s?e:new ds(Gr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let C=(s?l:this.parentInjector).get(bt,null);C&&(o=C)}let d=Gr(u.componentType??{}),f=gd(this._lContainer,d?.id??null),g=f?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,fd(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(rk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[gt],l=new R0(u,u[Dn],u[gt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Py(s,i,o,r),e.attachToViewContainerRef(),LT(Ug(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=mT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=su(this._lContainer,t);r&&(od(Ug(this._lContainer),t),Hd(r[se],r))}detach(e){let t=this._adjustIndex(e,-1),r=su(this._lContainer,t);return r&&od(Ug(this._lContainer),t)!=null?new Ki(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function mT(n){return n[ad]}function Ug(n){return n[ad]||(n[ad]=[])}function x0(n,e){let t,r=e[n.index];return _r(r)?t=r:(t=_0(r,e,null,n),e[n.index]=t,Kd(e,t)),uV(t,e,n,r),new R0(t,n,e)}function aV(n,e){let t=n[$e],r=t.createComment(""),i=an(e,n),o=Ey(t,i);return hd(t,o,r,U1(t,i),!1),r}var uV=dV,cV=()=>!1;function lV(n,e,t){return cV(n,e,t)}function dV(n,e,t,r){if(n[Hi])return;let i;t.type&8?i=Hn(r):i=aV(e,t),n[Hi]=i}var Rm=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},xm=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Vy(e,t).matches!==null&&this.queries[t].setDirty()}},wd=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=_V(e):this.predicate=e}},Nm=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Pm=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,hV(t,o)),this.matchTNodeWithReadOption(e,t,ed(t,e,o,!1,!1))}else r===Qi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ed(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Mt||i===Xr||i===Qi&&t.type&4)this.addMatch(t.index,-2);else{let o=ed(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function hV(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function fV(n,e){return n.type&11?ps(n,e):n.type&4?Qd(n,e):null}function pV(n,e,t,r){return t===-1?fV(e,n):t===-2?gV(n,e,r):Wi(n,n[se],t,e)}function gV(n,e,t){if(t===Mt)return ps(e,n);if(t===Qi)return Qd(e,n);if(t===Xr)return x0(e,n)}function N0(n,e,t,r){let i=e[pr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let d=o[l];a.push(pV(e,d,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function Om(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=N0(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-u];for(let f=Tt;f<d.length;f++){let g=d[f];g[hu]===g[gt]&&Om(g[se],g,l,r)}if(d[cs]!==null){let f=d[cs];for(let g=0;g<f.length;g++){let y=f[g];Om(y[se],y,l,r)}}}}}return r}function mV(n,e){return n[pr].queries[e].queryList}function P0(n,e,t){let r=new um((t&4)===4);return tF(n,e,r,r.destroy),(e[pr]??=new xm).queries.push(new Rm(r))-1}function yV(n,e,t){let r=ze();return r.firstCreatePass&&(O0(r,new wd(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),P0(r,fe(),e)}function vV(n,e,t,r){let i=ze();if(i.firstCreatePass){let o=St();O0(i,new wd(e,t,r),o.index),wV(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return P0(i,fe(),t)}function _V(n){return n.split(",").map(e=>e.trim())}function O0(n,e,t){n.queries===null&&(n.queries=new Nm),n.queries.track(new Pm(e,t))}function wV(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Vy(n,e){return n.queries.getByIndex(e)}function IV(n,e){let t=n[se],r=Vy(t,e);return r.crossesNgTemplate?Om(t,n,e,[]):N0(t,n,r,e)}function EV(n){return typeof n=="function"&&n[dg]!==void 0}function k0(n){return EV(n)&&typeof n.set=="function"}function DV(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(AV))}return o}return Id.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),s.push(r(f).then(y=>{a[l+g]=y,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>SV(o));e.push(u)}),TV(),Promise.all(e).then(()=>{})}var Id=new Map,CV=new Set;function TV(){let n=Id;return Id=new Map,n}function bV(){return Id.size===0}function AV(n){return typeof n=="string"?n:n.text()}function SV(n){CV.delete(n)}function MV(n){return Object.getPrototypeOf(n.prototype).constructor}function ot(n){let e=MV(n.type),t=!0,r=[n];for(;e;){let i;if(Wr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new W(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Kl(n.inputs),s.inputTransforms=Kl(n.inputTransforms),s.declaredInputs=Kl(n.declaredInputs),s.outputs=Kl(n.outputs);let a=i.hostBindings;a&&OV(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&NV(n,u),l&&PV(n,l),RV(n,i),ZP(n.outputs,i.outputs),Wr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ot&&(t=!1)}}e=Object.getPrototypeOf(e)}xV(r)}function RV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function xV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xa(i.hostAttrs,t=Xa(t,i.hostAttrs))}}function Kl(n){return n===os?{}:n===Gt?[]:n}function NV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function PV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function OV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Ly(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Qr=class{},uu=class{};var Ed=class extends Qr{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _d(this);let i=QT(e);this._bootstrapComponents=r0(i.bootstrap),this._r3Injector=kb(e,t,[{provide:Qr,useValue:this},{provide:Yd,useValue:this.componentFactoryResolver},...r],Lt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Dd=class extends uu{constructor(e){super(),this.moduleType=e}create(e){return new Ed(this.moduleType,e,[])}};function kV(n,e,t){return new Ed(n,e,t)}var km=class extends Qr{constructor(e){super(),this.componentFactoryResolver=new _d(this),this.instance=null;let t=new eu([...e.providers,{provide:Qr,useValue:this},{provide:Yd,useValue:this.componentFactoryResolver}],e.parent||oy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Jd(n,e,t=null){return new km({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Ji=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ft(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function F0(n){return VV(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function FV(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function VV(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Xd(n,e,t){return n[e]=t}function LV(n,e){return n[e]}function In(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function V0(n,e,t,r){let i=In(n,e,t);return In(n,e+1,r)||i}function jV(n,e,t,r,i){let o=V0(n,e,t,r);return In(n,e+2,i)||o}function UV(n){return(n.flags&32)===32}function BV(n,e,t,r,i,o,s,a,u){let l=e.consts,d=gu(e,n,4,s||null,ls(l,a));My(e,t,d,ls(l,u)),Ud(e,d);let f=d.tView=Ay(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function Fm(n,e,t,r,i,o,s,a){let u=fe(),l=ze(),d=n+Jt,f=l.firstCreatePass?BV(d,l,u,e,t,r,i,o,s):l.data[d];Zi(f,!1);let g=$V(l,u,f,n);Ld()&&zd(l,u,g,f),Kr(g,u);let y=_0(g,u,g,f);return u[d]=y,Kd(u,y),lV(y,f,u),kd(f)&&Ty(l,u,f),s!=null&&by(u,f,a),Fm}var $V=qV;function qV(n,e,t,r){return jd(!0),e[$e].createComment("")}function gs(n,e,t,r){let i=fe(),o=fu();if(In(i,o,e)){let s=ze(),a=Vd();mF(a,i,n,e,t,r)}return gs}function L0(n,e,t,r){return In(n,fu(),t)?e+Rd(t)+r:bn}function Ql(n,e){return n<<17|e<<2}function Yi(n){return n>>17&32767}function HV(n){return(n&2)==2}function zV(n,e){return n&131071|e<<17}function Vm(n){return n|2}function hs(n){return(n&131068)>>2}function Bg(n,e){return n&-131069|e<<2}function GV(n){return(n&1)===1}function Lm(n){return n|1}function WV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Yi(s),u=hs(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||du(f,d)>0)&&(l=!0)}else d=t;if(i)if(u!==0){let g=Yi(n[a+1]);n[r+1]=Ql(g,a),g!==0&&(n[g+1]=Bg(n[g+1],r)),n[a+1]=zV(n[a+1],r)}else n[r+1]=Ql(a,0),a!==0&&(n[a+1]=Bg(n[a+1],r)),a=r;else n[r+1]=Ql(u,0),a===0?a=r:n[u+1]=Bg(n[u+1],r),u=r;l&&(n[r+1]=Vm(n[r+1])),yT(n,d,r,!0),yT(n,d,r,!1),KV(e,d,n,r,o),s=Ql(a,u),o?e.classBindings=s:e.styleBindings=s}function KV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&du(o,e)>=0&&(t[r+1]=Lm(t[r+1]))}function yT(n,e,t,r){let i=n[t+1],o=e===null,s=r?Yi(i):hs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];QV(u,e)&&(a=!0,n[s+1]=r?Lm(l):Vm(l)),s=r?Yi(l):hs(l)}a&&(n[t+1]=r?Vm(i):Lm(i))}function QV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?du(n,e)>=0:!1}var yn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function YV(n){return n.substring(yn.key,yn.keyEnd)}function ZV(n){return JV(n),j0(n,U0(n,0,yn.textEnd))}function j0(n,e){let t=yn.textEnd;return t===e?-1:(e=yn.keyEnd=XV(n,yn.key=e,t),U0(n,e,t))}function JV(n){yn.key=0,yn.keyEnd=0,yn.value=0,yn.valueEnd=0,yn.textEnd=n.length}function U0(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function XV(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function eL(n,e,t){let r=fe(),i=fu();if(In(r,i,e)){let o=ze(),s=Vd();Sy(o,s,r,n,e,r[$e],t,!1)}return eL}function jm(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Ry(n,t,o[s],s,r)}function eh(n,e){return nL(n,e,null,!0),eh}function E8(n){rL(cL,tL,n,!0)}function tL(n,e){for(let t=ZV(e);t>=0;t=j0(e,t))ny(n,YV(e),!0)}function nL(n,e,t,r){let i=fe(),o=ze(),s=yb(2);if(o.firstUpdatePass&&$0(o,n,s,r),e!==bn&&In(i,s,e)){let a=o.data[Zr()];q0(o,a,i,i[$e],n,i[s+1]=dL(e,t),r,s)}}function rL(n,e,t,r){let i=ze(),o=yb(2);i.firstUpdatePass&&$0(i,null,o,r);let s=fe();if(t!==bn&&In(s,o,t)){let a=i.data[Zr()];if(H0(a,r)&&!B0(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=Gg(u,t||"")),jm(i,a,s,t,r)}else lL(i,a,s,s[$e],s[o+1],s[o+1]=uL(n,e,t),r,o)}}function B0(n,e){return e>=n.expandoStartIndex}function $0(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Zr()],s=B0(n,t);H0(o,r)&&e===null&&!s&&(e=!1),e=iL(i,o,e,r),WV(i,o,e,t,s,r)}}function iL(n,e,t,r){let i=_k(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=$g(null,n,e,t,r),t=cu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=$g(i,n,e,t,r),o===null){let u=oL(n,e,r);u!==void 0&&Array.isArray(u)&&(u=$g(null,n,e,u[1],r),u=cu(u,e.attrs,r),sL(n,e,r,u))}else o=aL(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function oL(n,e,t){let r=t?e.classBindings:e.styleBindings;if(hs(r)!==0)return n[Yi(r)]}function sL(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Yi(i)]=r}function aL(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=cu(r,s,t)}return cu(r,e.attrs,t)}function $g(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=cu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function cu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ny(n,s,t?!0:e[++o]))}return n===void 0?null:n}function uL(n,e,t){if(t==null||t==="")return Gt;let r=[],i=Tn(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function cL(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&ny(n,r,t)}function lL(n,e,t,r,i,o,s,a){i===bn&&(i=Gt);let u=0,l=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,T=null,C;d===f?(u+=2,l+=2,g!==y&&(T=f,C=y)):f===null||d!==null&&d<f?(u+=2,T=d):(l+=2,T=f,C=y),T!==null&&q0(n,e,t,r,T,C,s,a),d=u<i.length?i[u]:null,f=l<o.length?o[l]:null}}function q0(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],d=GV(l)?vT(u,e,t,i,hs(l),s):void 0;if(!Cd(d)){Cd(o)||HV(l)&&(o=vT(u,null,t,i,a,s));let f=lb(Zr(),t);W1(r,s,f,i,o)}}function vT(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),d=l?u[1]:u,f=d===null,g=t[i+1];g===bn&&(g=f?Gt:void 0);let y=f?xg(g,r):d===r?g:void 0;if(l&&!Cd(y)&&(y=xg(u,r)),Cd(y)&&(a=y,s))return a;let T=n[i+1];i=s?Yi(T):hs(T)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=xg(u,r))}return a}function Cd(n){return n!==void 0}function dL(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Lt(Tn(n)))),n}function H0(n,e){return(n.flags&(e?8:16))!==0}var Um=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function qg(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function hL(n,e,t){let r,i,o=0,s=n.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let u=n.at(o),l=e[o],d=qg(o,u,o,l,t);if(d!==0){d<0&&n.updateValue(o,l),o++;continue}let f=n.at(s),g=e[a],y=qg(s,f,a,g,t);if(y!==0){y<0&&n.updateValue(s,g),s--,a--;continue}let T=t(o,u),C=t(s,f),A=t(o,l);if(Object.is(A,C)){let F=t(a,g);Object.is(F,T)?(n.swap(o,s),n.updateValue(s,g),a--,s--):n.move(s,o),n.updateValue(o,l),o++;continue}if(r??=new Td,i??=wT(n,o,s,t),Bm(n,r,o,A))n.updateValue(o,l),o++,s++;else if(i.has(A))r.set(T,n.detach(o)),s--;else{let F=n.create(o,e[o]);n.attach(o,F),o++,s++}}for(;o<=a;)_T(n,r,t,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),u=a.next();for(;!u.done&&o<=s;){let l=n.at(o),d=u.value,f=qg(o,l,o,d,t);if(f!==0)f<0&&n.updateValue(o,d),o++,u=a.next();else{r??=new Td,i??=wT(n,o,s,t);let g=t(o,d);if(Bm(n,r,o,g))n.updateValue(o,d),o++,s++,u=a.next();else if(!i.has(g))n.attach(o,n.create(o,d)),o++,s++,u=a.next();else{let y=t(o,l);r.set(y,n.detach(o)),s--}}}for(;!u.done;)_T(n,r,t,n.length,u.value),u=a.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(a=>{n.destroy(a)})}function Bm(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function _T(n,e,t,r,i){if(Bm(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function wT(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Td=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};var $m=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Tt}};function D8(n){return n}var qm=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function C8(n,e,t,r,i,o,s,a,u,l,d,f,g){mu("NgControlFlow");let y=u!==void 0,T=fe(),C=a?s.bind(T[wn][jt]):s,A=new qm(y,C);T[Jt+n]=A,Fm(n+1,e,t,r,i,o),y&&Fm(n+2,u,l,d,f,g)}var Hm=class extends Um{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Tt}at(e){return this.getLView(e)[jt].$implicit}attach(e,t){let r=t[tu];this.needsIndexUpdate||=e!==this.length,Py(this.lContainer,t,e,fd(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,fL(this.lContainer,e)}create(e,t){let r=gd(this.lContainer,this.templateTNode.tView.ssrId);return Ny(this.hostLView,this.templateTNode,new $m(this.lContainer,t,e),{dehydratedView:r})}destroy(e){Hd(e[se],e)}updateValue(e,t){this.getLView(e)[jt].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[jt].$index=e}getLView(e){return pL(this.lContainer,e)}};function T8(n){let e=_e(null),t=Zr();try{let r=fe(),i=r[se],o=r[t];if(o.liveCollection===void 0){let a=t+1,u=IT(r,a),l=ET(i,a);o.liveCollection=new Hm(u,r,l)}else o.liveCollection.reset();let s=o.liveCollection;if(hL(s,n,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=fu(),u=s.length===0;if(In(r,a,u)){let l=t+2,d=IT(r,l);if(u){let f=ET(i,l),g=gd(d,f.tView.ssrId),y=Ny(r,f,void 0,{dehydratedView:g});Py(d,y,0,fd(f,g))}else TF(d,0)}}}finally{_e(e)}}function IT(n,e){return n[e]}function fL(n,e){return su(n,e)}function pL(n,e){return CF(n,e)}function ET(n,e){return uy(n,e)}function gL(n,e,t,r,i,o){let s=e.consts,a=ls(s,i),u=gu(e,n,2,r,a);return My(e,t,u,ls(s,o)),u.attrs!==null&&vd(u,u.attrs,!1),u.mergedAttrs!==null&&vd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function z0(n,e,t,r){let i=fe(),o=ze(),s=Jt+n,a=i[$e],u=o.firstCreatePass?gL(s,o,i,e,t,r):o.data[s],l=mL(o,i,u,a,e,n);i[s]=l;let d=kd(u);return Zi(u,!0),l0(a,l,u),!UV(u)&&Ld()&&zd(o,i,l,u),ak()===0&&Kr(l,i),uk(),d&&(Ty(o,i,u),Cy(o,u,i)),r!==null&&by(i,u),z0}function G0(){let n=St();dy()?mb():(n=n.parent,Zi(n,!1));let e=n;dk(e)&&hk(),ck();let t=ze();return t.firstCreatePass&&(Ud(t,n),ay(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Ak(e)&&jm(t,e,fe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Sk(e)&&jm(t,e,fe(),e.stylesWithoutHost,!1),G0}function jy(n,e,t,r){return z0(n,e,t,r),G0(),jy}var mL=(n,e,t,r,i,o)=>(jd(!0),i0(r,i,Dk()));function yL(n,e,t,r,i){let o=e.consts,s=ls(o,r),a=gu(e,n,8,"ng-container",s);s!==null&&vd(a,s,!0);let u=ls(o,i);return My(e,t,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function vL(n,e,t){let r=fe(),i=ze(),o=n+Jt,s=i.firstCreatePass?yL(o,i,r,e,t):i.data[o];Zi(s,!0);let a=wL(i,r,s,n);return r[o]=a,Ld()&&zd(i,r,a,s),Kr(a,r),kd(s)&&(Ty(i,r,s),Cy(i,s,r)),t!=null&&by(r,s),vL}function _L(){let n=St(),e=ze();return dy()?mb():(n=n.parent,Zi(n,!1)),e.firstCreatePass&&(Ud(e,n),ay(n)&&e.queries.elementEnd(n)),_L}var wL=(n,e,t,r)=>(jd(!0),M1(e[$e],""));function b8(){return fe()}var bd="en-US";var IL=bd;function EL(n){typeof n=="string"&&(IL=n.toLowerCase().replace(/_/g,"-"))}function An(n,e,t,r){let i=fe(),o=ze(),s=St();return W0(o,i,i[$e],s,n,e,r),An}function DL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[nu],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function W0(n,e,t,r,i,o,s){let a=kd(r),l=n.firstCreatePass&&E0(n),d=e[jt],f=I0(e),g=!0;if(r.type&3||s){let C=an(r,e),A=s?s(C):C,F=f.length,H=s?K=>s(Hn(K[r.index])):r.index,P=null;if(!s&&a&&(P=DL(n,e,i,r.index)),P!==null){let K=P.__ngLastListenerFn__||P;K.__ngNextListenerFn__=o,P.__ngLastListenerFn__=o,g=!1}else{o=CT(r,e,d,o,!1);let K=t.listen(A,i,o);f.push(o,K),l&&l.push(i,H,F,F+1)}}else o=CT(r,e,d,o,!1);let y=r.outputs,T;if(g&&y!==null&&(T=y[i])){let C=T.length;if(C)for(let A=0;A<C;A+=2){let F=T[A],H=T[A+1],te=e[F][H].subscribe(o),X=f.length;f.push(o,te),l&&l.push(i,r.index,X,-(X+1))}}}function DT(n,e,t,r){let i=_e(null);try{return Bn(6,e,t),t(r)!==!1}catch(o){return D0(n,o),!1}finally{Bn(7,e,t),_e(i)}}function CT(n,e,t,r,i){return function o(s){if(s===Function)return r;let a=n.componentOffset>-1?Yr(n.index,e):e;Oy(a);let u=DT(e,t,r,s),l=o.__ngNextListenerFn__;for(;l;)u=DT(e,t,l,s)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}function A8(n=1){return Ik(n)}function CL(n,e,t){return K0(n,"",e,"",t),CL}function K0(n,e,t,r,i){let o=fe(),s=L0(o,e,t,r);if(s!==bn){let a=ze(),u=Vd();Sy(a,u,o,n,s,o[$e],i,!1)}return K0}function Q0(n,e,t,r){vV(n,e,t,r)}function S8(n,e,t){yV(n,e,t)}function Y0(n){let e=fe(),t=ze(),r=vb();hy(r+1);let i=Vy(t,r);if(n.dirty&&nk(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=IV(e,r);n.reset(o,Bk),n.notifyOnChanges()}return!0}return!1}function Z0(){return mV(fe(),vb())}function TL(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function M8(n){let e=pk();return db(e,Jt+n)}function R8(n,e=""){let t=fe(),r=ze(),i=n+Jt,o=r.firstCreatePass?gu(r,i,1,e,null):r.data[i],s=bL(r,t,o,e,n);t[i]=s,Ld()&&zd(r,t,s,o),Zi(o,!1)}var bL=(n,e,t,r,i)=>(jd(!0),A1(e[$e],r));function AL(n){return J0("",n,""),AL}function J0(n,e,t){let r=fe(),i=L0(r,n,e,t);return i!==bn&&wF(r,Zr(),i),J0}function SL(n,e,t){k0(e)&&(e=e());let r=fe(),i=fu();if(In(r,i,e)){let o=ze(),s=Vd();Sy(o,s,r,n,e,r[$e],t,!1)}return SL}function x8(n,e){let t=k0(n);return t&&n.set(e),t}function ML(n,e){let t=fe(),r=ze(),i=St();return W0(r,t,t[$e],i,n,e),ML}function RL(n,e,t){let r=ze();if(r.firstCreatePass){let i=Wr(n);zm(t,r.data,r.blueprint,i,!0),zm(e,r.data,r.blueprint,i,!1)}}function zm(n,e,t,r,i){if(n=Vt(n),Array.isArray(n))for(let o=0;o<n.length;o++)zm(n[o],e,t,r,i);else{let o=ze(),s=fe(),a=St(),u=as(n)?n:Vt(n.provide),l=tb(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(as(n)||!n.multi){let y=new Gi(l,i,Y),T=zg(u,e,i?d:d+g,f);T===-1?(im(dd(a,s),o,u),Hg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[T]=y,s[T]=y)}else{let y=zg(u,e,d+g,f),T=zg(u,e,d,d+g),C=y>=0&&t[y],A=T>=0&&t[T];if(i&&!A||!i&&!C){im(dd(a,s),o,u);let F=PL(i?NL:xL,t.length,i,r,l);!i&&A&&(t[T].providerFactory=F),Hg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=X0(t[i?T:y],l,!i&&r);Hg(o,n,y>-1?y:T,F)}!i&&r&&A&&t[T].componentProviders++}}}function Hg(n,e,t,r){let i=as(e),o=jO(e);if(i||o){let u=(o?Vt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,u]):l[d+1].push(r,u)}else l.push(t,u)}}}function X0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function zg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function xL(n,e,t,r){return Gm(this.multi,[])}function NL(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Wi(t,t[se],this.providerFactory.index,r);o=a.slice(0,s),Gm(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Gm(i,o);return o}function Gm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function PL(n,e,t,r,i){let o=new Gi(n,t,Y);return o.multi=[],o.index=e,o.componentProviders=0,X0(o,i,r&&!t),o}function Wt(n,e=[]){return t=>{t.providersResolver=(r,i)=>RL(r,i?i(n):n,e)}}var OL=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=JT(!1,t.type),i=r.length>0?Jd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(V(bt))})}}return n})();function eA(n){mu("NgStandalone"),n.getStandaloneInjector=e=>e.get(OL).getOrCreateStandaloneInjector(n)}function N8(n,e,t){let r=Fd()+n,i=fe();return i[r]===bn?Xd(i,r,t?e.call(t):e()):LV(i,r)}function P8(n,e,t,r,i){return FL(fe(),Fd(),n,e,t,r,i)}function O8(n,e,t,r,i,o){return VL(fe(),Fd(),n,e,t,r,i,o)}function Uy(n,e){let t=n[e];return t===bn?void 0:t}function kL(n,e,t,r,i,o){let s=e+t;return In(n,s,i)?Xd(n,s+1,o?r.call(o,i):r(i)):Uy(n,s+1)}function FL(n,e,t,r,i,o,s){let a=e+t;return V0(n,a,i,o)?Xd(n,a+2,s?r.call(s,i,o):r(i,o)):Uy(n,a+2)}function VL(n,e,t,r,i,o,s,a){let u=e+t;return jV(n,u,i,o,s)?Xd(n,u+3,a?r.call(a,i,o,s):r(i,o,s)):Uy(n,u+3)}function k8(n,e){let t=ze(),r,i=n+Jt;t.firstCreatePass?(r=LL(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=$i(r.type,!0)),s,a=zt(Y);try{let u=ld(!1),l=o();return ld(u),TL(t,fe(),i,l),l}finally{zt(a)}}function LL(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function F8(n,e,t){let r=n+Jt,i=fe(),o=db(i,r);return jL(i,r)?kL(i,Fd(),e,o.transform,t,o):o.transform(t)}function jL(n,e){return n[se].data[e].pure}function V8(n,e){return Qd(n,e)}var Yl=null;function UL(n){Yl!==null&&(n.defaultEncapsulation!==Yl.defaultEncapsulation||n.preserveWhitespaces!==Yl.preserveWhitespaces)||(Yl=n)}var yr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},th=new yr("17.3.12"),nh=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var By=new U(""),yu=new U(""),rh=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,$y||(BL(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ue.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(V(ue),V(ih),V(yu))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),ih=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return $y?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function BL(n){$y=n}var $y;function Xi(n){return!!n&&typeof n.then=="function"}function tA(n){return!!n&&typeof n.subscribe=="function"}var oh=new U(""),nA=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=L(oh,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Xi(o))t.push(o);else if(tA(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sh=new U("");function $L(){vC(()=>{throw new W(600,!1)})}function qL(n){return n.isBoundToModule}function HL(n,e,t){try{let r=t();return Xi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function rA(n,e){return Array.isArray(e)?e.reduce(rA,n):q(q({},n),e)}var eo=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(Fb),this.afterRenderEffectManager=L(Fy),this.externalTestViews=new Set,this.beforeRender=new Ue,this.afterTick=new Ue,this.componentTypes=[],this.components=[],this.isStable=L(Ji).hasPendingTasks.pipe(J(t=>!t)),this._injector=L(bt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof yd;if(!this._injector.get(nA).done){let g=!i&&KT(t),y=!1;throw new W(405,y)}let s;i?s=t:s=this._injector.get(Yd).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=qL(s)?void 0:this._injector.get(Qr),u=r||s.selector,l=s.create(ct.NULL,[],u,a),d=l.location.nativeElement,f=l.injector.get(By,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),nd(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new W(101,!1);let r=_e(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,_e(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===T0)throw new W(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)zL(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Wm(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Wm(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;nd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(sh,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>nd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new W(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function nd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function zL(n,e,t){!e&&!Wm(n)||GL(n,t,e)}function Wm(n){return ly(n)}function GL(n,e,t){let r;t?(r=0,n[ne]|=1024):n[ne]&64?r=0:r=1,b0(n,e,r)}var Km=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},ah=(()=>{class n{compileModuleSync(t){return new Dd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=QT(t),o=r0(i.declarations).reduce((s,a)=>{let u=Gr(a);return u&&s.push(new ds(u)),s},[]);return new Km(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),WL=new U("");function KL(n,e,t){let r=new Dd(t);return Promise.resolve(r)}function TT(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var QL=(()=>{class n{constructor(){this.zone=L(ue),this.applicationRef=L(eo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function YL(n){return[{provide:ue,useFactory:n},{provide:ss,multi:!0,useFactory:()=>{let e=L(QL,{optional:!0});return()=>e.initialize()}},{provide:ss,multi:!0,useFactory:()=>{let e=L(XL);return()=>{e.initialize()}}},{provide:Fb,useFactory:ZL}]}function ZL(){let n=L(ue),e=L(zn);return t=>n.runOutsideAngular(()=>e.handleError(t))}function JL(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var XL=(()=>{class n{constructor(){this.subscription=new He,this.initialized=!1,this.zone=L(ue),this.pendingTasks=L(Ji)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ue.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ue.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ej(){return typeof $localize<"u"&&$localize.locale||bd}var qy=new U("",{providedIn:"root",factory:()=>L(qy,ge.Optional|ge.SkipSelf)||ej()});var iA=new U(""),oA=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=QF(r?.ngZone,JL({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{let o=kV(t.moduleType,this.injector,YL(()=>i)),s=o.injector.get(zn,null);return i.runOutsideAngular(()=>{let a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{nd(this._modules,o),a.unsubscribe()})}),HL(s,i,()=>{let a=o.injector.get(nA);return a.runInitializers(),a.donePromise.then(()=>{let u=o.injector.get(qy,bd);return EL(u||bd),this._moduleDoBootstrap(o),o})})})}bootstrapModule(t,r=[]){let i=rA({},r);return KL(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){let r=t.injector.get(eo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(r);else throw new W(-403,!1);this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new W(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(iA,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(V(ct))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Za=null,sA=new U("");function tj(n){if(Za&&!Za.get(sA,!1))throw new W(400,!1);$L(),Za=n;let e=n.get(oA);return ij(n),e}function Hy(n,e,t=[]){let r=`Platform: ${e}`,i=new U(r);return(o=[])=>{let s=aA();if(!s||s.injector.get(sA,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):tj(nj(a,r))}return rj(i)}}function nj(n=[],e){return ct.create({name:e,providers:[{provide:Nd,useValue:"platform"},{provide:iA,useValue:new Set([()=>Za=null])},...n]})}function rj(n){let e=aA();if(!e)throw new W(401,!1);return e}function aA(){return Za?.get(oA)??null}function ij(n){n.get(vy,null)?.forEach(t=>t())}function zy(){return!1}var ei=(()=>{class n{static{this.__NG_ELEMENT_ID__=oj}}return n})();function oj(n){return sj(St(),fe(),(n&16)===16)}function sj(n,e,t){if(Od(n)&&!t){let r=Yr(n.index,e);return new Ki(r,r)}else if(n.type&47){let r=e[wn];return new Ki(r,e)}return null}var Qm=class{constructor(){}supports(e){return F0(e)}create(e){return new Ym(e)}},aj=(n,e)=>e,Ym=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||aj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<bT(r,i,o)?t:r,a=bT(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=u-i;if(l!=d){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,T=y+g;d<=T&&T<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=d-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!F0(e))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,FV(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Zm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ad),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ad),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Zm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Jm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Ad=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Jm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function bT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function AT(){return new Gy([new Qm])}var Gy=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:AT})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||AT()),deps:[[n,new ey,new ut]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new W(901,!1)}}return n})();var uA=Hy(null,"core",[]),cA=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(V(eo))}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({})}}return n})();function ti(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function lA(n){let e=Gr(n);if(!e)return null;let t=new ds(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var mA=null;function Kn(){return mA}function yA(n){mA??=n}var uh=class{};var mt=new U(""),Jy=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>L(uj),providedIn:"platform"})}}return n})(),vA=new U(""),uj=(()=>{class n extends Jy{constructor(){super(),this._doc=L(mt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kn().getBaseHref(this._doc)}onPopState(t){let r=Kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Xy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function dA(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Er(n){return n&&n[0]!=="?"?"?"+n:n}var Dr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>L(ev),providedIn:"root"})}}return n})(),_A=new U(""),ev=(()=>{class n extends Dr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(mt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Xy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Er(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Er(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Er(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(V(Jy),V(_A,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wA=(()=>{class n extends Dr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Xy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Er(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Er(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(V(Jy),V(_A,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),ys=(()=>{class n{constructor(t){this._subject=new Fe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=dj(dA(hA(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Er(r))}normalize(t){return n.stripTrailingSlash(lj(this._basePath,hA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Er(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Er(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Er}static{this.joinWithSlash=Xy}static{this.stripTrailingSlash=dA}static{this.\u0275fac=function(r){return new(r||n)(V(Dr))}}static{this.\u0275prov=G({token:n,factory:()=>cj(),providedIn:"root"})}}return n})();function cj(){return new ys(V(Dr))}function lj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function hA(n){return n.replace(/\/index.html$/,"")}function dj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function ch(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Wy=/\s+/,fA=[],uK=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=fA,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Wy):fA}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Wy):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Wy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Y(Mt),Y(cn))}}static{this.\u0275dir=Ee({type:n,selectors:[["","ngClass",""]],inputs:{klass:[Be.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Ky=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},cK=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ky(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),pA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);pA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Y(Xr),Y(Qi),Y(Gy))}}static{this.\u0275dir=Ee({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function pA(n,e){n.context.$implicit=e.item}var lK=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Qy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gA("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gA("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Y(Xr),Y(Qi))}}static{this.\u0275dir=Ee({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Qy=class{constructor(){this.$implicit=null,this.ngIf=null}};function gA(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Lt(e)}'.`)}function hj(n,e){return new W(2100,!1)}var fj=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,dK=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw hj(n,t);return t.replace(fj,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=zT({name:"titlecase",type:n,pure:!0,standalone:!0})}}return n})();var IA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({})}}return n})(),tv="browser",pj="server";function gj(n){return n===tv}function ni(n){return n===pj}var EA=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>gj(L(lt))?new Yy(L(mt),window):new Zy})}}return n})(),Yy=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=mj(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function mj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Zy=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ms=class{};var _u=class{},dh=class{},to=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var rv=class{encodeKey(e){return CA(e)}encodeValue(e){return CA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function _j(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var wj=/%(\d[a-f0-9])/gi,Ij={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function CA(n){return encodeURIComponent(n).replace(wj,(e,t)=>Ij[t]??e)}function lh(n){return`${n}`}var ri=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new rv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=_j(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(lh):[lh(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(lh(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(lh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var iv=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Ej(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function TA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function bA(n){return typeof Blob<"u"&&n instanceof Blob}function AA(n){return typeof FormData<"u"&&n instanceof FormData}function Dj(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var vu=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(Ej(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new to,this.context??=new iv,!this.params)this.params=new ri,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||TA(this.body)||bA(this.body)||AA(this.body)||Dj(this.body)?this.body:this.body instanceof ri?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||AA(this.body)?null:bA(this.body)?this.body.type||null:TA(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ri?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,y)=>g.set(y,e.setHeaders[y]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,y)=>g.set(y,e.setParams[y]),d)),new n(t,r,s,{params:d,headers:l,context:f,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},vs=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(vs||{}),wu=class{constructor(e,t=ph.Ok,r="OK"){this.headers=e.headers||new to,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},ov=class n extends wu{constructor(e={}){super(e),this.type=vs.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},hh=class n extends wu{constructor(e={}){super(e),this.type=vs.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},fh=class extends wu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},ph=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(ph||{});function nv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Cj=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof vu)o=t;else{let u;i.headers instanceof to?u=i.headers:u=new to(i.headers);let l;i.params&&(i.params instanceof ri?l=i.params:l=new ri({fromObject:i.params})),o=new vu(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=Z(o).pipe(fr(u=>this.handler.handle(u)));if(t instanceof vu||i.observe==="events")return s;let a=s.pipe(Ze(u=>u instanceof hh));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(J(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(J(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new ri().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,nv(i,r))}post(t,r,i={}){return this.request("POST",t,nv(i,r))}put(t,r,i={}){return this.request("PUT",t,nv(i,r))}static{this.\u0275fac=function(r){return new(r||n)(V(_u))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function xA(n,e){return e(n)}function Tj(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function bj(n,e,t){return(r,i)=>En(t,()=>e(r,o=>n(o,i)))}var Aj=new U(""),sv=new U(""),Sj=new U(""),Mj=new U("");function Rj(){let n=null;return(e,t)=>{n===null&&(n=(L(Aj,{optional:!0})??[]).reduceRight(Tj,xA));let r=L(Ji),i=r.add();return n(e,t).pipe(Br(()=>r.remove(i)))}}var SA=(()=>{class n extends _u{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=L(Ji);let i=L(Mj,{optional:!0});this.backend=i??t}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(sv),...this.injector.get(Sj,[])]));this.chain=i.reduceRight((o,s)=>bj(o,s,this.injector),xA)}let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Br(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(V(dh),V(bt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();var xj=/^\)\]\}',?\n/;function Nj(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var MA=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new W(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?pe(r.\u0275loadImpl()):Z(null)).pipe(Pe(()=>new ie(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((C,A)=>s.setRequestHeader(C,A.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let C=t.detectContentTypeHeader();C!==null&&s.setRequestHeader("Content-Type",C)}if(t.responseType){let C=t.responseType.toLowerCase();s.responseType=C!=="json"?C:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let C=s.statusText||"OK",A=new to(s.getAllResponseHeaders()),F=Nj(s)||t.url;return u=new ov({headers:A,status:s.status,statusText:C,url:F}),u},d=()=>{let{headers:C,status:A,statusText:F,url:H}=l(),P=null;A!==ph.NoContent&&(P=typeof s.response>"u"?s.responseText:s.response),A===0&&(A=P?ph.Ok:0);let K=A>=200&&A<300;if(t.responseType==="json"&&typeof P=="string"){let te=P;P=P.replace(xj,"");try{P=P!==""?JSON.parse(P):null}catch(X){P=te,K&&(K=!1,P={error:X,text:P})}}K?(o.next(new hh({body:P,headers:C,status:A,statusText:F,url:H||void 0})),o.complete()):o.error(new fh({error:P,headers:C,status:A,statusText:F,url:H||void 0}))},f=C=>{let{url:A}=l(),F=new fh({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:A||void 0});o.error(F)},g=!1,y=C=>{g||(o.next(l()),g=!0);let A={type:vs.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(A.total=C.total),t.responseType==="text"&&s.responseText&&(A.partialText=s.responseText),o.next(A)},T=C=>{let A={type:vs.UploadProgress,loaded:C.loaded};C.lengthComputable&&(A.total=C.total),o.next(A)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",T)),s.send(a),o.next({type:vs.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",T)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(V(ms))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),NA=new U(""),Pj="XSRF-TOKEN",Oj=new U("",{providedIn:"root",factory:()=>Pj}),kj="X-XSRF-TOKEN",Fj=new U("",{providedIn:"root",factory:()=>kj}),gh=class{},Vj=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ch(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(V(mt),V(lt),V(Oj))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function Lj(n,e){let t=n.url.toLowerCase();if(!L(NA)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=L(gh).getToken(),i=L(Fj);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var PA=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(PA||{});function jj(n,e){return{\u0275kind:n,\u0275providers:e}}function Uj(...n){let e=[Cj,MA,SA,{provide:_u,useExisting:SA},{provide:dh,useExisting:MA},{provide:sv,useValue:Lj,multi:!0},{provide:NA,useValue:!0},{provide:gh,useClass:Vj}];for(let t of n)e.push(...t.\u0275providers);return Gn(e)}var RA=new U("");function Bj(){return jj(PA.LegacyInterceptors,[{provide:RA,useFactory:Rj},{provide:sv,useExisting:RA,multi:!0}])}var CK=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({providers:[Uj(Bj())]})}}return n})();var cv=class extends uh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},lv=class n extends cv{static makeCurrent(){yA(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=$j();return t==null?null:qj(t)}resetBaseElement(){Iu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ch(document.cookie,e)}},Iu=null;function $j(){return Iu=Iu||document.querySelector("base"),Iu?Iu.getAttribute("href"):null}function qj(n){return new URL(n,document.baseURI).pathname}var dv=class{addToWindow(e){pt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new W(5103,!1);return o},pt.getAllAngularTestabilities=()=>e.getAllTestabilities(),pt.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=pt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};pt.frameworkStabilizers||(pt.frameworkStabilizers=[]),pt.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Kn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},Hj=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),hv=new U(""),VA=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(V(hv),V(ue))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),mh=class{constructor(e){this._doc=e}},av="ng-app-id",LA=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ni(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${av}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(av),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(av,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(V(mt),V(Bd),V(_y,8),V(lt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),uv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pv=/%COMP%/g,jA="%COMP%",zj=`_nghost-${jA}`,Gj=`_ngcontent-${jA}`,Wj=!0,Kj=new U("",{providedIn:"root",factory:()=>Wj});function Qj(n){return Gj.replace(pv,n)}function Yj(n){return zj.replace(pv,n)}function UA(n,e){return e.map(t=>t.replace(pv,n))}var OA=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ni(a),this.defaultRenderer=new Eu(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===qn.ShadowDom&&(r=De(q({},r),{encapsulation:qn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof yh?i.applyToHost(t):i instanceof Du&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case qn.Emulated:o=new yh(u,l,r,this.appId,d,s,a,f);break;case qn.ShadowDom:return new fv(u,l,t,r,s,a,this.nonce,f);default:o=new Du(u,l,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(V(VA),V(LA),V(Bd),V(Kj),V(mt),V(lt),V(ue),V(_y))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Eu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(uv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(kA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(kA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=uv[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=uv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(mr.DashCase|mr.Important)?e.style.setProperty(t,r,i&mr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&mr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Kn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function kA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var fv=class extends Eu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=UA(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Du=class extends Eu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?UA(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},yh=class extends Du{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=Qj(l),this.hostAttr=Yj(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Zj=(()=>{class n extends mh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(V(mt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),FA=["alt","control","meta","shift"],Jj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},e2=(()=>{class n extends mh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kn().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),FA.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=Jj[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),FA.forEach(s=>{if(s!==i){let a=Xj[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(V(mt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function t2(){lv.makeCurrent()}function n2(){return new zn}function r2(){return $b(document),document}var i2=[{provide:lt,useValue:tv},{provide:vy,useValue:t2,multi:!0},{provide:mt,useFactory:r2,deps:[]}],VK=Hy(uA,"browser",i2),o2=new U(""),s2=[{provide:yu,useClass:dv,deps:[]},{provide:By,useClass:rh,deps:[ue,ih,yu]},{provide:rh,useClass:rh,deps:[ue,ih,yu]}],a2=[{provide:Nd,useValue:"root"},{provide:zn,useFactory:n2,deps:[]},{provide:hv,useClass:Zj,multi:!0,deps:[mt,ue,lt]},{provide:hv,useClass:e2,multi:!0,deps:[mt]},OA,LA,VA,{provide:au,useExisting:OA},{provide:ms,useClass:Hj,deps:[]},[]],LK=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Bd,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(V(o2,12))}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({providers:[...a2,...s2],imports:[IA,cA]})}}return n})();var BA=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(V(mt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var u2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=V(c2),i},providedIn:"root"})}}return n})(),c2=(()=>{class n extends u2{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Wn.NONE:return r;case Wn.HTML:return Jr(r,"HTML")?Tn(r):e0(this._doc,String(r)).toString();case Wn.STYLE:return Jr(r,"Style")?Tn(r):r;case Wn.SCRIPT:if(Jr(r,"Script"))return Tn(r);throw new W(5200,!1);case Wn.URL:return Jr(r,"URL")?Tn(r):qd(String(r));case Wn.RESOURCE_URL:if(Jr(r,"ResourceURL"))return Tn(r);throw new W(5201,!1);default:throw new W(5202,!1)}}bypassSecurityTrustHtml(t){return Hb(t)}bypassSecurityTrustStyle(t){return zb(t)}bypassSecurityTrustScript(t){return Gb(t)}bypassSecurityTrustUrl(t){return Wb(t)}bypassSecurityTrustResourceUrl(t){return Kb(t)}static{this.\u0275fac=function(r){return new(r||n)(V(mt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var le="primary",Lu=Symbol("RouteTitle"),_v=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ds(n){return new _v(n)}function d2(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function h2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qn(n[t],e[t]))return!1;return!0}function Qn(n,e){let t=n?wv(n):void 0,r=e?wv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!ZA(n[i],e[i]))return!1;return!0}function wv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ZA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function JA(n){return n.length>0?n[n.length-1]:null}function ai(n){return Tg(n)?n:Xi(n)?pe(Promise.resolve(n)):Z(n)}var f2={exact:eS,subset:tS},XA={exact:p2,subset:g2,ignored:()=>!0};function $A(n,e,t){return f2[t.paths](n.root,e.root,t.matrixParams)&&XA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function p2(n,e){return Qn(n,e)}function eS(n,e,t){if(!ro(n.segments,e.segments)||!wh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!eS(n.children[r],e.children[r],t))return!1;return!0}function g2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ZA(n[t],e[t]))}function tS(n,e,t){return nS(n,e,e.segments,t)}function nS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ro(i,t)||e.hasChildren()||!wh(i,t,r))}else if(n.segments.length===t.length){if(!ro(n.segments,t)||!wh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!tS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ro(n.segments,i)||!wh(n.segments,i,r)||!n.children[le]?!1:nS(n.children[le],e,o,r)}}function wh(n,e,t){return e.every((r,i)=>XA[t](n[i].parameters,r.parameters))}var ii=class{constructor(e=new Ce([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ds(this.queryParams),this._queryParamMap}toString(){return v2.serialize(this)}},Ce=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ih(this)}},no=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ds(this.parameters),this._parameterMap}toString(){return iS(this)}};function m2(n,e){return ro(n,e)&&n.every((t,r)=>Qn(t.parameters,e[r].parameters))}function ro(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function y2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===le&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==le&&(t=t.concat(e(i,r)))}),t}var ju=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new Ru,providedIn:"root"})}}return n})(),Ru=class{parse(e){let t=new Ev(e);return new ii(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Cu(e.root,!0)}`,r=I2(e.queryParams),i=typeof e.fragment=="string"?`#${_2(e.fragment)}`:"";return`${t}${r}${i}`}},v2=new Ru;function Ih(n){return n.segments.map(e=>iS(e)).join("/")}function Cu(n,e){if(!n.hasChildren())return Ih(n);if(e){let t=n.children[le]?Cu(n.children[le],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==le&&r.push(`${i}:${Cu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=y2(n,(r,i)=>i===le?[Cu(n.children[le],!1)]:[`${i}:${Cu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[le]!=null?`${Ih(n)}/${t[0]}`:`${Ih(n)}/(${t.join("//")})`}}function rS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vh(n){return rS(n).replace(/%3B/gi,";")}function _2(n){return encodeURI(n)}function Iv(n){return rS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Eh(n){return decodeURIComponent(n)}function qA(n){return Eh(n.replace(/\+/g,"%20"))}function iS(n){return`${Iv(n.path)}${w2(n.parameters)}`}function w2(n){return Object.entries(n).map(([e,t])=>`;${Iv(e)}=${Iv(t)}`).join("")}function I2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${vh(t)}=${vh(i)}`).join("&"):`${vh(t)}=${vh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var E2=/^[^\/()?;#]+/;function gv(n){let e=n.match(E2);return e?e[0]:""}var D2=/^[^\/()?;=#]+/;function C2(n){let e=n.match(D2);return e?e[0]:""}var T2=/^[^=?&#]+/;function b2(n){let e=n.match(T2);return e?e[0]:""}var A2=/^[^&#]+/;function S2(n){let e=n.match(A2);return e?e[0]:""}var Ev=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[le]=new Ce(e,t)),r}parseSegment(){let e=gv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new no(Eh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=C2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=gv(this.remaining);i&&(r=i,this.capture(r))}e[Eh(t)]=Eh(r)}parseQueryParam(e){let t=b2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=S2(this.remaining);s&&(r=s,this.capture(r))}let i=qA(t),o=qA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=gv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new W(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[le]:new Ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function oS(n){return n.segments.length>0?new Ce([],{[le]:n}):n}function sS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=sS(i);if(r===le&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ce(n.segments,e);return M2(t)}function M2(n){if(n.numberOfChildren===1&&n.children[le]){let e=n.children[le];return new Ce(n.segments.concat(e.segments),e.children)}return n}function Cs(n){return n instanceof ii}function R2(n,e,t=null,r=null){let i=aS(n);return uS(i,e,t,r)}function aS(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ce(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=oS(r);return e??i}function uS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return mv(i,i,i,t,r);let o=x2(e);if(o.toRoot())return mv(i,i,new Ce([],{}),t,r);let s=N2(o,i,n),a=s.processChildren?Au(s.segmentGroup,s.index,o.commands):lS(s.segmentGroup,s.index,o.commands);return mv(i,s.segmentGroup,a,t,r)}function Dh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function xu(n){return typeof n=="object"&&n!=null&&n.outlets}function mv(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=cS(n,e,t);let a=oS(sS(s));return new ii(a,o,i)}function cS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=cS(o,e,t)}),new Ce(n.segments,r)}var Ch=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dh(r[0]))throw new W(4003,!1);let i=r.find(xu);if(i&&i!==JA(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function x2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ch(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ch(t,e,r)}var Is=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function N2(n,e,t){if(n.isAbsolute)return new Is(e,!0,0);if(!t)return new Is(e,!1,NaN);if(t.parent===null)return new Is(t,!0,0);let r=Dh(n.commands[0])?0:1,i=t.segments.length-1+r;return P2(t,i,n.numberOfDoubleDots)}function P2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new Is(r,!1,i-o)}function O2(n){return xu(n[0])?n[0].outlets:{[le]:n}}function lS(n,e,t){if(n??=new Ce([],{}),n.segments.length===0&&n.hasChildren())return Au(n,e,t);let r=k2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ce(n.segments.slice(0,r.pathIndex),{});return o.children[le]=new Ce(n.segments.slice(r.pathIndex),n.children),Au(o,0,i)}else return r.match&&i.length===0?new Ce(n.segments,{}):r.match&&!n.hasChildren()?Dv(n,e,t):r.match?Au(n,0,i):Dv(n,e,t)}function Au(n,e,t){if(t.length===0)return new Ce(n.segments,{});{let r=O2(t),i={};if(Object.keys(r).some(o=>o!==le)&&n.children[le]&&n.numberOfChildren===1&&n.children[le].segments.length===0){let o=Au(n.children[le],e,t);return new Ce(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=lS(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ce(n.segments,i)}}function k2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(xu(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!zA(u,l,s))return o;r+=2}else{if(!zA(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Dv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(xu(o)){let u=F2(o.outlets);return new Ce(r,u)}if(i===0&&Dh(t[0])){let u=n.segments[e];r.push(new no(u.path,HA(t[0]))),i++;continue}let s=xu(o)?o.outlets[le]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Dh(a)?(r.push(new no(s,HA(a))),i+=2):(r.push(new no(s,{})),i++)}return new Ce(r,{})}function F2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Dv(new Ce([],{}),0,r))}),e}function HA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function zA(n,e,t){return n==t.path&&Qn(e,t.parameters)}var Su="imperative",dt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(dt||{}),ln=class{constructor(e,t){this.id=e,this.url=t}},Ts=class extends ln{constructor(e,t,r="imperative",i=null){super(e,t),this.type=dt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Sn=class extends ln{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=dt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},en=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(en||{}),Th=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Th||{}),oi=class extends ln{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=dt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},si=class extends ln{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=dt.NavigationSkipped}},Nu=class extends ln{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=dt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bh=class extends ln{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cv=class extends ln{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tv=class extends ln{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=dt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},bv=class extends ln{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Av=class extends ln{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sv=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mv=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Rv=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xv=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nv=class{constructor(e){this.snapshot=e,this.type=dt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pv=class{constructor(e){this.snapshot=e,this.type=dt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ah=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=dt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Pu=class{},Ou=class{constructor(e){this.url=e}};var Ov=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Uu,this.attachRef=null}},Uu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ov,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Sh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=kv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=kv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Fv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Fv(e,this._root).map(t=>t.value)}};function kv(n,e){if(n===e.value)return e;for(let t of e.children){let r=kv(n,t);if(r)return r}return null}function Fv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Fv(n,t);if(r.length)return r.unshift(e),r}return[]}var Xt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ws(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Mh=class extends Sh{constructor(e,t){super(e),this.snapshot=t,Gv(this,e)}toString(){return this.snapshot.toString()}};function dS(n){let e=V2(n),t=new ft([new no("",{})]),r=new ft({}),i=new ft({}),o=new ft({}),s=new ft(""),a=new io(t,r,o,s,i,le,n,e.root);return a.snapshot=e.root,new Mh(new Xt(a,[]),e)}function V2(n){let e={},t={},r={},i="",o=new ku([],e,r,i,t,le,n,null,{});return new Rh("",new Xt(o,[]))}var io=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(J(l=>l[Lu]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>Ds(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>Ds(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function zv(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:q(q({},e.params),n.params),data:q(q({},e.data),n.data),resolve:q(q(q(q({},n.data),e.data),i?.data),n._resolvedData)}:r={params:q({},n.params),data:q({},n.data),resolve:q(q({},n.data),n._resolvedData??{})},i&&fS(i)&&(r.resolve[Lu]=i.title),r}var ku=class{get title(){return this.data?.[Lu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ds(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ds(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Rh=class extends Sh{constructor(e,t){super(t),this.url=e,Gv(this,t)}toString(){return hS(this._root)}};function Gv(n,e){e.value._routerState=n,e.children.forEach(t=>Gv(n,t))}function hS(n){let e=n.children.length>0?` { ${n.children.map(hS).join(", ")} } `:"";return`${n.value}${e}`}function yv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Qn(e.params,t.params)||n.paramsSubject.next(t.params),h2(e.url,t.url)||n.urlSubject.next(t.url),Qn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Vv(n,e){let t=Qn(n.params,e.params)&&m2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Vv(n.parent,e.parent))}function fS(n){return typeof n.title=="string"||n.title===null}var L2=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new Fe,this.deactivateEvents=new Fe,this.attachEvents=new Fe,this.detachEvents=new Fe,this.parentContexts=L(Uu),this.location=L(Xr),this.changeDetector=L(ei),this.environmentInjector=L(bt),this.inputBinder=L(kh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Lv(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ee({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Cn]})}}return n})(),Lv=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===io?this.route:e===Uu?this.childContexts:this.parent.get(e,t)}},kh=new U(""),GA=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Qa([r.queryParams,r.params,r.data]).pipe(Pe(([o,s,a],u)=>(a=q(q(q({},o),s),a),u===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=lA(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function j2(n,e,t){let r=Fu(n,e._root,t?t._root:void 0);return new Mh(r,e)}function Fu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=U2(n,e,t);return new Xt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Fu(n,a)),s}}let r=B2(e.value),i=e.children.map(o=>Fu(n,o));return new Xt(r,i)}}function U2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Fu(n,r,i);return Fu(n,r)})}function B2(n){return new io(new ft(n.url),new ft(n.params),new ft(n.queryParams),new ft(n.fragment),new ft(n.data),n.outlet,n.component,n)}var pS="ngNavigationCancelingError";function gS(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Cs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mS(!1,en.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function mS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[pS]=!0,t.cancellationCode=e,t}function $2(n){return yS(n)&&Cs(n.url)}function yS(n){return!!n&&n[pS]}var q2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=HT({type:n,selectors:[["ng-component"]],standalone:!0,features:[eA],decls:1,vars:0,template:function(r,i){r&1&&jy(0,"router-outlet")},dependencies:[L2],encapsulation:2})}}return n})();function H2(n,e){return n.providers&&!n._injector&&(n._injector=Jd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Wv(n){let e=n.children&&n.children.map(Wv),t=e?De(q({},n),{children:e}):q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==le&&(t.component=q2),t}function Yn(n){return n.outlet||le}function z2(n,e){let t=n.filter(r=>Yn(r)===e);return t.push(...n.filter(r=>Yn(r)!==e)),t}function Bu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var G2=(n,e,t,r)=>J(i=>(new jv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),jv=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),yv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ws(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ws(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ws(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ws(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Pv(o.value.snapshot))}),e.children.length&&this.forwardEvent(new xv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(yv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),yv(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Bu(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},xh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Es=class{constructor(e,t){this.component=e,this.route=t}};function W2(n,e,t){let r=n._root,i=e?e._root:null;return Tu(r,i,t,[r.value])}function K2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function As(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!xT(n)?n:e.get(n):r}function Tu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ws(e);return n.children.forEach(s=>{Q2(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Mu(a,t.getContext(s),i)),i}function Q2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=Y2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new xh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Tu(n,e,a?a.children:null,r,i):Tu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Es(a.outlet.component,s))}else s&&Mu(e,a,i),i.canActivateChecks.push(new xh(r)),o.component?Tu(n,null,a?a.children:null,r,i):Tu(n,null,t,r,i);return i}function Y2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ro(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ro(n.url,e.url)||!Qn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vv(n,e)||!Qn(n.queryParams,e.queryParams);case"paramsChange":default:return!Vv(n,e)}}function Mu(n,e,t){let r=ws(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Mu(s,e.children.getContext(o),t):Mu(s,null,t):Mu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Es(e.outlet.component,i)):t.canDeactivateChecks.push(new Es(null,i)):t.canDeactivateChecks.push(new Es(null,i))}function $u(n){return typeof n=="function"}function Z2(n){return typeof n=="boolean"}function J2(n){return n&&$u(n.canLoad)}function X2(n){return n&&$u(n.canActivate)}function eU(n){return n&&$u(n.canActivateChild)}function tU(n){return n&&$u(n.canDeactivate)}function nU(n){return n&&$u(n.canMatch)}function vS(n){return n instanceof hr||n?.name==="EmptyError"}var _h=Symbol("INITIAL_VALUE");function bs(){return Pe(n=>Qa(n.map(e=>e.pipe(Un(1),qr(_h)))).pipe(J(e=>{for(let t of e)if(t!==!0){if(t===_h)return _h;if(t===!1||t instanceof ii)return t}return!0}),Ze(e=>e!==_h),Un(1)))}function rU(n,e){return Ye(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(De(q({},t),{guardsResult:!0})):iU(s,r,i,n).pipe(Ye(a=>a&&Z2(a)?oU(r,o,n,e):Z(a)),J(a=>De(q({},t),{guardsResult:a})))})}function iU(n,e,t,r){return pe(n).pipe(Ye(i=>lU(i.component,i.route,t,e,r)),sn(i=>i!==!0,!0))}function oU(n,e,t,r){return pe(e).pipe(fr(i=>Yo(aU(i.route.parent,r),sU(i.route,r),cU(n,i.path,t),uU(n,i.route,t))),sn(i=>i!==!0,!0))}function sU(n,e){return n!==null&&e&&e(new Nv(n)),Z(!0)}function aU(n,e){return n!==null&&e&&e(new Rv(n)),Z(!0)}function uU(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Ll(()=>{let s=Bu(e)??t,a=As(o,s),u=X2(a)?a.canActivate(e,n):En(s,()=>a(e,n));return ai(u).pipe(sn())}));return Z(i).pipe(bs())}function cU(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>K2(s)).filter(s=>s!==null).map(s=>Ll(()=>{let a=s.guards.map(u=>{let l=Bu(s.node)??t,d=As(u,l),f=eU(d)?d.canActivateChild(r,n):En(l,()=>d(r,n));return ai(f).pipe(sn())});return Z(a).pipe(bs())}));return Z(o).pipe(bs())}function lU(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=Bu(e)??i,l=As(a,u),d=tU(l)?l.canDeactivate(n,e,t,r):En(u,()=>l(n,e,t,r));return ai(d).pipe(sn())});return Z(s).pipe(bs())}function dU(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=As(s,n),u=J2(a)?a.canLoad(e,t):En(n,()=>a(e,t));return ai(u)});return Z(o).pipe(bs(),_S(r))}function _S(n){return vl(Je(e=>{if(Cs(e))throw gS(n,e)}),J(e=>e===!0))}function hU(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=As(s,n),u=nU(a)?a.canMatch(e,t):En(n,()=>a(e,t));return ai(u)});return Z(o).pipe(bs(),_S(r))}var Vu=class{constructor(e){this.segmentGroup=e||null}},Nh=class extends Error{constructor(e){super(),this.urlTree=e}};function _s(n){return Qo(new Vu(n))}function fU(n){return Qo(new W(4e3,!1))}function pU(n){return Qo(mS(!1,en.GuardRejected))}var Uv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[le])return fU(e.redirectTo);i=i.children[le]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new Nh(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ii(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ce(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Bv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gU(n,e,t,r,i){let o=Kv(n,e,t);return o.matched?(r=H2(e,r),hU(r,e,t,i).pipe(J(s=>s===!0?o:q({},Bv)))):Z(o)}function Kv(n,e,t){if(e.path==="**")return mU(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?q({},Bv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||d2)(t,n,e);if(!i)return q({},Bv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?q(q({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function mU(n){return{matched:!0,parameters:n.length>0?JA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function WA(n,e,t,r){return t.length>0&&_U(n,t,r)?{segmentGroup:new Ce(e,vU(r,new Ce(t,n.children))),slicedSegments:[]}:t.length===0&&wU(n,t,r)?{segmentGroup:new Ce(n.segments,yU(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ce(n.segments,n.children),slicedSegments:t}}function yU(n,e,t,r){let i={};for(let o of t)if(Fh(n,e,o)&&!r[Yn(o)]){let s=new Ce([],{});i[Yn(o)]=s}return q(q({},r),i)}function vU(n,e){let t={};t[le]=e;for(let r of n)if(r.path===""&&Yn(r)!==le){let i=new Ce([],{});t[Yn(r)]=i}return t}function _U(n,e,t){return t.some(r=>Fh(n,e,r)&&Yn(r)!==le)}function wU(n,e,t){return t.some(r=>Fh(n,e,r))}function Fh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function IU(n,e,t,r){return Yn(n)!==r&&(r===le||!Fh(e,t,n))?!1:Kv(e,n,t).matched}function EU(n,e,t){return e.length===0&&!n.children[t]}var $v=class{};function DU(n,e,t,r,i,o,s="emptyOnly"){return new qv(n,e,t,r,i,s,o).recognize()}var CU=31,qv=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Uv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}recognize(){let e=WA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(t=>{let r=new ku([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,{},le,this.rootComponentType,null,{}),i=new Xt(r,t),o=new Rh("",i),s=R2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,le).pipe(jr(r=>{if(r instanceof Nh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Vu?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=zv(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(J(o=>o instanceof Xt?[o]:[]))}processChildren(e,t,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return pe(i).pipe(fr(o=>{let s=r.children[o],a=z2(t,o);return this.processSegmentGroup(e,a,s,o)}),$r((o,s)=>(o.push(...s),o)),Ur(null),Mg(),Ye(o=>{if(o===null)return _s(r);let s=wS(o);return TU(s),Z(s)}))}processSegment(e,t,r,i,o,s){return pe(t).pipe(fr(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,o,s).pipe(jr(u=>{if(u instanceof Vu)return Z(null);throw u}))),sn(a=>!!a),jr(a=>{if(vS(a))return EU(r,i,o)?Z(new $v):_s(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,o,s,a){return IU(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s):_s(i):_s(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:d}=Kv(t,i,o);if(!a)return _s(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>CU&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(Ye(g=>this.processSegment(e,r,t,g.concat(d),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){let s=gU(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),s.pipe(Pe(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Pe(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:g}=a,y=new ku(d,g,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,AU(r),Yn(r),r.component??r._loadedComponent??null,r,SU(r)),{segmentGroup:T,slicedSegments:C}=WA(t,d,f,u);if(C.length===0&&T.hasChildren())return this.processChildren(l,u,T).pipe(J(F=>F===null?null:new Xt(y,F)));if(u.length===0&&C.length===0)return Z(new Xt(y,[]));let A=Yn(r)===o;return this.processSegment(l,u,T,C,A?le:o,!0).pipe(J(F=>new Xt(y,F instanceof Xt?[F]:[])))}))):_s(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):dU(e,t,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,t).pipe(Je(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):pU(t))):Z({routes:[],injector:e})}};function TU(n){n.sort((e,t)=>e.value.outlet===le?-1:t.value.outlet===le?1:e.value.outlet.localeCompare(t.value.outlet))}function bU(n){let e=n.value.routeConfig;return e&&e.path===""}function wS(n){let e=[],t=new Set;for(let r of n){if(!bU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=wS(r.children);e.push(new Xt(r.value,i))}return e.filter(r=>!t.has(r))}function AU(n){return n.data||{}}function SU(n){return n.resolve||{}}function MU(n,e,t,r,i,o){return Ye(s=>DU(n,e,t,r,s.extractedUrl,i,o).pipe(J(({state:a,tree:u})=>De(q({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function RU(n,e){return Ye(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of IS(u))s.add(l);let a=0;return pe(s).pipe(fr(u=>o.has(u)?xU(u,r,n,e):(u.data=zv(u,u.parent,n).resolve,Z(void 0))),Je(()=>a++),Zo(1),Ye(u=>a===s.size?Z(t):Ft))})}function IS(n){let e=n.children.map(t=>IS(t)).flat();return[n,...e]}function xU(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!fS(i)&&(o[Lu]=i.title),NU(o,n,e,r).pipe(J(s=>(n._resolvedData=s,n.data=zv(n,n.parent,t).resolve,null)))}function NU(n,e,t,r){let i=wv(n);if(i.length===0)return Z({});let o={};return pe(i).pipe(Ye(s=>PU(n[s],e,t,r).pipe(sn(),Je(a=>{o[s]=a}))),Zo(1),Sg(o),jr(s=>vS(s)?Ft:Qo(s)))}function PU(n,e,t,r){let i=Bu(e)??r,o=As(n,i),s=o.resolve?o.resolve(e,t):En(i,()=>o(e,t));return ai(s)}function vv(n){return Pe(e=>{let t=n(e);return t?pe(t).pipe(J(()=>e)):Z(e)})}var ES=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(t){return t.data[Lu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>L(OU),providedIn:"root"})}}return n})(),OU=(()=>{class n extends ES{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(V(BA))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qu=new U("",{providedIn:"root",factory:()=>({})}),Ph=new U(""),Qv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(ah)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ai(t.loadComponent()).pipe(J(DS),Je(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Br(()=>{this.componentLoaders.delete(t)})),i=new zo(r,()=>new Ue).pipe(Ho());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=kU(r,this.compiler,t,this.onLoadEndListener).pipe(Br(()=>{this.childrenLoaders.delete(r)})),s=new zo(o,()=>new Ue).pipe(Ho());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kU(n,e,t,r){return ai(n.loadChildren()).pipe(J(DS),Ye(i=>i instanceof uu||Array.isArray(i)?Z(i):pe(e.compileModuleAsync(i))),J(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ph,[],{optional:!0,self:!0}).flat()),{routes:s.map(Wv),injector:o}}))}function FU(n){return n&&typeof n=="object"&&"default"in n}function DS(n){return FU(n)?n.default:n}var Yv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>L(VU),providedIn:"root"})}}return n})(),VU=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),CS=new U(""),TS=new U("");function LU(n,e,t){let r=n.get(TS),i=n.get(mt);return n.get(ue).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),jU(n))),{onViewTransitionCreated:u}=r;return u&&En(n,()=>u({transition:a,from:e,to:t})),s})}function jU(n){return new Promise(e=>{Zd(e,{injector:n})})}var Zv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ue,this.transitionAbortSubject=new Ue,this.configLoader=L(Qv),this.environmentInjector=L(bt),this.urlSerializer=L(ju),this.rootContexts=L(Uu),this.location=L(ys),this.inputBindingEnabled=L(kh,{optional:!0})!==null,this.titleStrategy=L(ES),this.options=L(qu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(Yv),this.createViewTransition=L(CS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Sv(i)),r=i=>this.events.next(new Mv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(De(q(q({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ft({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Su,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ze(o=>o.id!==0),J(o=>De(q({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Pe(o=>{let s=!1,a=!1;return Z(o).pipe(Pe(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",en.SupersededByNewNavigation),Ft;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?De(q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new si(u.id,this.urlSerializer.serialize(u.rawUrl),f,Th.IgnoredSameUrlNavigation)),u.resolve(null),Ft}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Z(u).pipe(Pe(f=>{let g=this.transitions?.getValue();return this.events.next(new Ts(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Ft:Promise.resolve(f)}),MU(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Je(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=De(q({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new bh(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:T,extras:C}=u,A=new Ts(f,this.urlSerializer.serialize(g),y,T);this.events.next(A);let F=dS(this.rootComponentType).snapshot;return this.currentTransition=o=De(q({},u),{targetSnapshot:F,urlAfterRedirects:g,extras:De(q({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,Z(o)}else{let f="";return this.events.next(new si(u.id,this.urlSerializer.serialize(u.extractedUrl),f,Th.IgnoredByUrlHandlingStrategy)),u.resolve(null),Ft}}),Je(u=>{let l=new Cv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),J(u=>(this.currentTransition=o=De(q({},u),{guards:W2(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),rU(this.environmentInjector,u=>this.events.next(u)),Je(u=>{if(o.guardsResult=u.guardsResult,Cs(u.guardsResult))throw gS(this.urlSerializer,u.guardsResult);let l=new Tv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Ze(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",en.GuardRejected),!1)),vv(u=>{if(u.guards.canActivateChecks.length)return Z(u).pipe(Je(l=>{let d=new bv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Pe(l=>{let d=!1;return Z(l).pipe(RU(this.paramsInheritanceStrategy,this.environmentInjector),Je({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",en.NoDataFromResolver)}}))}),Je(l=>{let d=new Av(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),vv(u=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Je(g=>{d.component=g}),J(()=>{})));for(let g of d.children)f.push(...l(g));return f};return Qa(l(u.targetSnapshot.root)).pipe(Ur(null),Un(1))}),vv(()=>this.afterPreactivation()),Pe(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?pe(d).pipe(J(()=>o)):Z(o)}),J(u=>{let l=j2(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=De(q({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Je(()=>{this.events.next(new Pu)}),G2(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Un(1),Je({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Sn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),ql(this.transitionAbortSubject.pipe(Je(u=>{throw u}))),Br(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",en.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),jr(u=>{if(a=!0,yS(u))this.events.next(new oi(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),$2(u)?this.events.next(new Ou(u.url)):o.resolve(!1);else{this.events.next(new Nu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return Ft}))}))}cancelNavigationTransition(t,r,i){let o=new oi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function UU(n){return n!==Su}var BU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>L($U),providedIn:"root"})}}return n})(),Hv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},$U=(()=>{class n extends Hv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=un(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>L(qU),providedIn:"root"})}}return n})(),qU=(()=>{class n extends bS{constructor(){super(...arguments),this.location=L(ys),this.urlSerializer=L(ju),this.options=L(qu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(Yv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ii,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=dS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ts)this.stateMemento=this.createStateMemento();else if(t instanceof si)this.rawUrlTree=r.initialUrl;else if(t instanceof bh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof Pu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof oi&&(t.code===en.GuardRejected||t.code===en.NoDataFromResolver)?this.restoreHistory(r):t instanceof Nu?this.restoreHistory(r,!0):t instanceof Sn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=q(q({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=q(q({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=un(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(bu||{});function AS(n,e){n.events.pipe(Ze(t=>t instanceof Sn||t instanceof oi||t instanceof Nu||t instanceof si),J(t=>t instanceof Sn||t instanceof si?bu.COMPLETE:(t instanceof oi?t.code===en.Redirect||t.code===en.SupersededByNewNavigation:!1)?bu.REDIRECTING:bu.FAILED),Ze(t=>t!==bu.REDIRECTING),Un(1)).subscribe(()=>{e()})}function HU(n){throw n}var zU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Cr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=L(nh),this.stateManager=L(bS),this.options=L(qu,{optional:!0})||{},this.pendingTasks=L(Ji),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(Zv),this.urlSerializer=L(ju),this.location=L(ys),this.urlHandlingStrategy=L(Yv),this._events=new Ue,this.errorHandler=this.options.errorHandler||HU,this.navigated=!1,this.routeReuseStrategy=L(BU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(Ph,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(kh,{optional:!0}),this.eventsSubscription=new He,this.isNgZoneEnabled=L(ue)instanceof ue&&ue.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof oi&&r.code!==en.Redirect&&r.code!==en.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Sn)this.navigated=!0;else if(r instanceof Ou){let s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||UU(i.source)};this.scheduleNavigation(s,Su,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}KU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Su,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=q({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Wv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,d=null;switch(a){case"merge":d=q(q({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=aS(g)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),f=this.currentUrlTree.root}return uS(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Cs(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Su,null,r)}navigate(t,r={skipLocationChange:!1}){return WU(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=q({},zU):r===!1?i=q({},GU):i=r,Cs(t))return $A(this.currentUrlTree,t,i);let o=this.parseUrl(t);return $A(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((f,g)=>{a=f,u=g});let d=this.pendingTasks.add();return AS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function WU(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new W(4008,!1)}function KU(n){return!(n instanceof Pu)&&!(n instanceof Ou)}var KA=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new Ue,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Sn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t!=null?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:t0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Y(Cr),Y(io),my("tabindex"),Y(cn),Y(Mt),Y(Dr))}}static{this.\u0275dir=Ee({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&An("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&gs("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Be.HasDecoratorInputTransform,"preserveFragment","preserveFragment",ti],skipLocationChange:[Be.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",ti],replaceUrl:[Be.HasDecoratorInputTransform,"replaceUrl","replaceUrl",ti],routerLink:"routerLink"},standalone:!0,features:[Ly,Cn]})}}return n})(),n7=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Fe,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Sn&&this.update()})}ngAfterContentInit(){Z(this.links.changes,Z(null)).pipe(jn()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=pe(t).pipe(jn()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=QU(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(Y(Cr),Y(Mt),Y(cn),Y(ei),Y(KA,8))}}static{this.\u0275dir=Ee({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Q0(o,KA,5),r&2){let s;Y0(s=Z0())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Cn]})}}return n})();function QU(n){return!!n.paths}var Oh=class{};var YU=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ze(t=>t instanceof Sn),fr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Jd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return pe(i).pipe(jn())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(Ye(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return pe([o,s]).pipe(jn())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(V(Cr),V(ah),V(bt),V(Oh),V(Qv))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),SS=new U(""),ZU=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=L(bt),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ts?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Sn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof si&&t.code===Th.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ah&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>N(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Zd(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Ah(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){h0()}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function JU(n){return n.routerState.root}function Hu(n,e){return{\u0275kind:n,\u0275providers:e}}function XU(){let n=L(ct);return e=>{let t=n.get(eo);if(e!==t.components[0])return;let r=n.get(Cr),i=n.get(MS);n.get(Jv)===1&&r.initialNavigation(),n.get(RS,null,ge.Optional)?.setUpPreloading(),n.get(SS,null,ge.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var MS=new U("",{factory:()=>new Ue}),Jv=new U("",{providedIn:"root",factory:()=>1});function eB(){return Hu(2,[{provide:Jv,useValue:0},{provide:oh,multi:!0,deps:[ct],useFactory:e=>{let t=e.get(vA,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Cr),o=e.get(MS);AS(i,()=>{r(!0)}),e.get(Zv).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}])}function tB(){return Hu(3,[{provide:oh,multi:!0,useFactory:()=>{let e=L(Cr);return()=>{e.setUpLocationChangeListener()}}},{provide:Jv,useValue:2}])}var RS=new U("");function nB(n){return Hu(0,[{provide:RS,useExisting:YU},{provide:Oh,useExisting:n}])}function rB(){return Hu(8,[GA,{provide:kh,useExisting:GA}])}function iB(n){let e=[{provide:CS,useValue:LU},{provide:TS,useValue:q({skipNextTransition:!!n?.skipInitialTransition},n)}];return Hu(9,e)}var QA=new U("ROUTER_FORROOT_GUARD"),oB=[ys,{provide:ju,useClass:Ru},Cr,Uu,{provide:io,useFactory:JU,deps:[Cr]},Qv,[]],r7=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[oB,[],{provide:Ph,multi:!0,useValue:t},{provide:QA,useFactory:cB,deps:[[Cr,new ut,new ey]]},{provide:qu,useValue:r||{}},r?.useHash?aB():uB(),sB(),r?.preloadingStrategy?nB(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?lB(r):[],r?.bindToComponentInputs?rB().\u0275providers:[],r?.enableViewTransitions?iB().\u0275providers:[],dB()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ph,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(V(QA,8))}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({})}}return n})();function sB(){return{provide:SS,useFactory:()=>{let n=L(EA),e=L(ue),t=L(qu),r=L(Zv),i=L(ju);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ZU(i,r,n,e,t)}}}function aB(){return{provide:Dr,useClass:wA}}function uB(){return{provide:Dr,useClass:ev}}function cB(n){return"guarded"}function lB(n){return[n.initialNavigation==="disabled"?tB().\u0275providers:[],n.initialNavigation==="enabledBlocking"?eB().\u0275providers:[]]}var YA=new U("");function dB(){return[{provide:YA,useFactory:XU},{provide:sh,multi:!0,useExisting:YA}]}var BS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Y(cn),Y(Mt))}}static{this.\u0275dir=Ee({type:n})}}return n})(),Rs=(()=>{class n extends BS{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=un(n)))(i||n)}})()}static{this.\u0275dir=Ee({type:n,features:[ot]})}}return n})(),li=new U(""),hB={provide:li,useExisting:At(()=>fB),multi:!0},fB=(()=>{class n extends Rs{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=un(n)))(i||n)}})()}static{this.\u0275dir=Ee({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&An("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[Wt([hB]),ot]})}}return n})(),pB={provide:li,useExisting:At(()=>$S),multi:!0};function gB(){let n=Kn()?Kn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var mB=new U(""),$S=(()=>{class n extends BS{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!gB())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Y(cn),Y(Mt),Y(mB,8))}}static{this.\u0275dir=Ee({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&An("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Wt([pB]),ot]})}}return n})();function ui(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function qS(n){return n!=null&&typeof n.length=="number"}var oo=new U(""),Ku=new U(""),yB=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,xS=class{static min(e){return HS(e)}static max(e){return vB(e)}static required(e){return zS(e)}static requiredTrue(e){return _B(e)}static email(e){return wB(e)}static minLength(e){return IB(e)}static maxLength(e){return EB(e)}static pattern(e){return DB(e)}static nullValidator(e){return Lh(e)}static compose(e){return ZS(e)}static composeAsync(e){return XS(e)}};function HS(n){return e=>{if(ui(e.value)||ui(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function vB(n){return e=>{if(ui(e.value)||ui(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function zS(n){return ui(n.value)?{required:!0}:null}function _B(n){return n.value===!0?null:{required:!0}}function wB(n){return ui(n.value)||yB.test(n.value)?null:{email:!0}}function IB(n){return e=>ui(e.value)||!qS(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function EB(n){return e=>qS(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function DB(n){if(!n)return Lh;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ui(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Lh(n){return null}function GS(n){return n!=null}function WS(n){return Xi(n)?pe(n):n}function KS(n){let e={};return n.forEach(t=>{e=t!=null?q(q({},e),t):e}),Object.keys(e).length===0?null:e}function QS(n,e){return e.map(t=>t(n))}function CB(n){return!n.validate}function YS(n){return n.map(e=>CB(e)?e:t=>e.validate(t))}function ZS(n){if(!n)return null;let e=n.filter(GS);return e.length==0?null:function(t){return KS(QS(t,e))}}function JS(n){return n!=null?ZS(YS(n)):null}function XS(n){if(!n)return null;let e=n.filter(GS);return e.length==0?null:function(t){let r=QS(t,e).map(WS);return bg(r).pipe(J(KS))}}function eM(n){return n!=null?XS(YS(n)):null}function NS(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function tM(n){return n._rawValidators}function nM(n){return n._rawAsyncValidators}function Xv(n){return n?Array.isArray(n)?n:[n]:[]}function jh(n,e){return Array.isArray(n)?n.includes(e):n===e}function PS(n,e){let t=Xv(e);return Xv(n).forEach(i=>{jh(t,i)||t.push(i)}),t}function OS(n,e){return Xv(e).filter(t=>!jh(n,t))}var Uh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=JS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},tn=class extends Uh{get formDirective(){return null}get path(){return null}},ci=class extends Uh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Bh=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},TB={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},I7=De(q({},TB),{"[class.ng-submitted]":"isSubmitted"}),E7=(()=>{class n extends Bh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Y(ci,2))}}static{this.\u0275dir=Ee({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&eh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ot]})}}return n})(),D7=(()=>{class n extends Bh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Y(tn,10))}}static{this.\u0275dir=Ee({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&eh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ot]})}}return n})();var zu="VALID",Vh="INVALID",Ss="PENDING",Gu="DISABLED";function r_(n){return(zh(n)?n.validators:n)||null}function bB(n){return Array.isArray(n)?JS(n):n||null}function i_(n,e){return(zh(e)?e.asyncValidators:n)||null}function AB(n){return Array.isArray(n)?eM(n):n||null}function zh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function rM(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new W(1e3,"");if(!r[t])throw new W(1001,"")}function iM(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new W(1002,"")})}var Ms=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===zu}get invalid(){return this.status===Vh}get pending(){return this.status==Ss}get disabled(){return this.status===Gu}get enabled(){return this.status!==Gu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(PS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(PS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(OS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(OS(e,this._rawAsyncValidators))}hasValidator(e){return jh(this._rawValidators,e)}hasAsyncValidator(e){return jh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ss,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Gu,this.errors=null,this._forEachChild(r=>{r.disable(De(q({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(De(q({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=zu,this._forEachChild(r=>{r.enable(De(q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(De(q({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zu||this.status===Ss)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gu:zu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ss,this._hasOwnPendingAsyncValidator=!0;let t=WS(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Fe,this.statusChanges=new Fe}_calculateStatus(){return this._allControlsDisabled()?Gu:this.errors?Vh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ss)?Ss:this._anyControlsHaveStatus(Vh)?Vh:zu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){zh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=bB(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=AB(this._rawAsyncValidators)}},$h=class extends Ms{constructor(e,t,r){super(r_(t),i_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){iM(this,!0,e),Object.keys(e).forEach(r=>{rM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var e_=class extends $h{};var Qu=new U("CallSetDisabledState",{providedIn:"root",factory:()=>Yu}),Yu="always";function Gh(n,e){return[...e.path,n]}function t_(n,e,t=Yu){o_(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),MB(n,e),xB(n,e),RB(n,e),SB(n,e)}function kS(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Hh(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function qh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function SB(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function o_(n,e){let t=tM(n);e.validator!==null?n.setValidators(NS(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=nM(n);e.asyncValidator!==null?n.setAsyncValidators(NS(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();qh(e._rawValidators,i),qh(e._rawAsyncValidators,i)}function Hh(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=tM(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=nM(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return qh(e._rawValidators,r),qh(e._rawAsyncValidators,r),t}function MB(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&oM(n,e)})}function RB(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&oM(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function oM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function xB(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function NB(n,e){n==null,o_(n,e)}function PB(n,e){return Hh(n,e)}function sM(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function OB(n){return Object.getPrototypeOf(n.constructor)===Rs}function kB(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function aM(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===$S?t=o:OB(o)?r=o:i=o}),i||r||t||null}function FB(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function FS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function VS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Wu=class extends Ms{constructor(e=null,t,r){super(r_(t),i_(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(VS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){FS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){FS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){VS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var VB=n=>n instanceof Wu,LB=(()=>{class n extends tn{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Gh(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=un(n)))(i||n)}})()}static{this.\u0275dir=Ee({type:n,features:[ot]})}}return n})();var jB={provide:ci,useExisting:At(()=>UB)},LS=Promise.resolve(),UB=(()=>{class n extends ci{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Wu,this._registered=!1,this.name="",this.update=new Fe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=aM(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),sM(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){t_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){LS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ti(r);LS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Gh(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Y(tn,9),Y(oo,10),Y(Ku,10),Y(li,10),Y(ei,8),Y(Qu,8))}}static{this.\u0275dir=Ee({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Be.None,"disabled","isDisabled"],model:[Be.None,"ngModel","model"],options:[Be.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Wt([jB]),ot,Cn]})}}return n})(),T7=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ee({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),BB={provide:li,useExisting:At(()=>$B),multi:!0},$B=(()=>{class n extends Rs{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=un(n)))(i||n)}})()}static{this.\u0275dir=Ee({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&An("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[Wt([BB]),ot]})}}return n})(),qB={provide:li,useExisting:At(()=>zB),multi:!0};var HB=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zB=(()=>{class n extends Rs{constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=L(Qu,{optional:!0})??Yu}ngOnInit(){this._control=this._injector.get(ci),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(r){return new(r||n)(Y(cn),Y(Mt),Y(HB),Y(ct))}}static{this.\u0275dir=Ee({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&An("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Wt([qB]),ot]})}}return n})();var uM=new U("");var GB={provide:tn,useExisting:At(()=>cM)},cM=(()=>{class n extends tn{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Fe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Hh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return t_(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){kS(t.control||null,t,!1),FB(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,kB(this.form,this.directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(kS(r||null,t),VB(i)&&(t_(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);NB(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&PB(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){o_(this.form,this),this._oldForm&&Hh(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(Y(oo,10),Y(Ku,10),Y(Qu,8))}}static{this.\u0275dir=Ee({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&An("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[Be.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Wt([GB]),ot,Cn]})}}return n})(),WB={provide:tn,useExisting:At(()=>lM)},lM=(()=>{class n extends LB{constructor(t,r,i){super(),this.name=null,this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){hM(this._parent)}static{this.\u0275fac=function(r){return new(r||n)(Y(tn,13),Y(oo,10),Y(Ku,10))}}static{this.\u0275dir=Ee({type:n,selectors:[["","formGroupName",""]],inputs:{name:[Be.None,"formGroupName","name"]},features:[Wt([WB]),ot]})}}return n})(),KB={provide:tn,useExisting:At(()=>dM)},dM=(()=>{class n extends tn{constructor(t,r,i){super(),this.name=null,this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Gh(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){hM(this._parent)}static{this.\u0275fac=function(r){return new(r||n)(Y(tn,13),Y(oo,10),Y(Ku,10))}}static{this.\u0275dir=Ee({type:n,selectors:[["","formArrayName",""]],inputs:{name:[Be.None,"formArrayName","name"]},features:[Wt([KB]),ot]})}}return n})();function hM(n){return!(n instanceof lM)&&!(n instanceof cM)&&!(n instanceof dM)}var QB={provide:ci,useExisting:At(()=>YB)},YB=(()=>{class n extends ci{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Fe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=aM(this,o)}ngOnChanges(t){this._added||this._setUpControl(),sM(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Gh(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(Y(tn,13),Y(oo,10),Y(Ku,10),Y(li,10),Y(uM,8))}}static{this.\u0275dir=Ee({type:n,selectors:[["","formControlName",""]],inputs:{name:[Be.None,"formControlName","name"],isDisabled:[Be.None,"disabled","isDisabled"],model:[Be.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Wt([QB]),ot,Cn]})}}return n})(),ZB={provide:li,useExisting:At(()=>pM),multi:!0};function fM(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function JB(n){return n.split(":")[0]}var pM=(()=>{class n extends Rs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=fM(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=JB(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=un(n)))(i||n)}})()}static{this.\u0275dir=Ee({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&An("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Wt([ZB]),ot]})}}return n})(),b7=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(fM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Y(Mt),Y(cn),Y(pM,9))}}static{this.\u0275dir=Ee({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),XB={provide:li,useExisting:At(()=>gM),multi:!0};function jS(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function e$(n){return n.split(":")[0]}var gM=(()=>{class n extends Rs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=e$(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=un(n)))(i||n)}})()}static{this.\u0275dir=Ee({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&An("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Wt([XB]),ot]})}}return n})(),A7=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(jS(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(jS(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Y(Mt),Y(cn),Y(gM,9))}}static{this.\u0275dir=Ee({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function t$(n){return typeof n=="number"?n:parseFloat(n)}var mM=(()=>{class n{constructor(){this._validator=Lh}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Lh,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ee({type:n,features:[Cn]})}}return n})();var n$={provide:oo,useExisting:At(()=>r$),multi:!0},r$=(()=>{class n extends mM{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>t$(t),this.createValidator=t=>HS(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=un(n)))(i||n)}})()}static{this.\u0275dir=Ee({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&gs("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Wt([n$]),ot]})}}return n})(),i$={provide:oo,useExisting:At(()=>o$),multi:!0};var o$=(()=>{class n extends mM{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ti,this.createValidator=t=>zS}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=un(n)))(i||n)}})()}static{this.\u0275dir=Ee({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&gs("required",i._enabled?"":null)},inputs:{required:"required"},features:[Wt([i$]),ot]})}}return n})();var yM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({})}}return n})(),n_=class extends Ms{constructor(e,t,r){super(r_(t),i_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){iM(this,!1,e),e.forEach((r,i)=>{rM(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function US(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var S7=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return US(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new $h(i,o)}record(t,r=null){let i=this._reduceControls(t);return new e_(i,r)}control(t,r,i){let o={};return this.useNonNullable?(US(r)?o=r:(o.validators=r,o.asyncValidators=i),new Wu(t,De(q({},o),{nonNullable:!0}))):new Wu(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new n_(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Wu)return t;if(t instanceof Ms)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var M7=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Qu,useValue:t.callSetDisabledState??Yu}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({imports:[yM]})}}return n})(),R7=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:uM,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Qu,useValue:t.callSetDisabledState??Yu}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=it({type:n})}static{this.\u0275inj=rt({imports:[yM]})}}return n})();var s$="firebase",a$="10.14.1";Ct(s$,a$,"app");var Kt=new yr("ANGULARFIRE2_VERSION");function Kh(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Zu=(n,e)=>{let t=e?[e]:hl(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Mn=class{constructor(){return Zu(u$)}},u$="app-check";function xs(){}var Wh=class{zone;delegate;constructor(e,t=Dg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},s_=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xs,{},xs,xs)),t.pipe(Je({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Zn=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Wh(Zone.current)),this.insideAngular=t.run(()=>new Wh(Zone.current,Ka)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(V(ue))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qh(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function c$(n){return Qh().ngZone.runOutsideAngular(()=>n())}function so(n){return Qh().ngZone.run(()=>n())}function Ut(n){return l$(Qh())(n)}function l$(n){return function(t){return t=t.lift(new s_(n.ngZone)),t.pipe(on(n.outsideAngular),Zt(n.insideAngular))}}var d$=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),so(()=>n.apply(void 0,r))},yt=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=so(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xs,{},xs,xs))),r[o]=d$(r[o],t));let i=c$(()=>n.apply(this,r));if(!e)if(i instanceof ie){let o=Qh();return i.pipe(on(o.outsideAngular),Zt(o.insideAngular))}else return so(()=>i);return i instanceof ie?i.pipe(Ut):i instanceof Promise?so(()=>new Promise((o,s)=>i.then(a=>so(()=>o(a)),a=>so(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:so(()=>i)};var Tr=class{constructor(e){return e}},ao=class{constructor(){return hl()}};function h$(n){return n&&n.length===1?n[0]:new Tr(qa())}var a_=new U("angularfire2._apps"),f$={provide:Tr,useFactory:h$,deps:[[new ut,a_]]},p$={provide:ao,deps:[[new ut,a_]]};function g$(n){return(e,t)=>{let r=t.get(lt);Ct("angularfire",Kt.full,"core"),Ct("angularfire",Kt.full,"app"),Ct("angular",th.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Tr(i)}}function Y7(n,...e){return Gn([f$,p$,{provide:a_,useFactory:g$(n),multi:!0,deps:[ue,ct,Zn,...e]}])}var Z7=yt(hC,!0);function IM(n){return new ie(function(e){var t=Ha(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var EM="auth",Ju=class{constructor(e){return e}},Xu=class{constructor(){return Zu(EM)}};var u_=new U("angularfire2.auth-instances");function lq(n,e){let t=Kh(EM,n,e);return t&&new Ju(t)}function dq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ju(r)}}var hq={provide:Xu,deps:[[new ut,u_]]},fq={provide:Ju,useFactory:lq,deps:[[new ut,u_],Tr]};function YQ(n,...e){return Ct("angularfire",Kt.full,"auth"),Gn([fq,hq,{provide:u_,useFactory:dq(n),multi:!0,deps:[ue,ct,Zn,ao,[new ut,Mn],...e]}])}var ZQ=yt(IM,!0);var JQ=yt(cg,!0);var XQ=yt(Ha,!0);var eY=yt(ug,!0);var tY=yt(ag,!0);var DM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},CM={};var di,c_;(function(){var n;function e(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,S){for(var _=Array(arguments.length-2),ur=2;ur<arguments.length;ur++)_[ur-2]=arguments[ur];return v.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,w){w||(w=0);var E=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)E[D]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],D=I.g[2];var S=I.g[3],_=v+(S^w&(D^S))+E[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=S+(D^v&(w^D))+E[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(w^S&(v^w))+E[2]+606105819&4294967295,D=S+(_<<17&4294967295|_>>>15),_=w+(v^D&(S^v))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(S^w&(D^S))+E[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=S+(D^v&(w^D))+E[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(w^S&(v^w))+E[6]+2821735955&4294967295,D=S+(_<<17&4294967295|_>>>15),_=w+(v^D&(S^v))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(S^w&(D^S))+E[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=S+(D^v&(w^D))+E[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(w^S&(v^w))+E[10]+4294925233&4294967295,D=S+(_<<17&4294967295|_>>>15),_=w+(v^D&(S^v))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(S^w&(D^S))+E[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=S+(D^v&(w^D))+E[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(w^S&(v^w))+E[14]+2792965006&4294967295,D=S+(_<<17&4294967295|_>>>15),_=w+(v^D&(S^v))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(D^S&(w^D))+E[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=S+(w^D&(v^w))+E[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(S^v))+E[11]+643717713&4294967295,D=S+(_<<14&4294967295|_>>>18),_=w+(S^v&(D^S))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^S&(w^D))+E[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=S+(w^D&(v^w))+E[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(S^v))+E[15]+3634488961&4294967295,D=S+(_<<14&4294967295|_>>>18),_=w+(S^v&(D^S))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^S&(w^D))+E[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=S+(w^D&(v^w))+E[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(S^v))+E[3]+4107603335&4294967295,D=S+(_<<14&4294967295|_>>>18),_=w+(S^v&(D^S))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^S&(w^D))+E[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=S+(w^D&(v^w))+E[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(S^v))+E[7]+1735328473&4294967295,D=S+(_<<14&4294967295|_>>>18),_=w+(S^v&(D^S))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(w^D^S)+E[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=S+(v^w^D)+E[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^w)+E[11]+1839030562&4294967295,D=S+(_<<16&4294967295|_>>>16),_=w+(D^S^v)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^S)+E[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=S+(v^w^D)+E[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^w)+E[7]+4139469664&4294967295,D=S+(_<<16&4294967295|_>>>16),_=w+(D^S^v)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^S)+E[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=S+(v^w^D)+E[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^w)+E[3]+3572445317&4294967295,D=S+(_<<16&4294967295|_>>>16),_=w+(D^S^v)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^S)+E[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=S+(v^w^D)+E[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^w)+E[15]+530742520&4294967295,D=S+(_<<16&4294967295|_>>>16),_=w+(D^S^v)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(D^(w|~S))+E[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=S+(w^(v|~D))+E[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~w))+E[14]+2878612391&4294967295,D=S+(_<<15&4294967295|_>>>17),_=w+(S^(D|~v))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~S))+E[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=S+(w^(v|~D))+E[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~w))+E[10]+4293915773&4294967295,D=S+(_<<15&4294967295|_>>>17),_=w+(S^(D|~v))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~S))+E[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=S+(w^(v|~D))+E[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~w))+E[6]+2734768916&4294967295,D=S+(_<<15&4294967295|_>>>17),_=w+(S^(D|~v))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~S))+E[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=S+(w^(v|~D))+E[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~w))+E[2]+718787259&4294967295,D=S+(_<<15&4294967295|_>>>17),_=w+(S^(D|~v))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,E=this.B,D=this.h,S=0;S<v;){if(D==0)for(;S<=w;)i(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<v;)if(E[D++]=I.charCodeAt(S++),D==this.blockSize){i(this,E),D=0;break}}else for(;S<v;)if(E[D++]=I[S++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var E=0;32>E;E+=8)I[w++]=this.g[v]>>>E&255;return I};function o(I,v){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function s(I,v){this.h=v;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var S=I[D]|0;E&&S==v||(w[D]=S,E=!1)}this.g=w}var a={};function u(I){return-128<=I&&128>I?o(I,function(v){return new s([v|0],0>v?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return A(l(-I));for(var v=[],w=1,E=0;I>=w;E++)v[E]=I/w|0,w*=4294967296;return new s(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return A(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),E=f,D=0;D<I.length;D+=8){var S=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+S),v);8>S?(S=l(Math.pow(v,S)),E=E.j(S).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var f=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(C(this))return-A(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(C(this))return"-"+A(this).toString(I);for(var v=l(Math.pow(I,6)),w=this,E="";;){var D=K(w,v).g;w=F(w,D.j(v));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,T(w))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function C(I){return I.h==-1}n.l=function(I){return I=F(this,I),C(I)?-1:T(I)?0:1};function A(I){for(var v=I.g.length,w=[],E=0;E<v;E++)w[E]=~I.g[E];return new s(w,~I.h).add(g)}n.abs=function(){return C(this)?A(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=v;D++){var S=E+(this.i(D)&65535)+(I.i(D)&65535),_=(S>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,S&=65535,_&=65535,w[D]=_<<16|S}return new s(w,w[w.length-1]&-2147483648?-1:0)};function F(I,v){return I.add(A(v))}n.j=function(I){if(T(this)||T(I))return f;if(C(this))return C(I)?A(this).j(A(I)):A(A(this).j(I));if(C(I))return A(this.j(A(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],E=0;E<2*v;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var S=this.i(E)>>>16,_=this.i(E)&65535,ur=I.i(D)>>>16,Ea=I.i(D)&65535;w[2*E+2*D]+=_*Ea,H(w,2*E+2*D),w[2*E+2*D+1]+=S*Ea,H(w,2*E+2*D+1),w[2*E+2*D+1]+=_*ur,H(w,2*E+2*D+1),w[2*E+2*D+2]+=S*ur,H(w,2*E+2*D+2)}for(E=0;E<v;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=v;E<2*v;E++)w[E]=0;return new s(w,0)};function H(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function P(I,v){this.g=I,this.h=v}function K(I,v){if(T(v))throw Error("division by zero");if(T(I))return new P(f,f);if(C(I))return v=K(A(I),v),new P(A(v.g),A(v.h));if(C(v))return v=K(I,A(v)),new P(A(v.g),v.h);if(30<I.g.length){if(C(I)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,E=v;0>=E.l(I);)w=te(w),E=te(E);var D=X(w,1),S=X(E,1);for(E=X(E,2),w=X(w,2);!T(E);){var _=S.add(E);0>=_.l(I)&&(D=D.add(w),S=_),E=X(E,1),w=X(w,1)}return v=F(I,D.j(v)),new P(D,v)}for(D=f;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(w),_=S.j(v);C(_)||0<_.l(I);)w-=E,S=l(w),_=S.j(v);T(S)&&(S=g),D=D.add(S),I=F(I,_)}return new P(D,I)}n.A=function(I){return K(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function te(I){for(var v=I.g.length+1,w=[],E=0;E<v;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function X(I,v){var w=v>>5;v%=32;for(var E=I.g.length-w,D=[],S=0;S<E;S++)D[S]=0<v?I.i(S+w)>>>v|I.i(S+w+1)<<32-v:I.i(S+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,c_=CM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,di=CM.Integer=s}).apply(typeof DM<"u"?DM:typeof self<"u"?self:typeof window<"u"?window:{});var Yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},br={};var l_,pq,Ns,d_,ec,Zh,h_,f_,p_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yh=="object"&&Yh];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,h){if(h)e:{var p=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in p))break e;p=p[b]}c=c[c.length-1],m=p[c],h=h(m),h!=m&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,m=!1,b={next:function(){if(!m&&p<c.length){var R=p++;return{value:h(R,c[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function l(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),c.apply(h,b)}}return function(){return c.apply(h,arguments)}}function g(c,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function T(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(m,b,R){for(var j=Array(arguments.length-2),be=2;be<arguments.length;be++)j[be-2]=arguments[be];return h.prototype[b].apply(m,j)}}function C(c){let h=c.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=c[m];return p}return[]}function A(c,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(u(m)){let b=c.length||0,R=m.length||0;c.length=b+R;for(let j=0;j<R;j++)c[b+j]=m[j]}else c.push(m)}}class F{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function H(c){return/^[\s\xa0]*$/.test(c)}function P(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function K(c){return K[" "](c),c}K[" "]=function(){};var te=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function X(c,h,p){for(let m in c)h.call(p,c[m],m,c)}function I(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function v(c){let h={};for(let p in c)h[p]=c[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,h){let p,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(p in m)c[p]=m[p];for(let R=0;R<w.length;R++)p=w[R],Object.prototype.hasOwnProperty.call(m,p)&&(c[p]=m[p])}}function D(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function S(c){a.setTimeout(()=>{throw c},0)}function _(){var c=xp;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class ur{constructor(){this.h=this.g=null}add(h,p){let m=Ea.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Ea=new F(()=>new HN,c=>c.reset());class HN{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Da,Ca=!1,xp=new ur,nD=()=>{let c=a.Promise.resolve(void 0);Da=()=>{c.then(zN)}};var zN=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(p){S(p)}var h=Ea;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}Ca=!1};function kr(){this.s=this.s,this.C=this.C}kr.prototype.s=!1,kr.prototype.ma=function(){this.s||(this.s=!0,this.N())},kr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function wt(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var GN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function Ta(c,h){if(wt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(te){e:{try{K(h.nodeName);var b=!0;break e}catch{}b=!1}b||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:WN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ta.aa.h.call(this)}}T(Ta,wt);var WN={2:"touch",3:"pen",4:"mouse"};Ta.prototype.h=function(){Ta.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ba="closure_listenable_"+(1e6*Math.random()|0),KN=0;function QN(c,h,p,m,b){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=b,this.key=++KN,this.da=this.fa=!1}function Gc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Wc(c){this.src=c,this.g={},this.h=0}Wc.prototype.add=function(c,h,p,m,b){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var j=Pp(c,h,m,b);return-1<j?(h=c[j],p||(h.fa=!1)):(h=new QN(h,this.src,R,!!m,b),h.fa=p,c.push(h)),h};function Np(c,h){var p=h.type;if(p in c.g){var m=c.g[p],b=Array.prototype.indexOf.call(m,h,void 0),R;(R=0<=b)&&Array.prototype.splice.call(m,b,1),R&&(Gc(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function Pp(c,h,p,m){for(var b=0;b<c.length;++b){var R=c[b];if(!R.da&&R.listener==h&&R.capture==!!p&&R.ha==m)return b}return-1}var Op="closure_lm_"+(1e6*Math.random()|0),kp={};function rD(c,h,p,m,b){if(m&&m.once)return oD(c,h,p,m,b);if(Array.isArray(h)){for(var R=0;R<h.length;R++)rD(c,h[R],p,m,b);return null}return p=jp(p),c&&c[ba]?c.K(h,p,l(m)?!!m.capture:!!m,b):iD(c,h,p,!1,m,b)}function iD(c,h,p,m,b,R){if(!h)throw Error("Invalid event type");var j=l(b)?!!b.capture:!!b,be=Vp(c);if(be||(c[Op]=be=new Wc(c)),p=be.add(h,p,m,j,R),p.proxy)return p;if(m=YN(),p.proxy=m,m.src=c,m.listener=p,c.addEventListener)GN||(b=j),b===void 0&&(b=!1),c.addEventListener(h.toString(),m,b);else if(c.attachEvent)c.attachEvent(aD(h.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function YN(){function c(p){return h.call(c.src,c.listener,p)}let h=ZN;return c}function oD(c,h,p,m,b){if(Array.isArray(h)){for(var R=0;R<h.length;R++)oD(c,h[R],p,m,b);return null}return p=jp(p),c&&c[ba]?c.L(h,p,l(m)?!!m.capture:!!m,b):iD(c,h,p,!0,m,b)}function sD(c,h,p,m,b){if(Array.isArray(h))for(var R=0;R<h.length;R++)sD(c,h[R],p,m,b);else m=l(m)?!!m.capture:!!m,p=jp(p),c&&c[ba]?(c=c.i,h=String(h).toString(),h in c.g&&(R=c.g[h],p=Pp(R,p,m,b),-1<p&&(Gc(R[p]),Array.prototype.splice.call(R,p,1),R.length==0&&(delete c.g[h],c.h--)))):c&&(c=Vp(c))&&(h=c.g[h.toString()],c=-1,h&&(c=Pp(h,p,m,b)),(p=-1<c?h[c]:null)&&Fp(p))}function Fp(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[ba])Np(h.i,c);else{var p=c.type,m=c.proxy;h.removeEventListener?h.removeEventListener(p,m,c.capture):h.detachEvent?h.detachEvent(aD(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Vp(h))?(Np(p,c),p.h==0&&(p.src=null,h[Op]=null)):Gc(c)}}}function aD(c){return c in kp?kp[c]:kp[c]="on"+c}function ZN(c,h){if(c.da)c=!0;else{h=new Ta(h,this);var p=c.listener,m=c.ha||c.src;c.fa&&Fp(c),c=p.call(m,h)}return c}function Vp(c){return c=c[Op],c instanceof Wc?c:null}var Lp="__closure_events_fn_"+(1e9*Math.random()>>>0);function jp(c){return typeof c=="function"?c:(c[Lp]||(c[Lp]=function(h){return c.handleEvent(h)}),c[Lp])}function It(){kr.call(this),this.i=new Wc(this),this.M=this,this.F=null}T(It,kr),It.prototype[ba]=!0,It.prototype.removeEventListener=function(c,h,p,m){sD(this,c,h,p,m)};function Nt(c,h){var p,m=c.F;if(m)for(p=[];m;m=m.F)p.push(m);if(c=c.M,m=h.type||h,typeof h=="string")h=new wt(h,c);else if(h instanceof wt)h.target=h.target||c;else{var b=h;h=new wt(m,c),E(h,b)}if(b=!0,p)for(var R=p.length-1;0<=R;R--){var j=h.g=p[R];b=Kc(j,m,!0,h)&&b}if(j=h.g=c,b=Kc(j,m,!0,h)&&b,b=Kc(j,m,!1,h)&&b,p)for(R=0;R<p.length;R++)j=h.g=p[R],b=Kc(j,m,!1,h)&&b}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],m=0;m<p.length;m++)Gc(p[m]);delete c.g[h],c.h--}}this.F=null},It.prototype.K=function(c,h,p,m){return this.i.add(String(c),h,!1,p,m)},It.prototype.L=function(c,h,p,m){return this.i.add(String(c),h,!0,p,m)};function Kc(c,h,p,m){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var b=!0,R=0;R<h.length;++R){var j=h[R];if(j&&!j.da&&j.capture==p){var be=j.listener,ht=j.ha||j.src;j.fa&&Np(c.i,j),b=be.call(ht,m)!==!1&&b}}return b&&!m.defaultPrevented}function uD(c,h,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function cD(c){c.g=uD(()=>{c.g=null,c.i&&(c.i=!1,cD(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class JN extends kr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:cD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aa(c){kr.call(this),this.h=c,this.g={}}T(Aa,kr);var lD=[];function dD(c){X(c.g,function(h,p){this.g.hasOwnProperty(p)&&Fp(h)},c),c.g={}}Aa.prototype.N=function(){Aa.aa.N.call(this),dD(this)},Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Up=a.JSON.stringify,XN=a.JSON.parse,eP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Bp(){}Bp.prototype.h=null;function hD(c){return c.h||(c.h=c.i())}function fD(){}var Sa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $p(){wt.call(this,"d")}T($p,wt);function qp(){wt.call(this,"c")}T(qp,wt);var Ni={},pD=null;function Qc(){return pD=pD||new It}Ni.La="serverreachability";function gD(c){wt.call(this,Ni.La,c)}T(gD,wt);function Ma(c){let h=Qc();Nt(h,new gD(h))}Ni.STAT_EVENT="statevent";function mD(c,h){wt.call(this,Ni.STAT_EVENT,c),this.stat=h}T(mD,wt);function Pt(c){let h=Qc();Nt(h,new mD(h,c))}Ni.Ma="timingevent";function yD(c,h){wt.call(this,Ni.Ma,c),this.size=h}T(yD,wt);function Ra(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function xa(){this.g=!0}xa.prototype.xa=function(){this.g=!1};function tP(c,h,p,m,b,R){c.info(function(){if(c.g)if(R)for(var j="",be=R.split("&"),ht=0;ht<be.length;ht++){var Ie=be[ht].split("=");if(1<Ie.length){var Et=Ie[0];Ie=Ie[1];var Dt=Et.split("_");j=2<=Dt.length&&Dt[1]=="type"?j+(Et+"="+Ie+"&"):j+(Et+"=redacted&")}}else j=null;else j=R;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+h+`
`+p+`
`+j})}function nP(c,h,p,m,b,R,j){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+h+`
`+p+`
`+R+" "+j})}function Fo(c,h,p,m){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+iP(c,p)+(m?" "+m:"")})}function rP(c,h){c.info(function(){return"TIMEOUT: "+h})}xa.prototype.info=function(){};function iP(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var m=p[c];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var R=b[0];if(R!="noop"&&R!="stop"&&R!="close")for(var j=1;j<b.length;j++)b[j]=""}}}}return Up(p)}catch{return h}}var Yc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hp;function Zc(){}T(Zc,Bp),Zc.prototype.g=function(){return new XMLHttpRequest},Zc.prototype.i=function(){return{}},Hp=new Zc;function Fr(c,h,p,m){this.j=c,this.i=h,this.l=p,this.R=m||1,this.U=new Aa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _D}function _D(){this.i=null,this.g="",this.h=!1}var wD={},zp={};function Gp(c,h,p){c.L=1,c.v=tl(cr(h)),c.m=p,c.P=!0,ID(c,null)}function ID(c,h){c.F=Date.now(),Jc(c),c.A=cr(c.v);var p=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),kD(p.i,"t",m),c.C=0,p=c.j.J,c.h=new _D,c.g=XD(c.j,p?h:null,!c.m),0<c.O&&(c.M=new JN(g(c.Y,c,c.g),c.O)),h=c.U,p=c.g,m=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(lD[0]=b.toString()),b=lD);for(var R=0;R<b.length;R++){var j=rD(p,b[R],m||h.handleEvent,!1,h.h||h);if(!j)break;h.g[j.key]=j}h=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),Ma(),tP(c.i,c.u,c.A,c.l,c.R,c.m)}Fr.prototype.ca=function(c){c=c.target;let h=this.M;h&&lr(c)==3?h.j():this.Y(c)},Fr.prototype.Y=function(c){try{if(c==this.g)e:{let Dt=lr(this.g);var h=this.g.Ba();let jo=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||$D(this.g)))){this.J||Dt!=4||h==7||(h==8||0>=jo?Ma(3):Ma(2)),Wp(this);var p=this.g.Z();this.X=p;t:if(ED(this)){var m=$D(this.g);c="";var b=m.length,R=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pi(this),Na(this);var j="";break t}this.h.i=new a.TextDecoder}for(h=0;h<b;h++)this.h.h=!0,c+=this.h.i.decode(m[h],{stream:!(R&&h==b-1)});m.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=p==200,nP(this.i,this.u,this.A,this.l,this.R,Dt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ht=this.g;if((be=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(be)){var Ie=be;break t}}Ie=null}if(p=Ie)Fo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kp(this,p);else{this.o=!1,this.s=3,Pt(12),Pi(this),Na(this);break e}}if(this.P){p=!0;let pn;for(;!this.J&&this.C<j.length;)if(pn=oP(this,j),pn==zp){Dt==4&&(this.s=4,Pt(14),p=!1),Fo(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==wD){this.s=4,Pt(15),Fo(this.i,this.l,j,"[Invalid Chunk]"),p=!1;break}else Fo(this.i,this.l,pn,null),Kp(this,pn);if(ED(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||j.length!=0||this.h.h||(this.s=1,Pt(16),p=!1),this.o=this.o&&p,!p)Fo(this.i,this.l,j,"[Invalid Chunked Response]"),Pi(this),Na(this);else if(0<j.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),eg(Et),Et.M=!0,Pt(11))}}else Fo(this.i,this.l,j,null),Kp(this,j);Dt==4&&Pi(this),this.o&&!this.J&&(Dt==4?QD(this.j,this):(this.o=!1,Jc(this)))}else EP(this.g),p==400&&0<j.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),Pi(this),Na(this)}}}catch{}finally{}};function ED(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function oP(c,h){var p=c.C,m=h.indexOf(`
`,p);return m==-1?zp:(p=Number(h.substring(p,m)),isNaN(p)?wD:(m+=1,m+p>h.length?zp:(h=h.slice(m,m+p),c.C=m+p,h)))}Fr.prototype.cancel=function(){this.J=!0,Pi(this)};function Jc(c){c.S=Date.now()+c.I,DD(c,c.I)}function DD(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ra(g(c.ba,c),h)}function Wp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Fr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(rP(this.i,this.A),this.L!=2&&(Ma(),Pt(17)),Pi(this),this.s=2,Na(this)):DD(this,this.S-c)};function Na(c){c.j.G==0||c.J||QD(c.j,c)}function Pi(c){Wp(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,dD(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function Kp(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||Qp(p.h,c))){if(!c.K&&Qp(p.h,c)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)sl(p),il(p);else break e;Xp(p),Pt(18)}}else p.za=b[1],0<p.za-p.T&&37500>b[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ra(g(p.Za,p),6e3));if(1>=bD(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ki(p,11)}else if((c.K||p.g==c)&&sl(p),!H(h))for(b=p.Da.g.parse(h),h=0;h<b.length;h++){let Ie=b[h];if(p.T=Ie[0],Ie=Ie[1],p.G==2)if(Ie[0]=="c"){p.K=Ie[1],p.ia=Ie[2];let Et=Ie[3];Et!=null&&(p.la=Et,p.j.info("VER="+p.la));let Dt=Ie[4];Dt!=null&&(p.Aa=Dt,p.j.info("SVER="+p.Aa));let jo=Ie[5];jo!=null&&typeof jo=="number"&&0<jo&&(m=1.5*jo,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let pn=c.g;if(pn){let ul=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ul){var R=m.h;R.g||ul.indexOf("spdy")==-1&&ul.indexOf("quic")==-1&&ul.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Yp(R,R.h),R.h=null))}if(m.D){let tg=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;tg&&(m.ya=tg,Re(m.I,m.D,tg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var j=c;if(m.qa=JD(m,m.J?m.ia:null,m.W),j.K){AD(m.h,j);var be=j,ht=m.L;ht&&(be.I=ht),be.B&&(Wp(be),Jc(be)),m.g=j}else WD(m);0<p.i.length&&ol(p)}else Ie[0]!="stop"&&Ie[0]!="close"||ki(p,7);else p.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?ki(p,7):Jp(p):Ie[0]!="noop"&&p.l&&p.l.ta(Ie),p.v=0)}}Ma(4)}catch{}}var sP=class{constructor(c,h){this.g=c,this.map=h}};function CD(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function TD(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function bD(c){return c.h?1:c.g?c.g.size:0}function Qp(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Yp(c,h){c.g?c.g.add(h):c.h=h}function AD(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}CD.prototype.cancel=function(){if(this.i=SD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function SD(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return C(c.i)}function aP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],p=c.length,m=0;m<p;m++)h.push(c[m]);return h}h=[],p=0;for(m in c)h[p++]=c[m];return h}function uP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let m in c)h[p++]=m;return h}}}function MD(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=uP(c),m=aP(c),b=m.length,R=0;R<b;R++)h.call(void 0,m[R],p&&p[R],c)}var RD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cP(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var m=c[p].indexOf("="),b=null;if(0<=m){var R=c[p].substring(0,m);b=c[p].substring(m+1)}else R=c[p];h(R,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Oi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Oi){this.h=c.h,Xc(this,c.j),this.o=c.o,this.g=c.g,el(this,c.s),this.l=c.l;var h=c.i,p=new ka;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),xD(this,p),this.m=c.m}else c&&(h=String(c).match(RD))?(this.h=!1,Xc(this,h[1]||"",!0),this.o=Pa(h[2]||""),this.g=Pa(h[3]||"",!0),el(this,h[4]),this.l=Pa(h[5]||"",!0),xD(this,h[6]||"",!0),this.m=Pa(h[7]||"")):(this.h=!1,this.i=new ka(null,this.h))}Oi.prototype.toString=function(){var c=[],h=this.j;h&&c.push(Oa(h,ND,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(Oa(h,ND,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(Oa(p,p.charAt(0)=="/"?hP:dP,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",Oa(p,pP)),c.join("")};function cr(c){return new Oi(c)}function Xc(c,h,p){c.j=p?Pa(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function el(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function xD(c,h,p){h instanceof ka?(c.i=h,gP(c.i,c.h)):(p||(h=Oa(h,fP)),c.i=new ka(h,c.h))}function Re(c,h,p){c.i.set(h,p)}function tl(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Pa(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Oa(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,lP),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function lP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ND=/[#\/\?@]/g,dP=/[#\?:]/g,hP=/[#\?]/g,fP=/[#\?@]/g,pP=/#/g;function ka(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function Vr(c){c.g||(c.g=new Map,c.h=0,c.i&&cP(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=ka.prototype,n.add=function(c,h){Vr(this),this.i=null,c=Vo(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function PD(c,h){Vr(c),h=Vo(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function OD(c,h){return Vr(c),h=Vo(c,h),c.g.has(h)}n.forEach=function(c,h){Vr(this),this.g.forEach(function(p,m){p.forEach(function(b){c.call(h,b,m,this)},this)},this)},n.na=function(){Vr(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let b=c[m];for(let R=0;R<b.length;R++)p.push(h[m])}return p},n.V=function(c){Vr(this);let h=[];if(typeof c=="string")OD(this,c)&&(h=h.concat(this.g.get(Vo(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},n.set=function(c,h){return Vr(this),this.i=null,c=Vo(this,c),OD(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},n.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function kD(c,h,p){PD(c,h),0<p.length&&(c.i=null,c.g.set(Vo(c,h),C(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let R=encodeURIComponent(String(m)),j=this.V(m);for(m=0;m<j.length;m++){var b=R;j[m]!==""&&(b+="="+encodeURIComponent(String(j[m]))),c.push(b)}}return this.i=c.join("&")};function Vo(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function gP(c,h){h&&!c.j&&(Vr(c),c.i=null,c.g.forEach(function(p,m){var b=m.toLowerCase();m!=b&&(PD(this,m),kD(this,b,p))},c)),c.j=h}function mP(c,h){let p=new xa;if(a.Image){let m=new Image;m.onload=y(Lr,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(Lr,p,"TestLoadImage: error",!1,h,m),m.onabort=y(Lr,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(Lr,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else h(!1)}function yP(c,h){let p=new xa,m=new AbortController,b=setTimeout(()=>{m.abort(),Lr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:m.signal}).then(R=>{clearTimeout(b),R.ok?Lr(p,"TestPingServer: ok",!0,h):Lr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(b),Lr(p,"TestPingServer: error",!1,h)})}function Lr(c,h,p,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(p)}catch{}}function vP(){this.g=new eP}function _P(c,h,p){let m=p||"";try{MD(c,function(b,R){let j=b;l(b)&&(j=Up(b)),h.push(m+R+"="+encodeURIComponent(j))})}catch(b){throw h.push(m+"type="+encodeURIComponent("_badmap")),b}}function Fa(c){this.l=c.Ub||null,this.j=c.eb||!1}T(Fa,Bp),Fa.prototype.g=function(){return new nl(this.l,this.j)},Fa.prototype.i=function(c){return function(){return c}}({});function nl(c,h){It.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(nl,It),n=nl.prototype,n.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,La(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Va(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,La(this)),this.g&&(this.readyState=3,La(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;FD(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function FD(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?Va(this):La(this),this.readyState==3&&FD(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Va(this))},n.Qa=function(c){this.g&&(this.response=c,Va(this))},n.ga=function(){this.g&&Va(this)};function Va(c){c.readyState=4,c.l=null,c.j=null,c.v=null,La(c)}n.setRequestHeader=function(c,h){this.u.append(c,h)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function La(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function VD(c){let h="";return X(c,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function Zp(c,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=VD(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Re(c,h,p))}function je(c){It.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(je,It);var wP=/^https?$/i,IP=["POST","PUT"];n=je.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hp.g(),this.v=this.o?hD(this.o):hD(Hp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(R){LD(this,R);return}if(c=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)p.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())p.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(R=>R.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(IP,h,void 0))||m||b||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,j]of p)this.g.setRequestHeader(R,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{BD(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){LD(this,R)}};function LD(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,jD(c),rl(c)}function jD(c){c.A||(c.A=!0,Nt(c,"complete"),Nt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Nt(this,"complete"),Nt(this,"abort"),rl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rl(this,!0)),je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?UD(this):this.bb())},n.bb=function(){UD(this)};function UD(c){if(c.h&&typeof s<"u"&&(!c.v[1]||lr(c)!=4||c.Z()!=2)){if(c.u&&lr(c)==4)uD(c.Ea,0,c);else if(Nt(c,"readystatechange"),lr(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=j===0){var b=String(c.D).match(RD)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!wP.test(b?b.toLowerCase():"")}p=m}if(p)Nt(c,"complete"),Nt(c,"success");else{c.m=6;try{var R=2<lr(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",jD(c)}}finally{rl(c)}}}}function rl(c,h){if(c.g){BD(c);let p=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||Nt(c,"ready");try{p.onreadystatechange=m}catch{}}}function BD(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function lr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),XN(h)}};function $D(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function EP(c){let h={};c=(c.g&&2<=lr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(H(c[m]))continue;var p=D(c[m]);let b=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let R=h[b]||[];h[b]=R,R.push(p)}I(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ja(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function qD(c){this.Aa=0,this.i=[],this.j=new xa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ja("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ja("baseRetryDelayMs",5e3,c),this.cb=ja("retryDelaySeedMs",1e4,c),this.Wa=ja("forwardChannelMaxRetries",2,c),this.wa=ja("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new CD(c&&c.concurrentRequestLimit),this.Da=new vP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qD.prototype,n.la=8,n.G=1,n.connect=function(c,h,p,m){Pt(0),this.W=c,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=JD(this,null,this.W),ol(this)};function Jp(c){if(HD(c),c.G==3){var h=c.U++,p=cr(c.I);if(Re(p,"SID",c.K),Re(p,"RID",h),Re(p,"TYPE","terminate"),Ua(c,p),h=new Fr(c,c.j,h),h.L=2,h.v=tl(cr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=XD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Jc(h)}ZD(c)}function il(c){c.g&&(eg(c),c.g.cancel(),c.g=null)}function HD(c){il(c),c.u&&(a.clearTimeout(c.u),c.u=null),sl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ol(c){if(!TD(c.h)&&!c.s){c.s=!0;var h=c.Ga;Da||nD(),Ca||(Da(),Ca=!0),xp.add(h,c),c.B=0}}function DP(c,h){return bD(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ra(g(c.Ga,c,h),YD(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Fr(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),E(R,this.S)):R=this.S),this.m!==null||this.O||(b.H=R,R=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=GD(this,b,h),p=cr(this.I),Re(p,"RID",c),Re(p,"CVER",22),this.D&&Re(p,"X-HTTP-Session-Id",this.D),Ua(this,p),R&&(this.O?h="headers="+encodeURIComponent(String(VD(R)))+"&"+h:this.m&&Zp(p,this.m,R)),Yp(this.h,b),this.Ua&&Re(p,"TYPE","init"),this.P?(Re(p,"$req",h),Re(p,"SID","null"),b.T=!0,Gp(b,p,null)):Gp(b,p,h),this.G=2}}else this.G==3&&(c?zD(this,c):this.i.length==0||TD(this.h)||zD(this))};function zD(c,h){var p;h?p=h.l:p=c.U++;let m=cr(c.I);Re(m,"SID",c.K),Re(m,"RID",p),Re(m,"AID",c.T),Ua(c,m),c.m&&c.o&&Zp(m,c.m,c.o),p=new Fr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=GD(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Yp(c.h,p),Gp(p,m,h)}function Ua(c,h){c.H&&X(c.H,function(p,m){Re(h,m,p)}),c.l&&MD({},function(p,m){Re(h,m,p)})}function GD(c,h,p){p=Math.min(c.i.length,p);var m=c.l?g(c.l.Na,c.l,c):null;e:{var b=c.i;let R=-1;for(;;){let j=["count="+p];R==-1?0<p?(R=b[0].g,j.push("ofs="+R)):R=0:j.push("ofs="+R);let be=!0;for(let ht=0;ht<p;ht++){let Ie=b[ht].g,Et=b[ht].map;if(Ie-=R,0>Ie)R=Math.max(0,b[ht].g-100),be=!1;else try{_P(Et,j,"req"+Ie+"_")}catch{m&&m(Et)}}if(be){m=j.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,m}function WD(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;Da||nD(),Ca||(Da(),Ca=!0),xp.add(h,c),c.v=0}}function Xp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ra(g(c.Fa,c),YD(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,KD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ra(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),il(this),KD(this))};function eg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function KD(c){c.g=new Fr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=cr(c.qa);Re(h,"RID","rpc"),Re(h,"SID",c.K),Re(h,"AID",c.T),Re(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(h,"TO",c.ja),Re(h,"TYPE","xmlhttp"),Ua(c,h),c.m&&c.o&&Zp(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=tl(cr(h)),p.m=null,p.P=!0,ID(p,c)}n.Za=function(){this.C!=null&&(this.C=null,il(this),Xp(this),Pt(19))};function sl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function QD(c,h){var p=null;if(c.g==h){sl(c),eg(c),c.g=null;var m=2}else if(Qp(c.h,h))p=h.D,AD(c.h,h),m=1;else return;if(c.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var b=c.B;m=Qc(),Nt(m,new yD(m,p)),ol(c)}else WD(c);else if(b=h.s,b==3||b==0&&0<h.X||!(m==1&&DP(c,h)||m==2&&Xp(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),b){case 1:ki(c,5);break;case 4:ki(c,10);break;case 3:ki(c,6);break;default:ki(c,2)}}}function YD(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function ki(c,h){if(c.j.info("Error code "+h),h==2){var p=g(c.fb,c),m=c.Xa;let b=!m;m=new Oi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Xc(m,"https"),tl(m),b?mP(m.toString(),p):yP(m.toString(),p)}else Pt(2);c.G=0,c.l&&c.l.sa(h),ZD(c),HD(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function ZD(c){if(c.G=0,c.ka=[],c.l){let h=SD(c.h);(h.length!=0||c.i.length!=0)&&(A(c.ka,h),A(c.ka,c.i),c.h.i.length=0,C(c.i),c.i.length=0),c.l.ra()}}function JD(c,h,p){var m=p instanceof Oi?cr(p):new Oi(p);if(m.g!="")h&&(m.g=h+"."+m.g),el(m,m.s);else{var b=a.location;m=b.protocol,h=h?h+"."+b.hostname:b.hostname,b=+b.port;var R=new Oi(null);m&&Xc(R,m),h&&(R.g=h),b&&el(R,b),p&&(R.l=p),m=R}return p=c.D,h=c.ya,p&&h&&Re(m,p,h),Re(m,"VER",c.la),Ua(c,m),m}function XD(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new je(new Fa({eb:p})):new je(c.pa),h.Ha(c.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eC(){}n=eC.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function al(){}al.prototype.g=function(c,h){return new Yt(c,h)};function Yt(c,h){It.call(this),this.g=new qD(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!H(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!H(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new Lo(this)}T(Yt,It),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Jp(this.g)},Yt.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Up(c),c=p);h.i.push(new sP(h.Ya++,c)),h.G==3&&ol(h)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Jp(this.g),delete this.g,Yt.aa.N.call(this)};function tC(c){$p.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}T(tC,$p);function nC(){qp.call(this),this.status=1}T(nC,qp);function Lo(c){this.g=c}T(Lo,eC),Lo.prototype.ua=function(){Nt(this.g,"a")},Lo.prototype.ta=function(c){Nt(this.g,new tC(c))},Lo.prototype.sa=function(c){Nt(this.g,new nC)},Lo.prototype.ra=function(){Nt(this.g,"b")},al.prototype.createWebChannel=al.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,p_=br.createWebChannelTransport=function(){return new al},f_=br.getStatEventTarget=function(){return Qc()},h_=br.Event=Ni,Zh=br.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yc.NO_ERROR=0,Yc.TIMEOUT=8,Yc.HTTP_ERROR=6,ec=br.ErrorCode=Yc,vD.COMPLETE="complete",d_=br.EventType=vD,fD.EventType=Sa,Sa.OPEN="a",Sa.CLOSE="b",Sa.ERROR="c",Sa.MESSAGE="d",It.prototype.listen=It.prototype.K,Ns=br.WebChannel=fD,pq=br.FetchXmlHttpFactory=Fa,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,l_=br.XhrIo=je}).apply(typeof Yh<"u"?Yh:typeof self<"u"?self:typeof window<"u"?window:{});var TM="@firebase/firestore";var tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");var ca="10.14.0";var vi=new dl("@firebase/firestore");function Vs(){return vi.logLevel}function _I(n){vi.setLogLevel(n)}function k(n,...e){if(vi.logLevel<=Vn.DEBUG){let t=e.map(wI);vi.debug(`Firestore (${ca}): ${n}`,...t)}}function Ge(n,...e){if(vi.logLevel<=Vn.ERROR){let t=e.map(wI);vi.error(`Firestore (${ca}): ${n}`,...t)}}function Rn(n,...e){if(vi.logLevel<=Vn.WARN){let t=e.map(wI);vi.warn(`Firestore (${ca}): ${n}`,...t)}}function wI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: `+n;throw Ge(e),new Error(e)}function Q(n,e){n||z()}function SR(n,e){n||z()}function B(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends cC{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var st=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var uf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},w_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tt.UNAUTHENTICATED))}shutdown(){}},I_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},E_=class{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Q(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new st;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new st,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new st)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q(typeof r.accessToken=="string"),new uf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new tt(e)}},D_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},C_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new D_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},T_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},b_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Q(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Q(typeof t.token=="string"),this.R=t.token,new T_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function gq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var cf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=gq(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function oe(n,e){return n<e?-1:n>e?1:0}function Gs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function MR(n){return n+"\0"}var Ve=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new O(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ve(0,0))}static max(){return new n(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var lf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ve=class n extends lf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},mq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,We=class n extends lf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return mq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new O(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ve.fromString(e))}static fromName(e){return new n(ve.fromString(e).popFirst(5))}static empty(){return new n(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ve(e.slice()))}};var Ws=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function A_(n){return n.fields.find(e=>e.kind===2)}function co(n){return n.fields.filter(e=>e.kind!==2)}Ws.UNKNOWN_ID=-1;var qs=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var hc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,hn.min())}};function RR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ve(t+1,0):new Ve(t,r));return new hn(i,$.empty(),e)}function xR(n){return new hn(n.readTime,n.key,-1)}var hn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),$.empty(),-1)}static max(){return new n(ee.max(),$.empty(),-1)}};function II(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:oe(n.largestBatchId,e.largestBatchId))}var NR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",df=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Si(n){return N(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==NR)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var hf=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new st,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new mo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=EI(r.target.error);this.V.reject(new mo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new mo(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new M_(t)}},_i=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Ba())===12.2&&Ge("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),lo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ll())return!1;if(n.v())return!0;let e=Ba(),t=n.S(e),r=0<t&&t<10,i=PR(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new mo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new O(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new O(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new mo(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=hf.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),M.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function PR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var S_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return lo(this.B.delete())}},mo=class extends O{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Mi(n){return n.name==="IndexedDbTransactionError"}var M_=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),lo(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),lo(this.store.add(e))}get(e){return lo(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),lo(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),lo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new M((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new M((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new M((r,i)=>{t.onerror=o=>{let s=EI(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new M((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new S_(a),l=t(a.primaryKey,a.value,u);if(l instanceof M){let d=l.catch(f=>(u.done(),M.reject(f)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function lo(n){return new M((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=EI(r.target.error);t(i)}})}var bM=!1;function EI(n){let e=_i.S(Ba());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bM||(bM=!0,setTimeout(()=>{throw r},0)),r}}return n}var R_=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Mi(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Si(t)}yield this.X(6e4)}))}},x_=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return M.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=xR(o);II(s,r)>0&&(r=s)}),new hn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var nn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Pc(n){return n==null}function fc(n){return n===0&&1/n==-1/0}function OR(n){return typeof n=="number"&&Number.isInteger(n)&&!fc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Bt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=AM(e)),e=yq(n.get(t),e);return AM(e)}function yq(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function AM(n){return n+""}function Jn(n){let e=n.length;if(Q(e>=2),e===2)return Q(n.charAt(0)===""&&n.charAt(1)===""),ve.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ve(r)}var SM=["userId","batchId"];function nf(n,e){return[n,Bt(e)]}function kR(n,e,t){return[n,Bt(e),t]}var vq={},_q=["prefixPath","collectionGroup","readTime","documentId"],wq=["prefixPath","collectionGroup","documentId"],Iq=["collectionGroup","readTime","prefixPath","documentId"],Eq=["canonicalId","targetId"],Dq=["targetId","path"],Cq=["path","targetId"],Tq=["collectionId","parent"],bq=["indexId","uid"],Aq=["uid","sequenceNumber"],Sq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Mq=["indexId","uid","orderedDocumentKey"],Rq=["userId","collectionPath","documentId"],xq=["userId","collectionPath","largestBatchId"],Nq=["userId","collectionGroup","largestBatchId"],FR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Pq=[...FR,"documentOverlays"],VR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LR=VR,DI=[...LR,"indexConfiguration","indexState","indexEntries"],Oq=DI,kq=[...DI,"globals"];var pc=class extends df{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function at(n,e){let t=B(n);return _i.F(t._e,e)}function MM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function So(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ne=class n{constructor(e,t){this.comparator=e,this.root=t||er.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,er.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,er.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $s(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $s(this.root,e,this.comparator,!1)}getReverseIterator(){return new $s(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $s(this.root,e,this.comparator,!0)}},$s=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},er=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};er.EMPTY=null,er.RED=!0,er.BLACK=!1;er.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new er(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Se=class n{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ff(this.data.getIterator())}getIteratorFrom(e){return new ff(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ff=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ps(n){return n.hasNext()?n.getNext():void 0}var rn=class n{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new n([])}unionWith(e){let t=new Se(We.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var pf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function UR(){return typeof atob<"u"}var Qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new pf("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qe.EMPTY_BYTE_STRING=new Qe("");var Fq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mr(n){if(Q(!!n),typeof n=="string"){let e=0,t=Fq.exec(n);if(Q(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(n.seconds),nanos:Oe(n.nanos)}}function Oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wi(n){return typeof n=="string"?Qe.fromBase64String(n):Qe.fromUint8Array(n)}function op(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function CI(n){let e=n.mapValue.fields.__previous_value__;return op(e)?CI(e):e}function gc(n){let e=Mr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}var N_=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Ii=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var mi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rf={nullValue:"NULL_VALUE"};function yo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?op(n)?4:BR(n)?9007199254740991:sp(n)?10:11:z()}function rr(n,e){if(n===e)return!0;let t=yo(n);if(t!==yo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gc(n).isEqual(gc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Mr(i.timestampValue),a=Mr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return wi(i.bytesValue).isEqual(wi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Oe(i.geoPointValue.latitude)===Oe(o.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Oe(i.integerValue)===Oe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Oe(i.doubleValue),a=Oe(o.doubleValue);return s===a?fc(s)===fc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Gs(n.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(MM(s)!==MM(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!rr(s[u],a[u])))return!1;return!0}(n,e);default:return z()}}function mc(n,e){return(n.values||[]).find(t=>rr(t,e))!==void 0}function Ei(n,e){if(n===e)return 0;let t=yo(n),r=yo(e);if(t!==r)return oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Oe(o.integerValue||o.doubleValue),u=Oe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return RM(n.timestampValue,e.timestampValue);case 4:return RM(gc(n),gc(e));case 5:return oe(n.stringValue,e.stringValue);case 6:return function(o,s){let a=wi(o),u=wi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let d=oe(a[l],u[l]);if(d!==0)return d}return oe(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=oe(Oe(o.latitude),Oe(s.latitude));return a!==0?a:oe(Oe(o.longitude),Oe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return xM(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,d;let f=o.fields||{},g=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,T=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=oe(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=T?.values)===null||d===void 0?void 0:d.length)||0);return C!==0?C:xM(y,T)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===mi.mapValue&&s===mi.mapValue)return 0;if(o===mi.mapValue)return 1;if(s===mi.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},d=Object.keys(l);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){let g=oe(u[f],d[f]);if(g!==0)return g;let y=Ei(a[u[f]],l[d[f]]);if(y!==0)return y}return oe(u.length,d.length)}(n.mapValue,e.mapValue);default:throw z()}}function RM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return oe(n,e);let t=Mr(n),r=Mr(e),i=oe(t.seconds,r.seconds);return i!==0?i:oe(t.nanos,r.nanos)}function xM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ei(t[i],r[i]);if(o)return o}return oe(t.length,r.length)}function Ks(n){return P_(n)}function P_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Mr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return wi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=P_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${P_(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function vo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function O_(n){return!!n&&"integerValue"in n}function yc(n){return!!n&&"arrayValue"in n}function NM(n){return!!n&&"nullValue"in n}function PM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function of(n){return!!n&&"mapValue"in n}function sp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ac(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return So(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ac(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ac(n.arrayValue.values[t]);return e}return Object.assign({},n)}function BR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var $R={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Vq(n){return"nullValue"in n?rf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vo(Ii.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?sp(n)?$R:{mapValue:{}}:z()}function Lq(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vo(Ii.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?$R:"mapValue"in n?sp(n)?{mapValue:{}}:mi:z()}function OM(n,e){let t=Ei(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kM(n,e){let t=Ei(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var xt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ac(t)}setAll(e){let t=We.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ac(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];of(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){So(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ac(this.value))}};function qR(n){let e=[];return So(n.fields,(t,r)=>{let i=new We([t]);if(of(r)){let o=qR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new rn(e)}var nt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),xt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),xt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),xt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ir=class{constructor(e,t){this.position=e,this.inclusive=t}};function FM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Ei(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function VM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!rr(n.position[t],e.position[t]))return!1;return!0}var _o=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function jq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var gf=class{},me=class n extends gf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new V_(e,t,r):t==="array-contains"?new U_(e,r):t==="in"?new mf(e,r):t==="not-in"?new B_(e,r):t==="array-contains-any"?new $_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new L_(e,r):new j_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ei(t,this.value)):t!==null&&yo(this.value)===yo(t)&&this.matchesComparison(Ei(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class n extends gf{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Qs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Qs(n){return n.op==="and"}function k_(n){return n.op==="or"}function TI(n){return HR(n)&&Qs(n)}function HR(n){for(let e of n.filters)if(e instanceof Te)return!1;return!0}function F_(n){if(n instanceof me)return n.field.canonicalString()+n.op.toString()+Ks(n.value);if(TI(n))return n.filters.map(e=>F_(e)).join(",");{let e=n.filters.map(t=>F_(t)).join(",");return`${n.op}(${e})`}}function zR(n,e){return n instanceof me?function(r,i){return i instanceof me&&r.op===i.op&&r.field.isEqual(i.field)&&rr(r.value,i.value)}(n,e):n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&zR(s,i.filters[a]),!0):!1}(n,e):void z()}function GR(n,e){let t=n.filters.concat(e);return Te.create(t,n.op)}function WR(n){return n instanceof me?function(t){return`${t.field.canonicalString()} ${t.op} ${Ks(t.value)}`}(n):n instanceof Te?function(t){return t.op.toString()+" {"+t.getFilters().map(WR).join(" ,")+"}"}(n):"Filter"}var V_=class extends me{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},L_=class extends me{constructor(e,t){super(e,"in",t),this.keys=KR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},j_=class extends me{constructor(e,t){super(e,"not-in",t),this.keys=KR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function KR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var U_=class extends me{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return yc(t)&&mc(t.arrayValue,this.value)}},mf=class extends me{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&mc(this.value.arrayValue,t)}},B_=class extends me{constructor(e,t){super(e,"not-in",t)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!mc(this.value.arrayValue,t)}},$_=class extends me{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!yc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mc(this.value.arrayValue,r))}};var q_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function H_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new q_(n,e,t,r,i,o,s)}function wo(n){let e=B(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>F_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Pc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ks(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ks(r)).join(",")),e.ue=t}return e.ue}function Oc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VM(n.startAt,e.startAt)&&VM(n.endAt,e.endAt)}function yf(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function vf(n,e){return n.filters.filter(t=>t instanceof me&&t.field.isEqual(e))}function LM(n,e,t){let r=rf,i=!0;for(let o of vf(n,e)){let s=rf,a=!0;switch(o.op){case"<":case"<=":s=Vq(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=rf}OM({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];OM({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function jM(n,e,t){let r=mi,i=!0;for(let o of vf(n,e)){let s=mi,a=!0;switch(o.op){case">=":case">":s=Lq(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=mi}kM({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];kM({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var xn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function QR(n,e,t,r,i,o,s,a){return new xn(n,e,t,r,i,o,s,a)}function la(n){return new xn(n)}function UM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bI(n){return n.collectionGroup!==null}function Hs(n){let e=B(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Se(We.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new _o(o,r))}),t.has(We.keyField().canonicalString())||e.ce.push(new _o(We.keyField(),r))}return e.ce}function $t(n){let e=B(n);return e.le||(e.le=Uq(e,Hs(n))),e.le}function Uq(n,e){if(n.limitType==="F")return H_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new _o(i.field,o)});let t=n.endAt?new ir(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ir(n.startAt.position,n.startAt.inclusive):null;return H_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function z_(n,e){let t=n.filters.concat([e]);return new xn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _f(n,e,t){return new xn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kc(n,e){return Oc($t(n),$t(e))&&n.limitType===e.limitType}function YR(n){return`${wo($t(n))}|lt:${n.limitType}`}function Ls(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>WR(i)).join(", ")}]`),Pc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ks(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ks(i)).join(",")),`Target(${r})`}($t(n))}; limitType=${n.limitType})`}function Fc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Hs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=FM(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Hs(r),i)||r.endAt&&!function(s,a,u){let l=FM(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Hs(r),i))}(n,e)}function ZR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JR(n){return(e,t)=>{let r=!1;for(let i of Hs(n)){let o=Bq(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Bq(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ei(u,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var or=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return jR(this.inner)}size(){return this.innerSize}};var $q=new Ne($.comparator);function Qt(){return $q}var XR=new Ne($.comparator);function oc(...n){let e=XR;for(let t of n)e=e.insert(t.key,t);return e}function ex(n){let e=XR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xn(){return uc()}function tx(){return uc()}function uc(){return new or(n=>n.toString(),(n,e)=>n.isEqual(e))}var qq=new Ne($.comparator),Hq=new Se($.comparator);function ae(...n){let e=Hq;for(let t of n)e=e.add(t);return e}var zq=new Se(oe);function AI(){return zq}function SI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function nx(n){return{integerValue:""+n}}function rx(n,e){return OR(e)?nx(e):SI(n,e)}var Ys=class{constructor(){this._=void 0}};function Gq(n,e,t){return n instanceof Di?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&op(o)&&(o=CI(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Rr?ox(n,e):n instanceof xr?sx(n,e):function(i,o){let s=ix(i,o),a=BM(s)+BM(i.Pe);return O_(s)&&O_(i.Pe)?nx(a):SI(i.serializer,a)}(n,e)}function Wq(n,e,t){return n instanceof Rr?ox(n,e):n instanceof xr?sx(n,e):t}function ix(n,e){return n instanceof Ci?function(r){return O_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Di=class extends Ys{},Rr=class extends Ys{constructor(e){super(),this.elements=e}};function ox(n,e){let t=ax(e);for(let r of n.elements)t.some(i=>rr(i,r))||t.push(r);return{arrayValue:{values:t}}}var xr=class extends Ys{constructor(e){super(),this.elements=e}};function sx(n,e){let t=ax(e);for(let r of n.elements)t=t.filter(i=>!rr(i,r));return{arrayValue:{values:t}}}var Ci=class extends Ys{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function BM(n){return Oe(n.integerValue||n.doubleValue)}function ax(n){return yc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Io=class{constructor(e,t){this.field=e,this.transform=t}};function Kq(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Rr&&i instanceof Rr||r instanceof xr&&i instanceof xr?Gs(r.elements,i.elements,rr):r instanceof Ci&&i instanceof Ci?rr(r.Pe,i.Pe):r instanceof Di&&i instanceof Di}(n.transform,e.transform)}var G_=class{constructor(e,t){this.version=e,this.transformResults=t}},qe=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function sf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Zs=class{};function ux(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new bi(n.key,qe.none()):new Ti(n.key,n.data,qe.none());{let t=n.data,r=xt.empty(),i=new Se(We.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Nn(n.key,r,new rn(i.toArray()),qe.none())}}function Qq(n,e,t){n instanceof Ti?function(i,o,s){let a=i.value.clone(),u=qM(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Nn?function(i,o,s){if(!sf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=qM(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(cx(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function cc(n,e,t,r){return n instanceof Ti?function(o,s,a,u){if(!sf(o.precondition,s))return a;let l=o.value.clone(),d=HM(o.fieldTransforms,u,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Nn?function(o,s,a,u){if(!sf(o.precondition,s))return a;let l=HM(o.fieldTransforms,u,s),d=s.data;return d.setAll(cx(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return sf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function Yq(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=ix(r.transform,i||null);o!=null&&(t===null&&(t=xt.empty()),t.set(r.field,o))}return t||null}function $M(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gs(r,i,(o,s)=>Kq(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ti=class extends Zs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Nn=class extends Zs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function cx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function qM(n,e,t){let r=new Map;Q(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Wq(s,a,t[i]))}return r}function HM(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Gq(o,s,e))}return r}var bi=class extends Zs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},vc=class extends Zs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var _c=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Qq(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=cc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=cc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=tx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=ux(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ae())}isEqual(e){return this.batchId===e.batchId&&Gs(this.mutations,e.mutations,(t,r)=>$M(t,r))&&Gs(this.baseMutations,e.baseMutations,(t,r)=>$M(t,r))}},W_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Q(e.mutations.length===r.length);let i=function(){return qq}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var wc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var K_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Xe,ye;function lx(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function dx(n){if(n===void 0)return Ge("GRPC error has no .code"),x.UNKNOWN;switch(n){case Xe.OK:return x.OK;case Xe.CANCELLED:return x.CANCELLED;case Xe.UNKNOWN:return x.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return x.INTERNAL;case Xe.UNAVAILABLE:return x.UNAVAILABLE;case Xe.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Xe.NOT_FOUND:return x.NOT_FOUND;case Xe.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Xe.ABORTED:return x.ABORTED;case Xe.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Xe.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(ye=Xe||(Xe={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var zM=null;function hx(){return new TextEncoder}var Zq=new di([4294967295,4294967295],0);function GM(n){let e=hx().encode(n),t=new c_;return t.update(e),new Uint8Array(t.digest())}function WM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new di([t,r],0),new di([i,o],0)]}var Q_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new go(`Invalid padding: ${t}`);if(r<0)throw new go(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new go(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new go(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=di.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(di.fromNumber(r)));return i.compare(Zq)===1&&(i=new di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=GM(e),[r,i]=WM(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=GM(e),[r,i]=WM(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},go=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ic=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ee.min(),i,new Ne(oe),Qt(),ae())}},Ec=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ae(),ae(),ae())}};var zs=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},wf=class{constructor(e,t){this.targetId=e,this.me=t}},If=class{constructor(e,t,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ef=class{constructor(){this.fe=0,this.ge=QM(),this.pe=Qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),t=ae(),r=ae();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new Ec(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=QM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Y_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qt(),this.qe=KM(),this.Qe=new Ne(oe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(yf(o))if(r===0){let s=new $(o.path);this.Ue(t,s,nt.newNoDocument(s,ee.min()))}else Q(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}zM?.et(function(d,f,g,y,T){var C,A,F,H,P,K;let te={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},X=f.unchangedNames;return X&&(te.bloomFilter={applied:T===0,hashCount:(C=X?.hashCount)!==null&&C!==void 0?C:0,bitmapLength:(H=(F=(A=X?.bits)===null||A===void 0?void 0:A.bitmap)===null||F===void 0?void 0:F.length)!==null&&H!==void 0?H:0,padding:(K=(P=X?.bits)===null||P===void 0?void 0:P.padding)!==null&&K!==void 0?K:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),te}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=wi(r).toUint8Array()}catch(u){if(u instanceof pf)return Rn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Q_(s,i,o)}catch(u){return Rn(u instanceof go?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&yf(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,nt.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ae();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Ic(e,t,this.Qe,this.ke,r);return this.ke=Qt(),this.qe=KM(),this.Qe=new Ne(oe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ef,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Se(oe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ef),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function KM(){return new Ne($.comparator)}function QM(){return new Ne($.comparator)}var Jq={asc:"ASCENDING",desc:"DESCENDING"},Xq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},e4={and:"AND",or:"OR"},Z_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function J_(n,e){return n.useProto3Json||Pc(e)?e:{value:e}}function Js(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function t4(n,e){return Js(n,e.toTimestamp())}function Ke(n){return Q(!!n),ee.fromTimestamp(function(t){let r=Mr(t);return new Ve(r.seconds,r.nanos)}(n))}function MI(n,e){return X_(n,e).canonicalString()}function X_(n,e){let t=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function px(n){let e=ve.fromString(n);return Q(Cx(e)),e}function Dc(n,e){return MI(n.databaseId,e.path)}function tr(n,e){let t=px(e);if(t.get(1)!==n.databaseId.projectId)throw new O(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(yx(t))}function gx(n,e){return MI(n.databaseId,e)}function mx(n){let e=px(n);return e.length===4?ve.emptyPath():yx(e)}function ew(n){return new ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yx(n){return Q(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function YM(n,e,t){return{name:Dc(n,e),fields:t.value.mapValue.fields}}function vx(n,e,t){let r=tr(n,e.name),i=Ke(e.updateTime),o=e.createTime?Ke(e.createTime):ee.min(),s=new xt({mapValue:{fields:e.fields}}),a=nt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function n4(n,e){return"found"in e?function(r,i){Q(!!i.found),i.found.name,i.found.updateTime;let o=tr(r,i.found.name),s=Ke(i.found.updateTime),a=i.found.createTime?Ke(i.found.createTime):ee.min(),u=new xt({mapValue:{fields:i.found.fields}});return nt.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Q(!!i.missing),Q(!!i.readTime);let o=tr(r,i.missing),s=Ke(i.readTime);return nt.newNoDocument(o,s)}(n,e):z()}function r4(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(Q(d===void 0||typeof d=="string"),Qe.fromBase64String(d||"")):(Q(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Qe.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?x.UNKNOWN:dx(l.code);return new O(d,l.message||"")}(s);t=new If(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=tr(n,r.document.name),o=Ke(r.document.updateTime),s=r.document.createTime?Ke(r.document.createTime):ee.min(),a=new xt({mapValue:{fields:r.document.fields}}),u=nt.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new zs(l,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=tr(n,r.document),o=r.readTime?Ke(r.readTime):ee.min(),s=nt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new zs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=tr(n,r.document),o=r.removedTargetIds||[];t=new zs([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new K_(i,o),a=r.targetId;t=new wf(a,s)}}return t}function Cc(n,e){let t;if(e instanceof Ti)t={update:YM(n,e.key,e.value)};else if(e instanceof bi)t={delete:Dc(n,e.key)};else if(e instanceof Nn)t={update:YM(n,e.key,e.data),updateMask:c4(e.fieldMask)};else{if(!(e instanceof vc))return z();t={verify:Dc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Di)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ci)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:t4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function tw(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?qe.updateTime(Ke(o.updateTime)):o.exists!==void 0?qe.exists(o.exists):qe.none()}(e.currentDocument):qe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Q(a.setToServerValue==="REQUEST_TIME"),u=new Di;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new Rr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new xr(d)}else"increment"in a?u=new Ci(s,a.increment):z();let l=We.fromServerFormat(a.fieldPath);return new Io(l,u)}(n,i)):[];if(e.update){e.update.name;let i=tr(n,e.update.name),o=new xt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new rn(l.map(d=>We.fromServerFormat(d)))}(e.updateMask);return new Nn(i,o,s,t,r)}return new Ti(i,o,t,r)}if(e.delete){let i=tr(n,e.delete);return new bi(i,t)}if(e.verify){let i=tr(n,e.verify);return new vc(i,t)}return z()}function i4(n,e){return n&&n.length>0?(Q(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ke(i.updateTime):Ke(o);return s.isEqual(ee.min())&&(s=Ke(o)),new G_(s,i.transformResults||[])}(t,e))):[]}function _x(n,e){return{documents:[gx(n,e.path)]}}function wx(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gx(n,i);let o=function(l){if(l.length!==0)return Dx(Te.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:js(g.field),direction:s4(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=J_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function Ix(n){let e=mx(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Q(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=Ex(f);return g instanceof Te&&TI(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(T){return new _o(Us(T.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Pc(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(f){let g=!!f.before,y=f.values||[];return new ir(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new ir(y,g)}(t.endAt)),QR(e,i,s,o,a,"F",u,l)}function o4(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ex(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Us(t.unaryFilter.field);return me.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Us(t.unaryFilter.field);return me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Us(t.unaryFilter.field);return me.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Us(t.unaryFilter.field);return me.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return me.create(Us(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Te.create(t.compositeFilter.filters.map(r=>Ex(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function s4(n){return Jq[n]}function a4(n){return Xq[n]}function u4(n){return e4[n]}function js(n){return{fieldPath:n.canonicalString()}}function Us(n){return We.fromServerFormat(n.fieldPath)}function Dx(n){return n instanceof me?function(t){if(t.op==="=="){if(PM(t.value))return{unaryFilter:{field:js(t.field),op:"IS_NAN"}};if(NM(t.value))return{unaryFilter:{field:js(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(PM(t.value))return{unaryFilter:{field:js(t.field),op:"IS_NOT_NAN"}};if(NM(t.value))return{unaryFilter:{field:js(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:js(t.field),op:a4(t.op),value:t.value}}}(n):n instanceof Te?function(t){let r=t.getFilters().map(i=>Dx(i));return r.length===1?r[0]:{compositeFilter:{op:u4(t.op),filters:r}}}(n):z()}function c4(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Cx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Xs=class n{constructor(e,t,r,i,o=ee.min(),s=ee.min(),a=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Df=class{constructor(e){this.ct=e}};function l4(n,e){let t;if(e.document)t=vx(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Do(e.noDocument.readTime);t=nt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=Do(e.unknownDocument.version);t=nt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ve(i[0],i[1]);return ee.fromTimestamp(o)}(e.readTime)),t}function ZM(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Cf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Dc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Js(o,s.version.toTimestamp()),createTime:Js(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Eo(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:Eo(e.version)}}return r}function Cf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Eo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Do(n){let e=new Ve(n.seconds,n.nanoseconds);return ee.fromTimestamp(e)}function ho(n,e){let t=(e.baseMutations||[]).map(o=>tw(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>tw(n.ct,o)),i=Ve.fromMillis(e.localWriteTimeMs);return new _c(e.batchId,i,t,r)}function sc(n){let e=Do(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Do(n.lastLimboFreeSnapshotVersion):ee.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Q(o.documents.length===1),$t(la(mx(o.documents[0])))}(n.query):function(o){return $t(Ix(o))}(n.query),new Xs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qe.fromBase64String(n.resumeToken))}function Tx(n,e){let t=Eo(e.snapshotVersion),r=Eo(e.lastLimboFreeSnapshotVersion),i;i=yf(e.target)?_x(n.ct,e.target):wx(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function RI(n){let e=Ix({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_f(e,e.limit,"L"):e}function g_(n,e){return new wc(e.largestBatchId,tw(n.ct,e.overlayMutation))}function JM(n,e){let t=e.path.lastSegment();return[n,Bt(e.path.popLast()),t]}function XM(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Eo(r.readTime),documentKey:Bt(r.documentKey.path),largestBatchId:r.largestBatchId}}var nw=class{getBundleMetadata(e,t){return eR(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Do(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return eR(e).put(function(i){return{bundleId:i.id,createTime:Eo(Ke(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return tR(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:RI(o.bundledQuery),readTime:Do(o.readTime)}}(r)})}saveNamedQuery(e,t){return tR(e).put(function(i){return{name:i.name,readTime:Eo(Ke(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function eR(n){return at(n,"bundles")}function tR(n){return at(n,"namedQueries")}var Tf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return tc(e).get(JM(this.userId,t)).next(r=>r?g_(this.serializer,r):null)}getOverlays(e,t){let r=Xn();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new wc(t,s);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Bt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(tc(e).j("collectionPathOverlayIndex",a))}),M.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Xn(),o=Bt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return tc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=g_(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Xn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,d)=>{let f=g_(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,t){return tc(e).put(function(i,o,s){let[a,u,l]=JM(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Cc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function tc(n){return at(n,"documentOverlays")}var rw=class{Pt(e){return at(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Qe.fromUint8Array(r):Qe.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Ar=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),fc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Mr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(wi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?BR(e)?this.dt(t,Number.MAX_SAFE_INTEGER):sp(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Oe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Ar.vt=new Ar;function d4(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function nR(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=d4(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var iw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=nR(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=nR(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},ow=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},sw=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},fo=class{constructor(){this.jt=new iw,this.Ht=new ow(this.jt),this.Jt=new sw(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var po=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function hi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=rR(n.arrayValue,e.arrayValue),t!==0?t:(t=rR(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function rR(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var bf=class{constructor(e){this.Xt=new Se((t,r)=>We.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Q(e.collectionGroup===this.collectionId),this.nn)return!1;let t=A_(e);if(t!==void 0&&!this.sn(t))return!1;let r=co(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Se(We.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new qs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new qs(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new qs(r.field,r.dir==="asc"?0:1)));return new Ws(Ws.UNKNOWN_ID,this.collectionId,t,hc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function bx(n){var e,t;if(Q(n instanceof me||n instanceof Te),n instanceof me){if(n instanceof mf){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>me.create(n.field,"==",o)))||[];return Te.create(i,"or")}return n}let r=n.filters.map(i=>bx(i));return Te.create(r,n.op)}function h4(n){if(n.getFilters().length===0)return[];let e=cw(bx(n));return Q(Ax(e)),aw(e)||uw(e)?[e]:e.getFilters()}function aw(n){return n instanceof me}function uw(n){return n instanceof Te&&TI(n)}function Ax(n){return aw(n)||uw(n)||function(t){if(t instanceof Te&&k_(t)){for(let r of t.getFilters())if(!aw(r)&&!uw(r))return!1;return!0}return!1}(n)}function cw(n){if(Q(n instanceof me||n instanceof Te),n instanceof me)return n;if(n.filters.length===1)return cw(n.filters[0]);let e=n.filters.map(r=>cw(r)),t=Te.create(e,n.op);return t=Af(t),Ax(t)?t:(Q(t instanceof Te),Q(Qs(t)),Q(t.filters.length>1),t.filters.reduce((r,i)=>xI(r,i)))}function xI(n,e){let t;return Q(n instanceof me||n instanceof Te),Q(e instanceof me||e instanceof Te),t=n instanceof me?e instanceof me?function(i,o){return Te.create([i,o],"and")}(n,e):iR(n,e):e instanceof me?iR(e,n):function(i,o){if(Q(i.filters.length>0&&o.filters.length>0),Qs(i)&&Qs(o))return GR(i,o.getFilters());let s=k_(i)?i:o,a=k_(i)?o:i,u=s.filters.map(l=>xI(l,a));return Te.create(u,"or")}(n,e),Af(t)}function iR(n,e){if(Qs(e))return GR(e,n.getFilters());{let t=e.filters.map(r=>xI(n,r));return Te.create(t,"or")}}function Af(n){if(Q(n instanceof me||n instanceof Te),n instanceof me)return n;let e=n.getFilters();if(e.length===1)return Af(e[0]);if(HR(n))return n;let t=e.map(i=>Af(i)),r=[];return t.forEach(i=>{i instanceof me?r.push(i):i instanceof Te&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Te.create(r,n.op)}var lw=class{constructor(){this.un=new Tc}addToCollectionParentIndex(e,t){return this.un.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(hn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(hn.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},Tc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Se(ve.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Se(ve.comparator)).toArray()}};var Jh=new Uint8Array(0),dw=class{constructor(e,t){this.databaseId=t,this.cn=new Tc,this.ln=new or(r=>wo(r),(r,i)=>Oc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Bt(i)};return oR(e).put(o)}return M.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[MR(t),""],!1,!0);return oR(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Jn(s.parent))}return r})}addFieldIndex(e,t){let r=nc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=ks(e);return o.next(a=>{s.put(XM(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=nc(e),i=ks(e),o=Os(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=nc(e),r=Os(e),i=ks(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return M.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new bf(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Os(e),i=!0,o=new Map;return M.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ae(),a=[];return M.forEach(o,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`}(u)} to execute ${wo(t)}`);let d=function(P,K){let te=A_(K);if(te===void 0)return null;for(let X of vf(P,te.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null}(l,u),f=function(P,K){let te=new Map;for(let X of co(K))for(let I of vf(P,X.fieldPath))switch(I.op){case"==":case"in":te.set(X.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return te.set(X.fieldPath.canonicalString(),I.value),Array.from(te.values())}return null}(l,u),g=function(P,K){let te=[],X=!0;for(let I of co(K)){let v=I.kind===0?LM(P,I.fieldPath,P.startAt):jM(P,I.fieldPath,P.startAt);te.push(v.value),X&&(X=v.inclusive)}return new ir(te,X)}(l,u),y=function(P,K){let te=[],X=!0;for(let I of co(K)){let v=I.kind===0?jM(P,I.fieldPath,P.endAt):LM(P,I.fieldPath,P.endAt);te.push(v.value),X&&(X=v.inclusive)}return new ir(te,X)}(l,u),T=this.In(u,l,g),C=this.In(u,l,y),A=this.Tn(u,l,f),F=this.En(u.indexId,d,T,g.inclusive,C,y.inclusive,A);return M.forEach(F,H=>r.G(H,t.limit).next(P=>{P.forEach(K=>{let te=$.fromSegments(K.documentKey);s.has(te)||(s=s.add(te),a.push(te))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=h4(Te.create(e.filters,"and")).map(r=>H_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),d=[];for(let f=0;f<u;++f){let g=t?this.dn(t[f/l]):Jh,y=this.An(e,g,r[f%l],i),T=this.Rn(e,g,o[f%l],s),C=a.map(A=>this.An(e,g,A,!0));d.push(...this.createRange(y,T,C))}return d}An(e,t,r,i){let o=new po(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new po(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new bf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return M.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Se(We.comparator),d=!1;for(let f of u.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new fo;for(let i of co(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Ar.vt.It(o,s)}return r.zt()}dn(e){let t=new fo;return Ar.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new fo;return Ar.vt.It(vo(this.databaseId,t),r.Yt(function(o){let s=co(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new fo);let o=0;for(let s of co(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&yc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);Ar.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new fo;u.seed(a.zt()),Ar.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof me&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=nc(e),i=ks(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return M.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(d,f){let g=f?new hc(f.sequenceNumber,new hn(Do(f.readTime),new $(Jn(f.documentKey)),f.largestBatchId)):hc.empty(),y=d.fields.map(([T,C])=>new qs(We.fromServerFormat(T),C));return new Ws(d.indexId,d.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:oe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=nc(e),o=ks(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,u=>o.put(XM(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return M.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?M.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,u=>this.wn(e,i,u).next(l=>{let d=this.Sn(o,u);return l.isEqual(d)?M.resolve():this.bn(e,o,u,l,d)}))))})}Dn(e,t,r,i){return Os(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Os(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Os(e),o=new Se(hi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new po(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Se(hi),i=this.Vn(t,e);if(i==null)return r;let o=A_(t);if(o!=null){let s=e.data.field(o.fieldPath);if(yc(s))for(let a of s.arrayValue.values||[])r=r.add(new po(t.indexId,e.key,this.dn(a),i))}else r=r.add(new po(t.indexId,e.key,Jh,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,d,f,g){let y=u.getIterator(),T=l.getIterator(),C=Ps(y),A=Ps(T);for(;C||A;){let F=!1,H=!1;if(C&&A){let P=d(C,A);P<0?H=!0:P>0&&(F=!0)}else C!=null?H=!0:F=!0;F?(f(A),A=Ps(T)):H?(g(C),C=Ps(y)):(C=Ps(y),A=Ps(T))}}(i,o,hi,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),M.waitFor(s)}yn(e){let t=1;return ks(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>hi(s,a)).filter((s,a,u)=>!a||hi(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=hi(s,e),u=hi(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Jh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Jh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return hi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(sR)}getMinOffset(e,t){return M.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(sR)}};function oR(n){return at(n,"collectionParents")}function Os(n){return at(n,"indexEntries")}function nc(n){return at(n,"indexConfiguration")}function ks(n){return at(n,"indexState")}function sR(n){Q(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;II(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new hn(e.readTime,e.documentKey,t)}var aR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Sx(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(u.next(()=>{Q(a===1)}));let l=[];for(let d of t.mutations){let f=kR(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return M.waitFor(o).next(()=>l)}function Sf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(41943040,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);var Mf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Q(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fi(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Bs(e),s=fi(e);return s.add({}).next(a=>{Q(typeof a=="number");let u=new _c(a,t,r,i),l=function(y,T,C){let A=C.baseMutations.map(H=>Cc(y.ct,H)),F=C.mutations.map(H=>Cc(y.ct,H));return{userId:T,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:A,mutations:F}}(this.serializer,this.userId,u),d=[],f=new Se((g,y)=>oe(g.canonicalString(),y.canonicalString()));for(let g of i){let y=kR(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,vq))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),M.waitFor(d).next(()=>u)})}lookupMutationBatch(e,t){return fi(e).get(t).next(r=>r?(Q(r.userId===this.userId),ho(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?M.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return fi(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Q(a.batchId>=r),o=ho(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return fi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fi(e).U("userMutationsIndex",t).next(r=>r.map(i=>ho(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=nf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Bs(e).J({range:i},(s,a,u)=>{let[l,d,f]=s,g=Jn(d);if(l===this.userId&&t.path.isEqual(g))return fi(e).get(f).next(y=>{if(!y)throw z();Q(y.userId===this.userId),o.push(ho(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Se(oe),i=[];return t.forEach(o=>{let s=nf(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Bs(e).J({range:a},(l,d,f)=>{let[g,y,T]=l,C=Jn(y);g===this.userId&&o.path.isEqual(C)?r=r.add(T):f.done()});i.push(u)}),M.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=nf(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Se(oe);return Bs(e).J({range:s},(u,l,d)=>{let[f,g,y]=u,T=Jn(g);f===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(y)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(fi(e).get(o).next(s=>{if(s===null)throw z();Q(s.userId===this.userId),r.push(ho(this.serializer,s))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Sx(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Bs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Jn(o[1]);i.push(u)}else a.done()}).next(()=>{Q(i.length===0)})})}containsKey(e,t){return Mx(e,this.userId,t)}Nn(e){return Rx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Mx(n,e,t){let r=nf(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Bs(n).J({range:o,H:!0},(a,u,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function fi(n){return at(n,"mutations")}function Bs(n){return at(n,"documentMutations")}function Rx(n){return at(n,"mutationQueues")}var ea=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var hw=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ea(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ee.fromTimestamp(new Ve(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Q(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Fs(e).J((s,a)=>{let u=sc(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>M.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Fs(e).J((r,i)=>{let o=sc(i);t(o)})}qn(e){return uR(e).get("targetGlobalKey").next(t=>(Q(t!==null),t))}Qn(e,t){return uR(e).put("targetGlobalKey",t)}Kn(e,t){return Fs(e).put(Tx(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=wo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Fs(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=sc(a);Oc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=pi(e);return t.forEach(s=>{let a=Bt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),M.waitFor(i)}removeMatchingKeys(e,t,r){let i=pi(e);return M.forEach(t,o=>{let s=Bt(o.path);return M.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=pi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=pi(e),o=ae();return i.J({range:r,H:!0},(s,a,u)=>{let l=Jn(s[1]),d=new $(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=Bt(t.path),i=IDBKeyRange.bound([r],[MR(r)],!1,!0),o=0;return pi(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Fs(e).get(t).next(r=>r?sc(r):null)}};function Fs(n){return at(n,"targets")}function uR(n){return at(n,"targetGlobal")}function pi(n){return at(n,"targetDocuments")}function cR([n,e],[t,r]){let i=oe(n,t);return i===0?oe(e,r):i}var fw=class{constructor(e){this.Un=e,this.buffer=new Se(cR),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();cR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},pw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Mi(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Si(t)}yield this.Hn(3e5)}))}},gw=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(nn.oe);let r=new fw(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(aR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aR):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Vs()<=Vn.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function f4(n,e){return new gw(n,e)}var mw=class{constructor(e,t){this.db=e,this.garbageCollector=f4(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Xh(e,r)}removeReference(e,t,r){return Xh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Xh(e,t)}nr(e,t){return function(i,o){let s=!1;return Rx(i).Y(a=>Mx(i,a,o).next(u=>(u&&(s=!0),M.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ee.min()),pi(e).delete(function(f){return[0,Bt(f.path)]}(s))))});i.push(u)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Xh(e,t)}tr(e,t){let r=pi(e),i,o=nn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==nn.oe&&t(new $(Jn(i)),o),o=l,i=u):o=nn.oe}).next(()=>{o!==nn.oe&&t(new $(Jn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Xh(n,e){return pi(n).put(function(r,i){return{targetId:0,path:Bt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Rf=class{constructor(){this.changes=new or(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var yw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return uo(e).put(r)}removeEntry(e,t,r){return uo(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Cf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=nt.newInvalidDocument(t);return uo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rc(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:nt.newInvalidDocument(t)};return uo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rc(t))},(i,o)=>{r={document:this.ir(t,o),size:Sf(o)}}).next(()=>r)}getEntries(e,t){let r=Qt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Qt(),i=new Ne($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Sf(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return M.resolve();let i=new Se(hR);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(rc(i.first()),rc(i.last())),s=i.getIterator(),a=s.getNext();return uo(e).J({index:"documentKeyIndex",range:o},(u,l,d)=>{let f=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&hR(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(rc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Cf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return uo(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=Qt();for(let f of l){let g=this.ir($.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Fc(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=Qt(),s=dR(t,r),a=dR(t,hn.max());return uo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,d)=>{let f=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new vw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return lR(e).get("remoteDocumentGlobalKey").next(t=>(Q(!!t),t))}rr(e,t){return lR(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=l4(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ee.min())))return r}return nt.newInvalidDocument(e)}};function xx(n){return new yw(n)}var vw=class extends Rf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new or(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Se((o,s)=>oe(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=ZM(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Sf(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=ZM(this.cr.serializer,s.convertToNoDocument(ee.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function lR(n){return at(n,"remoteDocumentGlobal")}function uo(n){return at(n,"remoteDocumentsV14")}function rc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dR(n,e){let t=e.documentKey.path.toArray();return[n,Cf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function hR(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=oe(t[o],r[o]),i)return i;return i=oe(t.length,r.length),i||(i=oe(t[t.length-2],r[r.length-2]),i||oe(t[t.length-1],r[r.length-1]))}var _w=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var xf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&cc(r.mutation,i,rn.empty(),Ve.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ae()){let i=Xn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=oc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Xn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ae()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Qt(),s=uc(),a=function(){return uc()}();return t.forEach((u,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Nn)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),cc(d.mutation,l,d.mutation.getFieldMask(),Ve.now())):s.set(l.key,rn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new _w(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=uc(),i=new Ne((s,a)=>s-a),o=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let d=r.get(u)||rn.empty();d=a.applyToLocalView(l,d),r.set(u,d);let f=(i.get(a.batchId)||ae()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,d=u.value,f=tx();d.forEach(g=>{if(!o.has(g)){let y=ux(t.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):M.resolve(Xn()),a=-1,u=o;return s.next(l=>M.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ae())).next(d=>({batchId:a,changes:ex(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=oc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=oc();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,u=>{let l=function(f,g){return new xn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,nt.newInvalidDocument(d)))});let a=oc();return s.forEach((u,l)=>{let d=o.get(u);d!==void 0&&cc(d.mutation,l,rn.empty(),Ve.now()),Fc(t,l)&&(a=a.insert(u,l))}),a})}};var ww=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return M.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ke(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:RI(i.bundledQuery),readTime:Ke(i.readTime)}}(t)),M.resolve()}};var Iw=class{constructor(){this.overlays=new Ne($.comparator),this.Ir=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Xn();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=Xn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ne((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=Xn(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Xn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return M.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new wc(t,r));let o=this.Ir.get(t);o===void 0&&(o=ae(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Ew=class{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var bc=class{constructor(){this.Tr=new Se(et.Er),this.dr=new Se(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new et(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new et(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ve([])),r=new et(t,e),i=new et(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ve([])),r=new et(t,e),i=new et(t,e+1),o=ae();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new et(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},et=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||oe(e.wr,t.wr)}static Ar(e,t){return oe(e.wr,t.wr)||$.comparator(e.key,t.key)}};var Dw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Se(et.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new _c(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new et(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,t){return M.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new et(t,0),i=new et(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Se(oe);return t.forEach(i=>{let o=new et(i,0),s=new et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new et(new $(o),0),a=new Se(oe);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),M.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Q(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(t.mutations,i=>{let o=new et(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new et(t,0),i=this.br.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Cw=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(t))}getEntries(e,t){let r=Qt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Qt(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:d}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||II(xR(d),r)<=0||(i.has(d.key)||Fc(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Tw(this)}getSize(e){return M.resolve(this.size)}},Tw=class extends Rf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var bw=class{constructor(e){this.persistence=e,this.Nr=new or(t=>wo(t),Oc),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new bc,this.targetCount=0,this.kr=ea.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),M.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ea(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Kn(t),M.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Br.containsKey(t))}};var Nf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new nn(0),this.Kr=!1,this.Kr=!0,this.$r=new Ew,this.referenceDelegate=e(this),this.Ur=new bw(this),this.indexManager=new lw,this.remoteDocumentCache=function(i){return new Cw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Df(t),this.Gr=new ww(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Iw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Dw(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new Aw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Aw=class extends df{constructor(e){super(),this.currentSequenceNumber=e}},Pf=class n{constructor(e){this.persistence=e,this.Jr=new bc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),M.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return M.or([()=>M.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Sw=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new hf("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SM,{unique:!0}),u.createObjectStore("documentMutations")}(e),fR(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=M.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),fR(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SM,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return M.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:Rq});l.createIndex("collectionPathOverlayIndex",xq,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Nq,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:_q});l.createIndex("documentKeyIndex",wq),l.createIndex("collectionGroupIndex",Iq)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:bq}).createIndex("sequenceNumberIndex",Aq,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Sq}).createIndex("documentKeyIndex",Mq,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Sf(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>M.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>M.forEach(a,u=>{Q(u.userId===o.userId);let l=ho(this.serializer,u);return Sx(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ve(s),l=function(f){return[0,Bt(f)]}(u);o.push(t.get(l).next(d=>d?M.resolve():(f=>t.put({targetId:0,path:Bt(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>M.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Tq});let r=t.store("collectionParents"),i=new Tc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Bt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ve(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let d=Jn(a);return o(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=sc(i),s=Tx(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(f){return f.document?new $(ve.fromString(f.document.name).popFirst(5)):f.noDocument?$.fromSegments(f.noDocument.path):f.unknownDocument?$.fromSegments(f.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>M.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=xx(this.serializer),o=new Nf(Pf.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let d=(l=a.get(u.userId))!==null&&l!==void 0?l:ae();ho(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),M.forEach(a,(u,l)=>{let d=new tt(l),f=Tf.lt(this.serializer,d),g=o.getIndexManager(d),y=Mf.lt(d,this.serializer,g,o.referenceDelegate);return new xf(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new pc(t,nn.oe),u).next()})})}};function fR(n){n.createObjectStore("targetDocuments",{keyPath:Dq}).createIndex("documentTargetsIndex",Cq,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Eq,{unique:!0}),n.createObjectStore("targetGlobal")}var m_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Mw=class n{constructor(e,t,r,i,o,s,a,u,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new O(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mw(this,i),this.Ai=t+"main",this.serializer=new Df(u),this.Ri=new _i(this.Ai,this.hi,new Sw(this.serializer)),this.$r=new rw,this.Ur=new hw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xx(this.serializer),this.Gr=new nw,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ge("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(x.FAILED_PRECONDITION,m_);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new nn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ef(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Mi(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ic(e).get("owner").next(t=>M.resolve(this.vi(t)))}Ci(e){return ef(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=at(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return M.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):ic(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new O(x.FAILED_PRECONDITION,m_);return!1}}return!(!this.networkEnabled||!this.inForeground)||ef(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new pc(e,nn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>ef(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Mf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Tf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?kq:u===16?Oq:u===15?DI:u===14?LR:u===13?VR:u===12?Pq:u===11?FR:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new pc(a,this.Qr?this.Qr.next():nn.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Ge(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new O(x.FAILED_PRECONDITION,NR);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return ic(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new O(x.FAILED_PRECONDITION,m_)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ic(e).put("owner",t)}static D(){return _i.D()}bi(e){let t=ic(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):M.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ge(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;ig()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ge("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ge("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ic(n){return at(n,"owner")}function ef(n){return at(n,"clientMetadata")}function NI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Rw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ae(),i=ae();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var xw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Of=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ig()?8:PR(Ba())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new xw;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Vs()<=Vn.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Ls(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Vs()<=Vn.DEBUG&&k("QueryEngine","Query:",Ls(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Vs()<=Vn.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Ls(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$t(t))):M.resolve())}Yi(e,t){if(UM(t))return M.resolve(null);let r=$t(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=_f(t,null,"F"),r=$t(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ae(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,_f(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return UM(t)||i.isEqual(ee.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?M.resolve(null):(Vs()<=Vn.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ls(t)),this.rs(e,s,t,RR(i,-1)).next(a=>a))})}ts(e,t){let r=new Se(JR(e));return t.forEach((i,o)=>{Fc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Vs()<=Vn.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Ls(t)),this.Ji.getDocumentsMatchingQuery(e,t,hn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Nw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ne(oe),this._s=new or(o=>wo(o),Oc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Nx(n,e,t,r){return new Nw(n,e,t,r)}function Px(n,e){return N(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ae();for(let l of i){s.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function p4(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,d){let f=l.batch,g=f.keys(),y=M.resolve();return g.forEach(T=>{y=y.next(()=>d.getEntry(u,T)).next(C=>{let A=l.docVersions.get(T);Q(A!==null),C.version.compareTo(A)<0&&(f.applyToRemoteDocument(C,l),C.isValidDocument()&&(C.setReadTime(l.commitVersion),d.addEntry(C)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ae();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Ox(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function g4(n,e){let t=B(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Qe.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(C,A,F){return C.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(g,y,d)&&a.push(t.Ur.updateTargetData(o,y))});let u=Qt(),l=ae();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(kx(o,s,e.documentUpdates).next(d=>{u=d.Ps,l=d.Is})),!r.isEqual(ee.min())){let d=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function kx(n,e,t){let r=ae(),i=ae();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Qt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function m4(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ta(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Xs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function na(n,e,t){return N(this,null,function*(){let r=B(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Mi(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function kf(n,e,t){let r=B(n),i=ee.min(),o=ae();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,d){let f=B(u),g=f._s.get(d);return g!==void 0?M.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,s,$t(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ee.min(),t?o:ae())).next(a=>(Lx(r,ZR(e),a),{documents:a,Ts:o})))}function Fx(n,e){let t=B(n),r=B(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function Vx(n,e){let t=B(n),r=t.us.get(e)||ee.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,RR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Lx(t,e,i),i))}function Lx(n,e,t){let r=n.us.get(e)||ee.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function y4(n,e,t,r){return N(this,null,function*(){let i=B(n),o=ae(),s=Qt();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(o=o.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield ta(i,function(d){return $t(la(ve.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>kx(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function v4(r,i){return N(this,arguments,function*(n,e,t=ae()){let o=yield ta(n,$t(RI(e.bundledQuery))),s=B(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ke(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Qe.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function pR(n,e){return`firestore_clients_${n}_${e}`}function gR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function y_(n,e){return`firestore_targets_${n}_${e}`}var Ff=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new O(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ge("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},lc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new O(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ge("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Vf=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=AI();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=OR(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ge("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},Pw=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ge("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ac=class{constructor(){this.activeTargetIds=AI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},dc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ne(oe),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=pR(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Ac),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(pR(this.persistenceKey,r));if(i){let o=Vf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(y_(this.persistenceKey,e));if(i){let o=lc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(y_(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ge("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=nn.oe;if(o!=null)try{let a=JSON.parse(o);Q(typeof a=="number"),s=a}catch(a){Ge("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==nn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Ff(this.currentUser,e,t,r),o=gR(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=gR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=y_(this.persistenceKey,e),o=new lc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Vf.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Ff.Rs(new tt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return lc.Rs(i,t)}Ls(e){return Pw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=AI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Lf=class{constructor(){this.so=new Ac,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ac,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ow=class{_o(e){}shutdown(){}};var jf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var tf=null;function v_(){return tf===null?tf=function(){return 268435456+Math.round(2147483648*Math.random())}():tf++,"0x"+tf.toString(16)}var _4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var kw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Rt="WebChannelConnection",Fw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=v_(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(d=>(k("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Rn("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ca}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=_4[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=v_();return new Promise((s,a)=>{let u=new l_;u.setWithCredentials(!0),u.listenOnce(d_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ec.NO_ERROR:let d=u.getResponseJson();k(Rt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case ec.TIMEOUT:k(Rt,`RPC '${e}' ${o} timed out`),a(new O(x.DEADLINE_EXCEEDED,"Request time out"));break;case ec.HTTP_ERROR:let f=u.getStatus();if(k(Rt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let T=function(A){let F=A.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(F)>=0?F:x.UNKNOWN}(y.status);a(new O(T,y.message))}else a(new O(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new O(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{k(Rt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(Rt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=v_(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=p_(),a=f_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let d=o.join("");k(Rt,`Creating RPC '${e}' stream ${i}: ${d}`,u);let f=s.createWebChannel(d,u),g=!1,y=!1,T=new kw({Io:A=>{y?k(Rt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(k(Rt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),k(Rt,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},To:()=>f.close()}),C=(A,F,H)=>{A.listen(F,P=>{try{H(P)}catch(K){setTimeout(()=>{throw K},0)}})};return C(f,Ns.EventType.OPEN,()=>{y||(k(Rt,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),C(f,Ns.EventType.CLOSE,()=>{y||(y=!0,k(Rt,`RPC '${e}' stream ${i} transport closed`),T.So())}),C(f,Ns.EventType.ERROR,A=>{y||(y=!0,Rn(Rt,`RPC '${e}' stream ${i} transport errored:`,A),T.So(new O(x.UNAVAILABLE,"The operation could not be completed")))}),C(f,Ns.EventType.MESSAGE,A=>{var F;if(!y){let H=A.data[0];Q(!!H);let P=H,K=P.error||((F=P[0])===null||F===void 0?void 0:F.error);if(K){k(Rt,`RPC '${e}' stream ${i} received error:`,K);let te=K.status,X=function(w){let E=Xe[w];if(E!==void 0)return dx(E)}(te),I=K.message;X===void 0&&(X=x.INTERNAL,I="Unknown error status: "+te+" with message "+K.message),y=!0,T.So(new O(X,I)),f.close()}else k(Rt,`RPC '${e}' stream ${i} received:`,H),T.bo(H)}}),C(a,h_.STAT_EVENT,A=>{A.stat===Zh.PROXY?k(Rt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Zh.NOPROXY&&k(Rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}};function jx(){return typeof window<"u"?window:null}function af(){return typeof document<"u"?document:null}function Vc(n){return new Z_(n,!0)}var Sc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Uf=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Sc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(Ge(t.toString()),Ge("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new O(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Vw=class extends Uf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=r4(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?Ke(s.readTime):ee.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=ew(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=yf(u)?{documents:_x(o,u)}:{query:wx(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=fx(o,s.resumeToken);let l=J_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=Js(o,s.snapshotVersion.toTimestamp());let l=J_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=o4(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=ew(this.serializer),t.removeTarget=e,this.a_(t)}},Lw=class extends Uf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Q(!!e.streamToken),this.lastStreamToken=e.streamToken,Q(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=i4(e.writeResults,e.commitTime),r=Ke(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=ew(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Cc(this.serializer,r))};this.a_(t)}};var jw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new O(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,X_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,X_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Uw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ge(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Bw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){Ri(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=B(u);l.L_.add(4),yield da(l),l.q_.set("Unknown"),l.L_.delete(4),yield Lc(l)})}(this))}))}),this.q_=new Uw(r,i)}};function Lc(n){return N(this,null,function*(){if(Ri(n))for(let e of n.B_)yield e(!0)})}function da(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function ap(n,e){let t=B(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),kI(t)?OI(t):fa(t).r_()&&PI(t,e))}function ra(n,e){let t=B(n),r=fa(t);t.N_.delete(e),r.r_()&&Ux(t,e),t.N_.size===0&&(r.r_()?r.o_():Ri(t)&&t.q_.set("Unknown"))}function PI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fa(n).A_(e)}function Ux(n,e){n.Q_.xe(e),fa(n).R_(e)}function OI(n){n.Q_=new Y_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),fa(n).start(),n.q_.v_()}function kI(n){return Ri(n)&&!fa(n).n_()&&n.N_.size>0}function Ri(n){return B(n).L_.size===0}function Bx(n){n.Q_=void 0}function w4(n){return N(this,null,function*(){n.q_.set("Online")})}function I4(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{PI(n,e)})})}function E4(n,e){return N(this,null,function*(){Bx(n),kI(n)?(n.q_.M_(e),OI(n)):n.q_.set("Unknown")})}function D4(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof If&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Bf(n,r)}else if(e instanceof zs?n.Q_.Ke(e):e instanceof wf?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ee.min()))try{let r=yield Ox(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let d=o.N_.get(l);d&&o.N_.set(l,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let d=o.N_.get(u);if(!d)return;o.N_.set(u,d.withResumeToken(Qe.EMPTY_BYTE_STRING,d.snapshotVersion)),Ux(o,u);let f=new Xs(d.target,u,l,d.sequenceNumber);PI(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Bf(n,r)}})}function Bf(n,e,t){return N(this,null,function*(){if(!Mi(e))throw e;n.L_.add(1),yield da(n),n.q_.set("Offline"),t||(t=()=>Ox(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Lc(n)}))})}function $x(n,e){return e().catch(t=>Bf(n,t,e))}function ha(n){return N(this,null,function*(){let e=B(n),t=Ai(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;C4(e);)try{let i=yield m4(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,T4(e,i)}catch(i){yield Bf(e,i)}qx(e)&&Hx(e)})}function C4(n){return Ri(n)&&n.O_.length<10}function T4(n,e){n.O_.push(e);let t=Ai(n);t.r_()&&t.V_&&t.m_(e.mutations)}function qx(n){return Ri(n)&&!Ai(n).n_()&&n.O_.length>0}function Hx(n){Ai(n).start()}function b4(n){return N(this,null,function*(){Ai(n).p_()})}function A4(n){return N(this,null,function*(){let e=Ai(n);for(let t of n.O_)e.m_(t.mutations)})}function S4(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=W_.from(r,e,t);yield $x(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ha(n)})}function M4(n,e){return N(this,null,function*(){e&&Ai(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return lx(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();Ai(r).s_(),yield $x(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ha(r)}})}(n,e)),qx(n)&&Hx(n)})}function mR(n,e){return N(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Ri(t);t.L_.add(3),yield da(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Lc(t)})}function $w(n,e){return N(this,null,function*(){let t=B(n);e?(t.L_.delete(2),yield Lc(t)):e||(t.L_.add(2),yield da(t),t.q_.set("Unknown"))})}function fa(n){return n.K_||(n.K_=function(t,r,i){let o=B(t);return o.w_(),new Vw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:w4.bind(null,n),Ro:I4.bind(null,n),mo:E4.bind(null,n),d_:D4.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),kI(n)?OI(n):n.q_.set("Unknown")):(yield n.K_.stop(),Bx(n))}))),n.K_}function Ai(n){return n.U_||(n.U_=function(t,r,i){let o=B(t);return o.w_(),new Lw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:b4.bind(null,n),mo:M4.bind(null,n),f_:A4.bind(null,n),g_:S4.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield ha(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var qw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new st,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function pa(n,e){if(Ge("AsyncQueue",`${e}: ${n}`),Mi(n))return new O(x.UNAVAILABLE,`${e}: ${n}`);throw n}var $f=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=oc(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var qf=class{constructor(){this.W_=new Ne($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ia=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,$f.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Hw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},zw=class{constructor(){this.queries=yR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=yR(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new O(x.ABORTED,"Firestore shutting down"))}};function yR(){return new or(n=>YR(n),kc)}function FI(n,e){return N(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Hw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=pa(s,`Initialization of query '${Ls(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&LI(t)})}function VI(n,e){return N(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function R4(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&LI(t)}function x4(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function LI(n){n.Y_.forEach(e=>{e.next()})}var Gw,vR;(vR=Gw||(Gw={})).ea="default",vR.Cache="cache";var Mc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ia(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Gw.Cache}};var Ww=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Hf=class{constructor(e){this.serializer=e}Es(e){return tr(this.serializer,e)}ds(e){return e.metadata.exists?vx(this.serializer,e.document,!1):nt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ke(e)}},Kw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ve.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Hf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ae()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield y4(this.localStore,new Hf(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield v4(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function zx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var zf=class{constructor(e){this.key=e}},Gf=class{constructor(e){this.key=e}},Wf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=JR(e),this.Ra=new $f(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new qf,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=Fc(this.query,f)?f:null,T=!!g&&this.mutatedKeys.has(g.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;g&&y?g.data.isEqual(y.data)?T!==C&&(r.track({type:3,doc:y}),A=!0):this.ga(g,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(u||l)&&(a=!0)),A&&(y?(s=s.add(y),o=C?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(y,T){let C=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return C(y)-C(T)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new ia(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new qf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Gf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new zf(r))}),t}ba(e){this.Ta=e.Ts,this.da=ae();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ia.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Qw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Yw=class{constructor(e){this.key=e,this.va=!1}},Zw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new or(a=>YR(a),kc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne($.comparator),this.Na=new Map,this.La=new bc,this.Ba={},this.ka=new Map,this.qa=ea.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function N4(n,e,t=!0){return N(this,null,function*(){let r=up(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield Gx(r,e,t,!0),i})}function P4(n,e){return N(this,null,function*(){let t=up(n);yield Gx(t,e,!0,!1)})}function Gx(n,e,t,r){return N(this,null,function*(){let i=yield ta(n.localStore,$t(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield jI(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&ap(n.remoteStore,i),a})}function jI(n,e,t,r,i){return N(this,null,function*(){n.Ka=(f,g,y)=>function(C,A,F,H){return N(this,null,function*(){let P=A.view.ma(F);P.ns&&(P=yield kf(C.localStore,A.query,!1).then(({documents:I})=>A.view.ma(I,P)));let K=H&&H.targetChanges.get(A.targetId),te=H&&H.targetMismatches.get(A.targetId)!=null,X=A.view.applyChanges(P,C.isPrimaryClient,K,te);return Jw(C,A.targetId,X.wa),X.snapshot})}(n,f,g,y);let o=yield kf(n.localStore,e,!0),s=new Wf(e,o.Ts),a=s.ma(o.documents),u=Ec.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Jw(n,t,l.wa);let d=new Qw(e,t,s);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function O4(n,e,t){return N(this,null,function*(){let r=B(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!kc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield na(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ra(r.remoteStore,i.targetId),oa(r,i.targetId)}).catch(Si))):(oa(r,i.targetId),yield na(r.localStore,i.targetId,!0))})}function k4(n,e){return N(this,null,function*(){let t=B(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ra(t.remoteStore,r.targetId))})}function F4(n,e,t){return N(this,null,function*(){let r=qI(n);try{let i=yield function(s,a){let u=B(s),l=Ve.now(),d=a.reduce((y,T)=>y.add(T.key),ae()),f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Qt(),C=ae();return u.cs.getEntries(y,d).next(A=>{T=A,T.forEach((F,H)=>{H.isValidDocument()||(C=C.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(A=>{f=A;let F=[];for(let H of a){let P=Yq(H,f.get(H.key).overlayedDocument);P!=null&&F.push(new Nn(H.key,P,qR(P.value.mapValue),qe.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,a)}).next(A=>{g=A;let F=A.applyToLocalDocumentSet(f,C);return u.documentOverlayCache.saveOverlays(y,A.batchId,F)})}).then(()=>({batchId:g.batchId,changes:ex(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ne(oe)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Or(r,i.changes),yield ha(r.remoteStore)}catch(i){let o=pa(i,"Failed to persist write");t.reject(o)}})}function Wx(n,e){return N(this,null,function*(){let t=B(n);try{let r=yield g4(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Q(s.va):i.removedDocuments.size>0&&(Q(s.va),s.va=!1))}),yield Or(t,r,e)}catch(r){yield Si(r)}})}function _R(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=B(s);u.onlineState=a;let l=!1;u.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&LI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function V4(n,e,t){return N(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ne($.comparator);s=s.insert(o,nt.newNoDocument(o,ee.min()));let a=ae().add(o),u=new Ic(ee.min(),new Map,new Ne(oe),s,a);yield Wx(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),$I(r)}else yield na(r.localStore,e,!1).then(()=>oa(r,e,t)).catch(Si)})}function L4(n,e){return N(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield p4(t.localStore,e);BI(t,r,null),UI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Or(t,i)}catch(i){yield Si(i)}})}function j4(n,e,t){return N(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let u=B(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Q(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>u.localDocuments.getDocuments(l,d))})}(r.localStore,e);BI(r,e,t),UI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Or(r,i)}catch(i){yield Si(i)}})}function U4(n,e){return N(this,null,function*(){let t=B(n);Ri(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=pa(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function UI(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function BI(n,e,t){let r=B(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function oa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Kx(n,r)})}function Kx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(ra(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),$I(n))}function Jw(n,e,t){for(let r of t)r instanceof zf?(n.La.addReference(r.key,e),B4(n,r)):r instanceof Gf?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Kx(n,r.key)):z()}function B4(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),$I(n))}function $I(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ve.fromString(e)),r=n.qa.next();n.Na.set(r,new Yw(t)),n.Oa=n.Oa.insert(t,r),ap(n.remoteStore,new Xs($t(la(t.path)),r,"TargetPurposeLimboResolution",nn.oe))}}function Or(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Rw.Wi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let d=B(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(l,g=>M.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>M.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!Mi(f))throw f;k("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),T=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(T);d.os=d.os.insert(g,C)}}})}(r.localStore,o))})}function $4(n,e){return N(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield Px(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new O(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Or(t,r.hs)}})}function q4(n,e){let t=B(n),r=t.Na.get(e);if(r&&r.va)return ae().add(r.key);{let i=ae(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function H4(n,e){return N(this,null,function*(){let t=B(n),r=yield kf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Jw(t,e.targetId,i.wa),i})}function z4(n,e){return N(this,null,function*(){let t=B(n);return Vx(t.localStore,e).then(r=>Or(t,r))})}function G4(n,e,t,r){return N(this,null,function*(){let i=B(n),o=yield function(a,u){let l=B(a),d=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,u).next(g=>g?l.localDocuments.getDocuments(f,g):M.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield ha(i.remoteStore):t==="acknowledged"||t==="rejected"?(BI(i,e,r||null),UI(i,e),function(a,u){B(B(a).mutationQueue).On(u)}(i.localStore,e)):z(),yield Or(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function W4(n,e){return N(this,null,function*(){let t=B(n);if(up(t),qI(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield wR(t,r.toArray());t.Qa=!0,yield $w(t.remoteStore,!0);for(let o of i)ap(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(oa(t,s),na(t.localStore,s,!0))),ra(t.remoteStore,s)}),yield i,yield wR(t,r),function(s){let a=B(s);a.Na.forEach((u,l)=>{ra(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ne($.comparator)}(t),t.Qa=!1,yield $w(t.remoteStore,!1)}})}function wR(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield ta(r.localStore,$t(u[0]));for(let l of u){let d=r.Fa.get(l),f=yield H4(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield Fx(r.localStore,s);a=yield ta(r.localStore,l),yield jI(r,Qx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Qx(n){return QR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function K4(n){return function(t){return B(B(t).persistence).Qi()}(B(n).localStore)}function Q4(n,e,t,r){return N(this,null,function*(){let i=B(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield Vx(i.localStore,ZR(o[0])),a=Ic.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Qe.EMPTY_BYTE_STRING);yield Or(i,s,a);break}case"rejected":yield na(i.localStore,e,!0),oa(i,e,r);break;default:z()}})}function Y4(n,e,t){return N(this,null,function*(){let r=up(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield Fx(r.localStore,i),s=yield ta(r.localStore,o);yield jI(r,Qx(o),s.targetId,!1,s.resumeToken),ap(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield na(r.localStore,i,!1).then(()=>{ra(r.remoteStore,i),oa(r,i)}).catch(Si))}})}function up(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V4.bind(null,e),e.Ca.d_=R4.bind(null,e.eventManager),e.Ca.$a=x4.bind(null,e.eventManager),e}function qI(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j4.bind(null,e),e}function Z4(n,e,t){let r=B(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,T){let C=B(y),A=Ke(T.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",F=>C.Gr.getBundleMetadata(F,T.id)).then(F=>!!F&&F.createTime.compareTo(A)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(zx(u));let l=new Kw(u,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield s.Ua()}let f=yield l.complete();return yield Or(o,f.Ia,void 0),yield function(y,T){let C=B(y);return C.persistence.runTransaction("Save bundle","readwrite",A=>C.Gr.saveBundleMetadata(A,T))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(u){return Rn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Xw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Vc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Nx(this.persistence,new Of,t.initialUser,this.serializer)}Ga(t){return new Nf(Pf.Zr,this.serializer)}Wa(t){return new Lf}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Kf=class n extends Xw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield ng(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield qI(this.Ja.syncEngine),yield ha(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return Nx(this.persistence,new Of,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new pw(r,e.asyncQueue,t)}Ha(e,t){let r=new x_(t,this.persistence);return new R_(e.asyncQueue,r)}Ga(e){let t=NI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new Mw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jx(),af(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Lf}},eI=class n extends Kf{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield ng(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof dc&&(this.sharedClientState.syncEngine={no:G4.bind(null,t),ro:Q4.bind(null,t),io:Y4.bind(null,t),Qi:K4.bind(null,t),eo:z4.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield W4(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=jx();if(!dc.D(t))throw new O(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=NI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},HI=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_R(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$4.bind(null,this.syncEngine),yield $w(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new zw}()}createDatastore(t){let r=Vc(t.databaseInfo.databaseId),i=function(s){return new Fw(s)}(t.databaseInfo);return function(s,a,u,l){return new jw(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Bw(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>_R(this.syncEngine,r,0),function(){return jf.D()?new jf:new Ow}())}createSyncEngine(t,r){return function(o,s,a,u,l,d,f){let g=new Zw(o,s,a,u,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=B(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield da(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function IR(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var sa=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ge("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var tI=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new st,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Ww(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var nI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new O(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=B(i),a={documents:o.map(f=>Dc(s.serializer,f))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ve.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let g=n4(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());Q(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new bi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new vc(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=B(r),s={writes:i.map(a=>Cc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ve.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=ee.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new O(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ee.min())?qe.exists(!1):qe.updateTime(t):qe.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ee.min()))throw new O(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qe.updateTime(t)}return qe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var rI=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Sc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new nI(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Pc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!lx(t)}return!1}};var iI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=tt.UNAUTHENTICATED,this.clientId=cf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new st;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=pa(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function __(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield Px(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function ER(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield zI(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>mR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>mR(e.remoteStore,i)),n._onlineComponents=e})}function zI(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield __(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Rn("Error using user provided cache. Falling back to memory cache: "+t),yield __(n,new Xw)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield __(n,new Xw);return n._offlineComponents})}function cp(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield ER(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield ER(n,new HI))),n._onlineComponents})}function Yx(n){return zI(n).then(e=>e.persistence)}function GI(n){return zI(n).then(e=>e.localStore)}function Zx(n){return cp(n).then(e=>e.remoteStore)}function WI(n){return cp(n).then(e=>e.syncEngine)}function J4(n){return cp(n).then(e=>e.datastore)}function aa(n){return N(this,null,function*(){let e=yield cp(n),t=e.eventManager;return t.onListen=N4.bind(null,e.syncEngine),t.onUnlisten=O4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=P4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=k4.bind(null,e.syncEngine),t})}function X4(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Yx(n),t=yield Zx(n);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.L_.delete(0),Lc(o)}(t)}))}function eH(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Yx(n),t=yield Zx(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=B(i);o.L_.add(0),yield da(o),o.q_.set("Offline")})}(t)}))}function tH(n,e){let t=new st;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,d){let f=B(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new O(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=pa(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield GI(n),e,t)})),t.promise}function Jx(n,e,t={}){let r=new st;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new sa({next:g=>{d.Za(),s.enqueueAndForget(()=>VI(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new O(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new O(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Mc(la(a.path),d,{includeMetadataChanges:!0,_a:!0});return FI(o,f)}(yield aa(n),n.asyncQueue,e,t,r)})),r.promise}function nH(n,e){let t=new st;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield kf(i,o,!0),u=new Wf(o,a.Ts),l=u.ma(a.documents),d=u.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let u=pa(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield GI(n),e,t)})),t.promise}function Xx(n,e,t={}){let r=new st;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new sa({next:g=>{d.Za(),s.enqueueAndForget(()=>VI(o,f)),g.fromCache&&u.source==="server"?l.reject(new O(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Mc(a,d,{includeMetadataChanges:!0,_a:!0});return FI(o,f)}(yield aa(n),n.asyncQueue,e,t,r)})),r.promise}function rH(n,e){let t=new sa(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.add(o),o.next()}(yield aa(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.delete(o)}(yield aa(n),t)}))}}function iH(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?hx().encode(s):s,function(d,f){return new tI(d,f)}(function(d,f){if(d instanceof Uint8Array)return IR(d,f);if(d instanceof ArrayBuffer)return IR(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Vc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){Z4(yield WI(n),i,r)}))}function oH(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield GI(n),e)}))}function eN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var DR=new Map;function KI(n,e,t){if(!t)throw new O(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QI(n,e,t,r){if(e===!0&&r===!0)throw new O(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function CR(n){if(!$.isDocumentKey(n))throw new O(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TR(n){if($.isDocumentKey(n))throw new O(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function we(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=lp(n);throw new O(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tN(n,e){if(e<=0)throw new O(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Qf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new O(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new O(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new O(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Co=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new w_;switch(r.type){case"firstParty":return new C_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=DR.get(t);r&&(k("ComponentProvider","Removing Datastore"),DR.delete(t),r.terminate())}(this),Promise.resolve()}};function dp(n,e,t,r={}){var i;let o=(n=we(n,Co))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Rn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=tt.MOCK_USER;else{a=uC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new O(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new tt(l)}n._authCredentials=new I_(new uf(a,u))}}var vt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Me=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},nr=class n extends vt{constructor(e,t,r){super(e,t,la(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function jc(n,e,...t){if(n=ke(n),KI("collection","path",e),n instanceof Co){let r=ve.fromString(e,...t);return TR(r),new nr(n,null,r)}{if(!(n instanceof Me||n instanceof nr))throw new O(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return TR(r),new nr(n.firestore,null,r)}}function YI(n,e){if(n=we(n,Co),KI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new O(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vt(n,null,function(r){return new xn(ve.emptyPath(),r)}(e))}function Mo(n,e,...t){if(n=ke(n),arguments.length===1&&(e=cf.newId()),KI("doc","path",e),n instanceof Co){let r=ve.fromString(e,...t);return CR(r),new Me(n,null,new $(r))}{if(!(n instanceof Me||n instanceof nr))throw new O(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return CR(r),new Me(n.firestore,n instanceof nr?n.converter:null,new $(r))}}function Uc(n,e){return n=ke(n),e=ke(e),(n instanceof Me||n instanceof nr)&&(e instanceof Me||e instanceof nr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hp(n,e){return n=ke(n),e=ke(e),n instanceof vt&&e instanceof vt&&n.firestore===e.firestore&&kc(n._query,e._query)&&n.converter===e.converter}var Yf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Sc(this,"async_queue_retry"),this.Vu=()=>{let r=af();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=af();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=af();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new st;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Mi(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ge("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=qw.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function oI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var sI=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new st,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var nN=-1,Le=class extends Co{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Yf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Yf(e),this._firestoreClient=void 0,yield e}})}};function rN(n,e){let t=typeof n=="object"?n:qa(),r=typeof n=="string"?n:e||"(default)",i=sg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=aC("firestore");o&&dp(i,...o)}return i}function _t(n){if(n._terminated)throw new O(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||iN(n),n._firestoreClient}function iN(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,d){return new N_(a,u,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,eN(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new iI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function ZI(n,e){Rn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return oN(n,HI.provider,{build:r=>new Kf(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function JI(n){return N(this,null,function*(){Rn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();oN(n,HI.provider,{build:t=>new eI(t,e.cacheSizeBytes)})})}function oN(n,e,t){if((n=we(n,Le))._firestoreClient||n._terminated)throw new O(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new O(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},iN(n)}function XI(n){if(n._initialized&&!n._terminated)throw new O(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new st;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!_i.D())return Promise.resolve();let i=r+"main";yield _i.delete(i)})}(NI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function eE(n){return function(t){let r=new st;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return U4(yield WI(t),r)})),r.promise}(_t(n=we(n,Le)))}function tE(n){return X4(_t(n=we(n,Le)))}function nE(n){return eH(_t(n=we(n,Le)))}function rE(n,e){let t=_t(n=we(n,Le)),r=new sI;return iH(t,n._databaseId,e,r),r}function iE(n,e){return oH(_t(n=we(n,Le)),e).then(t=>t?new vt(n,null,t.query):null)}var sr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Qe.fromBase64String(e))}catch(t){throw new O(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Pn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Nr=class{constructor(e){this._methodName=e}};var To=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var Rc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var sH=/^__.*__$/,aI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Nn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ti(e,this.data,t,this.fieldTransforms)}},Zf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Nn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function sN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var Jf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sN(this.Cu)&&sH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},uI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Vc(e)}Qu(e,t,r,i=!1){return new Jf({Cu:e,methodName:t,qu:r,path:We.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ro(n){let e=n._freezeSettings(),t=Vc(n._databaseId);return new uI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fp(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);aE("Data must be an object, but it was:",s,r);let a=cN(r,s),u,l;if(o.merge)u=new rn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=fI(e,f,t);if(!s.contains(g))throw new O(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);dN(d,g)||d.push(g)}u=new rn(d),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new aI(new xt(a),u,l)}var xc=class n extends Nr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function aN(n,e,t){return new Jf({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var cI=class n extends Nr{_toFieldTransform(e){return new Io(e.path,new Di)}isEqual(e){return e instanceof n}},lI=class n extends Nr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=aN(this,e,!0),r=this.Ku.map(o=>xo(o,t)),i=new Rr(r);return new Io(e.path,i)}isEqual(e){return e instanceof n&&og(this.Ku,e.Ku)}},dI=class n extends Nr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=aN(this,e,!0),r=this.Ku.map(o=>xo(o,t)),i=new xr(r);return new Io(e.path,i)}isEqual(e){return e instanceof n&&og(this.Ku,e.Ku)}},hI=class n extends Nr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Ci(e.serializer,rx(e.serializer,this.$u));return new Io(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function oE(n,e,t,r){let i=n.Qu(1,e,t);aE("Data must be an object, but it was:",i,r);let o=[],s=xt.empty();So(r,(u,l)=>{let d=uE(e,u,t);l=ke(l);let f=i.Nu(d);if(l instanceof xc)o.push(d);else{let g=xo(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new rn(o);return new Zf(s,a,i.fieldTransforms)}function sE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[fI(e,r,t)],u=[i];if(o.length%2!=0)throw new O(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(fI(e,o[g])),u.push(o[g+1]);let l=[],d=xt.empty();for(let g=a.length-1;g>=0;--g)if(!dN(l,a[g])){let y=a[g],T=u[g];T=ke(T);let C=s.Nu(y);if(T instanceof xc)l.push(y);else{let A=xo(T,C);A!=null&&(l.push(y),d.set(y,A))}}let f=new rn(l);return new Zf(d,f,s.fieldTransforms)}function uN(n,e,t,r=!1){return xo(t,n.Qu(r?4:3,e))}function xo(n,e){if(lN(n=ke(n)))return aE("Unsupported field value:",e,n),cN(n,e);if(n instanceof Nr)return function(r,i){if(!sN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=xo(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ve.fromDate(r);return{timestampValue:Js(i.serializer,o)}}if(r instanceof Ve){let o=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Js(i.serializer,o)}}if(r instanceof To)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sr)return{bytesValue:fx(i.serializer,r._byteString)};if(r instanceof Me){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:MI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Rc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return SI(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${lp(r)}`)}(n,e)}function cN(n,e){let t={};return jR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(n,(r,i)=>{let o=xo(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function lN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ve||n instanceof To||n instanceof sr||n instanceof Me||n instanceof Nr||n instanceof Rc)}function aE(n,e,t){if(!lN(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=lp(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function fI(n,e,t){if((e=ke(e))instanceof Pn)return e._internalPath;if(typeof e=="string")return uE(n,e);throw Xf("Field path arguments must be of type string or ",n,!1,void 0,t)}var aH=new RegExp("[~\\*/\\[\\]]");function uE(n,e,t){if(e.search(aH)>=0)throw Xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pn(...e.split("."))._internalPath}catch{throw Xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(x.INVALID_ARGUMENT,a+n+u)}function dN(n,e){return n.some(t=>t.isEqual(e))}var bo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new pI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(pp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},pI=class extends bo{data(){return super.data()}};function pp(n,e){return typeof e=="string"?uE(n,e):e instanceof Pn?e._internalPath:e._delegate._internalPath}function hN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Nc=class{},Ao=class extends Nc{};function kn(n,e,...t){let r=[];e instanceof Nc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof gI).length,a=o.filter(u=>u instanceof ep).length;if(s>1||s>0&&a>0)throw new O(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var ep=class n extends Ao{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return pN(e._query,t),new vt(e.firestore,e.converter,z_(e._query,t))}_parse(e){let t=Ro(e.firestore);return function(o,s,a,u,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new O(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){AR(f,d);let y=[];for(let T of f)y.push(bR(u,o,T));g={arrayValue:{values:y}}}else g=bR(u,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||AR(f,d),g=uN(a,s,f,d==="in"||d==="not-in");return me.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function cE(n,e,t){let r=e,i=pp("where",n);return ep._create(i,r,t)}var gI=class n extends Nc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Te.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)pN(s,u),s=z_(s,u)}(e._query,t),new vt(e.firestore,e.converter,z_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var mI=class n extends Ao{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new O(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _o(o,s)}(e._query,this._field,this._direction);return new vt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new xn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function gp(n,e="asc"){let t=e,r=pp("orderBy",n);return mI._create(r,t)}var tp=class n extends Ao{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new vt(e.firestore,e.converter,_f(e._query,this._limit,this._limitType))}};function mp(n){return tN("limit",n),tp._create("limit",n,"F")}function lE(n){return tN("limitToLast",n),tp._create("limitToLast",n,"L")}var np=class n extends Ao{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=fN(e,this.type,this._docOrFields,this._inclusive);return new vt(e.firestore,e.converter,function(i,o){return new xn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function dE(...n){return np._create("startAt",n,!0)}function hE(...n){return np._create("startAfter",n,!1)}var rp=class n extends Ao{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=fN(e,this.type,this._docOrFields,this._inclusive);return new vt(e.firestore,e.converter,function(i,o){return new xn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function fE(...n){return rp._create("endBefore",n,!1)}function pE(...n){return rp._create("endAt",n,!0)}function fN(n,e,t,r){if(t[0]=ke(t[0]),t[0]instanceof bo)return function(o,s,a,u,l){if(!u)throw new O(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Hs(o))if(f.field.isKeyField())d.push(vo(s,u.key));else{let g=u.data.field(f.field);if(op(g))throw new O(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new O(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new ir(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Ro(n.firestore);return function(s,a,u,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new O(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let T=0;T<d.length;T++){let C=d[T];if(g[T].field.isKeyField()){if(typeof C!="string")throw new O(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof C}`);if(!bI(s)&&C.indexOf("/")!==-1)throw new O(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${C}' contains a slash.`);let A=s.path.child(ve.fromString(C));if(!$.isDocumentKey(A))throw new O(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);let F=new $(A);y.push(vo(a,F))}else{let A=uN(u,l,C);y.push(A)}}return new ir(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function bR(n,e,t){if(typeof(t=ke(t))=="string"){if(t==="")throw new O(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bI(e)&&t.indexOf("/")!==-1)throw new O(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ve.fromString(t));if(!$.isDocumentKey(r))throw new O(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vo(n,new $(r))}if(t instanceof Me)return vo(n,t._key);throw new O(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lp(t)}.`)}function AR(n,e){if(!Array.isArray(n)||n.length===0)throw new O(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pN(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new O(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ua=class{convertValue(e,t="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return So(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Oe(s.doubleValue));return new Rc(o)}convertGeoPoint(e){return new To(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=CI(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gc(e));default:return null}}convertTimestamp(e){let t=Mr(e);return new Ve(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ve.fromString(e);Q(Cx(r));let i=new Ii(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Ge(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function yp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var yI=class extends ua{constructor(e){super(),this.firestore=e}convertBytes(e){return new sr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};var Sr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},fn=class extends bo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new yi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(pp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},yi=class extends fn{data(e={}){return super.data(e)}},On=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Sr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yi(this._firestore,this._userDataWriter,r.key,r,new Sr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new yi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new yi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:uH(a.type),doc:u,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function uH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function vp(n,e){return n instanceof fn&&e instanceof fn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof On&&e instanceof On&&n._firestore===e._firestore&&hp(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function gE(n){n=we(n,Me);let e=we(n.firestore,Le);return Jx(_t(e),n._key).then(t=>CE(e,n,t))}var Pr=class extends ua{constructor(e){super(),this.firestore=e}convertBytes(e){return new sr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};function mE(n){n=we(n,Me);let e=we(n.firestore,Le),t=_t(e),r=new Pr(e);return tH(t,n._key).then(i=>new fn(e,r,n._key,i,new Sr(i!==null&&i.hasLocalMutations,!0),n.converter))}function yE(n){n=we(n,Me);let e=we(n.firestore,Le);return Jx(_t(e),n._key,{source:"server"}).then(t=>CE(e,n,t))}function vE(n){n=we(n,vt);let e=we(n.firestore,Le),t=_t(e),r=new Pr(e);return hN(n._query),Xx(t,n._query).then(i=>new On(e,r,n,i))}function _E(n){n=we(n,vt);let e=we(n.firestore,Le),t=_t(e),r=new Pr(e);return nH(t,n._query).then(i=>new On(e,r,n,i))}function wE(n){n=we(n,vt);let e=we(n.firestore,Le),t=_t(e),r=new Pr(e);return Xx(t,n._query,{source:"server"}).then(i=>new On(e,r,n,i))}function Bc(n,e,t){n=we(n,Me);let r=we(n.firestore,Le),i=yp(n.converter,e,t);return ma(r,[fp(Ro(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,qe.none())])}function _p(n,e,t,...r){n=we(n,Me);let i=we(n.firestore,Le),o=Ro(i),s;return s=typeof(e=ke(e))=="string"||e instanceof Pn?sE(o,"updateDoc",n._key,e,t,r):oE(o,"updateDoc",n._key,e),ma(i,[s.toMutation(n._key,qe.exists(!0))])}function IE(n){return ma(we(n.firestore,Le),[new bi(n._key,qe.none())])}function EE(n,e){let t=we(n.firestore,Le),r=Mo(n),i=yp(n.converter,e);return ma(t,[fp(Ro(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qe.exists(!1))]).then(()=>r)}function ga(n,...e){var t,r,i;n=ke(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||oI(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(oI(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,d;if(n instanceof Me)l=we(n.firestore,Le),d=la(n._key.path),u={next:f=>{e[s]&&e[s](CE(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=we(n,vt);l=we(f.firestore,Le),d=f._query;let g=new Pr(l);u={next:y=>{e[s]&&e[s](new On(l,g,f,y))},error:e[s+1],complete:e[s+2]},hN(n._query)}return function(g,y,T,C){let A=new sa(C),F=new Mc(y,A,T);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return FI(yield aa(g),F)})),()=>{A.Za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return VI(yield aa(g),F)}))}}(_t(l),d,a,u)}function DE(n,e){return rH(_t(n=we(n,Le)),oI(e)?e:{next:e})}function ma(n,e){return function(r,i){let o=new st;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return F4(yield WI(r),i,o)})),o.promise}(_t(n),e)}function CE(n,e,t){let r=t.docs.get(e._key),i=new Pr(n);return new fn(n,i,e._key,r,new Sr(t.hasPendingWrites,t.fromCache),e.converter)}var cH={maxAttempts:5};var ip=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ro(e)}set(e,t,r){this._verifyNotCommitted();let i=gi(e,this._firestore),o=yp(i.converter,t,r),s=fp(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,qe.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=gi(e,this._firestore),s;return s=typeof(t=ke(t))=="string"||t instanceof Pn?sE(this._dataReader,"WriteBatch.update",o._key,t,r,i):oE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,qe.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=gi(e,this._firestore);return this._mutations=this._mutations.concat(new bi(t._key,qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function gi(n,e){if((n=ke(n)).firestore!==e)throw new O(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var vI=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ro(t)}get(t){let r=gi(t,this._firestore),i=new yI(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new bo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new bo(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=gi(t,this._firestore),s=yp(o.converter,r,i),a=fp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=gi(t,this._firestore),a;return a=typeof(r=ke(r))=="string"||r instanceof Pn?sE(this._dataReader,"Transaction.update",s._key,r,i,o):oE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=gi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=gi(e,this._firestore),r=new Pr(this._firestore);return super.get(e).then(i=>new fn(this._firestore,r,t._key,i._document,new Sr(!1,!1),t.converter))}};function TE(n,e,t){n=we(n,Le);let r=Object.assign(Object.assign({},cH),t);return function(o){if(o.maxAttempts<1)throw new O(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new st;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield J4(o);new rI(o.asyncQueue,l,a,s,u).au()})),u.promise}(_t(n),i=>e(new vI(n,i)),r)}function bE(){return new xc("deleteField")}function AE(){return new cI("serverTimestamp")}function SE(...n){return new lI("arrayUnion",n)}function ME(...n){return new dI("arrayRemove",n)}function RE(n){return new hI("increment",n)}(function(e,t=!0){(function(i){ca=i})(dC),$a(new Fi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Le(new E_(r.getProvider("auth-internal")),new b_(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ii(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ct(TM,"4.7.3",e),Ct(TM,"4.7.3","esm2017")})();var wp=function(){return wp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},wp.apply(this,arguments)};var dH={includeMetadataChanges:!1};function gN(n,e){return e===void 0&&(e=dH),new ie(function(t){var r=ga(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function mN(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:wp(wp({},r),(t={},t[e.idField]=n.id,t))}function yN(n){return gN(n,{includeMetadataChanges:!0}).pipe(J(function(e){return e.docs}))}function vN(n,e){return e===void 0&&(e={}),yN(n).pipe(J(function(t){return t.map(function(r){return mN(r,e)})}))}var $c=class{constructor(e){return e}},_N="firestore",xE=class{constructor(){return Zu(_N)}};var NE=new U("angularfire2.firestore-instances");function hH(n,e){let t=Kh(_N,n,e);return t&&new $c(t)}function fH(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new $c(r)}}var pH={provide:xE,deps:[[new ut,NE]]},gH={provide:$c,useFactory:hH,deps:[[new ut,NE],Tr]};function dZ(n,...e){return Ct("angularfire",Kt.full,"fst"),Gn([gH,pH,{provide:NE,useFactory:fH(n),multi:!0,deps:[ue,ct,Zn,ao,[new ut,Xu],[new ut,Mn],...e]}])}var hZ=yt(vN,!0);var fZ=yt(jc,!0);var pZ=yt(Mo,!0);var gZ=yt(rN,!0);var mZ=yt(mp,!0);var yZ=yt(gp,!0);var vZ=yt(kn,!0);var _Z=yt(Bc,!0);var mH="firebase",yH="10.14.1";Ot.registerVersion(mH,yH,"app-compat");var vH=["ngOnDestroy"],IN=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(vH.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var Ip=class{constructor(e){return e}},ya=new U("angularfire2.app.options"),va=new U("angularfire2.app.name");function qc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Ot.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ot.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;_H("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ip(s)}var _H=(n,...e)=>{zy()&&typeof console<"u"&&console[n](...e)},wH={provide:Ip,useFactory:qc,deps:[ya,ue,[new ut,va]]},RZ=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ya,useValue:t},{provide:va,useValue:r}]}}constructor(t){Ot.registerVersion("angularfire",Kt.full,"core"),Ot.registerVersion("angularfire",Kt.full,"app-compat"),Ot.registerVersion("angular",th.full,t.toString())}static \u0275fac=function(r){return new(r||n)(V(lt))};static \u0275mod=it({type:n});static \u0275inj=rt({providers:[wH]})}return n})();function Ep(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return IH(i,s)||(wN("error",`${e} was already initialized on the ${t} Firebase App with different settings.${EH?" You may need to reload as Firebase is not HMR aware.":""}`),wN("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function IH(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var EH=typeof module<"u"&&!!module.hot,wN=(n,...e)=>{zy()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var DH=new Map,CH={activated:!1,tokenObservers:[]},TH={initialized:!1,enabled:!1};function Fn(n){return DH.get(n)||Object.assign({},CH)}function bN(){return TH}var bH="https://content-firebaseappcheck.googleapis.com/v1";var AH="exchangeDebugToken",EN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},UZ=24*60*60*1e3;var OE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new rg,this.pending.promise.catch(t=>{}),yield SH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new rg,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function SH(n){return new Promise(e=>{setTimeout(e,n)})}var MH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},xi=new lC("appCheck","AppCheck",MH);function AN(n){if(!Fn(n).activated)throw xi.create("use-before-activation",{appName:n.name})}function SN(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw xi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw xi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw xi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw xi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function MN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${bH}/projects/${t}/apps/${r}:${AH}?key=${i}`,body:{debug_token:e}}}var RH="firebase-app-check-database",xH=1,kE="firebase-app-check-store";var Dp=null;function NH(){return Dp||(Dp=new Promise((n,e)=>{try{let t=indexedDB.open(RH,xH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(xi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(kE,{keyPath:"compositeKey"})}}}catch(t){e(xi.create("storage-open",{originalErrorMessage:t?.message}))}}),Dp)}function PH(n,e){return OH(kH(n),e)}function OH(n,e){return N(this,null,function*(){let r=(yield NH()).transaction(kE,"readwrite"),o=r.objectStore(kE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(xi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function kH(n){return`${n.options.appId}-${n.name}`}var FE=new dl("@firebase/app-check");function PE(n,e){return ll()?PH(n,e).catch(t=>{FE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function RN(){return bN().enabled}function xN(){return N(this,null,function*(){let n=bN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var FH={error:"UNKNOWN_ERROR"};function VH(n){return sC.encodeString(JSON.stringify(n),!1)}function VE(n,e=!1){return N(this,null,function*(){let t=n.app;AN(t);let r=Fn(t),i=r.token,o;if(i&&!Hc(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Hc(u)?i=u:yield PE(t,void 0))}if(!e&&i&&Hc(i))return{token:i.token};let s=!1;if(RN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=SN(MN(t,yield xN()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield PE(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Fn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?FE.warn(u.message):FE.error(u),o=u}let a;return i?o?Hc(i)?a={token:i.token,internalError:o}:a=CN(o):(a={token:i.token},r.token=i,yield PE(t,i)):a=CN(o),s&&BH(t,a),a})}function LH(n){return N(this,null,function*(){let e=n.app;AN(e);let{provider:t}=Fn(e);if(RN()){let r=yield xN(),{token:i}=yield SN(MN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function jH(n,e,t,r){let{app:i}=n,o=Fn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Hc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),DN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>DN(n))}function NN(n,e){let t=Fn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function DN(n){let{app:e}=n,t=Fn(e),r=t.tokenRefresher;r||(r=UH(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function UH(n){let{app:e}=n;return new OE(()=>N(this,null,function*(){let t=Fn(e),r;if(t.token?r=yield VE(n,!0):r=yield VE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Fn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},EN.RETRIAL_MIN_WAIT,EN.RETRIAL_MAX_WAIT)}function BH(n,e){let t=Fn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Hc(n){return n.expireTimeMillis-Date.now()>0}function CN(n){return{token:VH(FH),error:n}}var LE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Fn(this.app);for(let t of e)NN(this.app,t.next);return Promise.resolve()}};function $H(n,e){return new LE(n,e)}function qH(n){return{getToken:e=>VE(n,e),getLimitedUseToken:()=>LH(n),addTokenListener:e=>jH(n,"INTERNAL",e),removeTokenListener:e=>NN(n.app,e)}}var HH="@firebase/app-check",zH="0.8.8";var GH="app-check",TN="app-check-internal";function WH(){$a(new Fi(GH,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return $H(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(TN).initialize()})),$a(new Fi(TN,n=>{let e=n.getProvider("app-check").getImmediate();return qH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ct(HH,zH)}WH();var KH=["localhost","0.0.0.0","127.0.0.1"],JZ=typeof window<"u"&&KH.includes(window.location.hostname);var jE=new U("angularfire2.auth.use-emulator"),UE=new U("angularfire2.auth.settings"),BE=new U("angularfire2.auth.tenant-id"),$E=new U("angularfire2.auth.langugage-code"),qE=new U("angularfire2.auth.use-device-language"),HE=new U("angularfire.auth.persistence"),zE=(n,e,t,r,i,o,s,a)=>Ep(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))u.settings[l]=d;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),GE=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,d,f,g,y){let T=new Ue,C=Z(void 0).pipe(Zt(s.outsideAngular),Pe(()=>o.runOutsideAngular(()=>import("./chunk-AN5GNH5L.js"))),J(()=>qc(t,o,r)),J(A=>zE(A,o,a,l,d,f,u,g)),Bl({bufferSize:1,refCount:!1}));if(ni(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Z(null);else{C.pipe(sn()).subscribe();let A=C.pipe(Pe(P=>P.getRedirectResult().then(K=>K,()=>null)),Ut,Bl({bufferSize:1,refCount:!1})),F=C.pipe(Pe(P=>new ie(K=>({unsubscribe:o.runOutsideAngular(()=>P.onAuthStateChanged(te=>K.next(te),te=>K.error(te),()=>K.complete()))})))),H=C.pipe(Pe(P=>new ie(K=>({unsubscribe:o.runOutsideAngular(()=>P.onIdTokenChanged(te=>K.next(te),te=>K.error(te),()=>K.complete()))}))));this.authState=A.pipe($l(F),on(s.outsideAngular),Zt(s.insideAngular)),this.user=A.pipe($l(H),on(s.outsideAngular),Zt(s.insideAngular)),this.idToken=this.user.pipe(Pe(P=>P?pe(P.getIdToken()):Z(null))),this.idTokenResult=this.user.pipe(Pe(P=>P?pe(P.getIdTokenResult()):Z(null))),this.credential=Ag(A,T,this.authState.pipe(Ze(P=>!P))).pipe(J(P=>P?.user?P:null),on(s.outsideAngular),Zt(s.insideAngular))}return IN(this,C,o,{spy:{apply:(A,F,H)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&H.then(P=>T.next(P))}}})}static \u0275fac=function(r){return new(r||n)(V(ya),V(va,8),V(lt),V(ue),V(Zn),V(jE,8),V(UE,8),V(BE,8),V($E,8),V(qE,8),V(HE,8),V(Mn,8))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),pJ=(()=>{class n{constructor(){Ot.registerVersion("angularfire",Kt.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=it({type:n});static \u0275inj=rt({providers:[GE]})}return n})();var YH="@firebase/firestore-compat",ZH="0.3.38";function JE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new O("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ON(){if(typeof Uint8Array>"u")throw new O("unimplemented","Uint8Arrays are not available in this environment.")}function kN(){if(!UR())throw new O("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Cp=class n{constructor(e){this._delegate=e}static fromBase64String(e){return kN(),new n(sr.fromBase64String(e))}static fromUint8Array(e){return ON(),new n(sr.fromUint8Array(e))}toBase64(){return kN(),this._delegate.toBase64()}toUint8Array(){return ON(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function WE(n){return JH(n,["next","error","complete"])}function JH(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var KE=class{enableIndexedDbPersistence(e,t){return ZI(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return JI(e._delegate)}clearIndexedDbPersistence(e){return XI(e._delegate)}},Tp=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ii||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Rn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){dp(this._delegate,e,t,r)}enableNetwork(){return tE(this._delegate)}disableNetwork(){return nE(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,QI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return eE(this._delegate)}onSnapshotsInSync(e){return DE(this._delegate,e)}get app(){if(!this._appCompat)throw new O("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ia(this,jc(this._delegate,e))}catch(t){throw qt(t,"collection()","Firestore.collection()")}}doc(e){try{return new ar(this,Mo(this._delegate,e))}catch(t){throw qt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ko(this,YI(this._delegate,e))}catch(t){throw qt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return TE(this._delegate,t=>e(new bp(this,t)))}batch(){return _t(this._delegate),new Ap(new ip(this._delegate,e=>ma(this._delegate,e)))}loadBundle(e){return rE(this._delegate,e)}namedQuery(e){return iE(this._delegate,e).then(t=>t?new ko(this,t):null)}},_a=class extends ua{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cp(new sr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return ar.forKey(t,this.firestore,null)}};function XH(n){_I(n)}var bp=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new _a(e)}get(e){let t=No(e);return this._delegate.get(t).then(r=>new Po(this._firestore,new fn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=No(e);return r?(JE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=No(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=No(e);return this._delegate.delete(t),this}},Ap=class{constructor(e){this._delegate=e}set(e,t,r){let i=No(e);return r?(JE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=No(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=No(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},wa=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new yi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Oo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new _a(e),t),i.set(t,o)),o}};wa.INSTANCES=new WeakMap;var ar=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _a(e)}static forPath(e,t,r){if(e.length%2!==0)throw new O("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Me(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Me(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ia(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ia(this.firestore,jc(this._delegate,e))}catch(t){throw qt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ke(e),e instanceof Me?Uc(this._delegate,e):!1}set(e,t){t=JE("DocumentReference.set",t);try{return t?Bc(this._delegate,e,t):Bc(this._delegate,e)}catch(r){throw qt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?_p(this._delegate,e):_p(this._delegate,e,t,...r)}catch(i){throw qt(i,"updateDoc()","DocumentReference.update()")}}delete(){return IE(this._delegate)}onSnapshot(...e){let t=FN(e),r=VN(e,i=>new Po(this.firestore,new fn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ga(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=mE(this._delegate):e?.source==="server"?t=yE(this._delegate):t=gE(this._delegate),t.then(r=>new Po(this.firestore,new fn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function qt(n,e,t){return n.message=n.message.replace(e,t),n}function FN(n){for(let e of n)if(typeof e=="object"&&!WE(e))return e;return{}}function VN(n,e){var t,r;let i;return WE(n[0])?i=n[0]:WE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Po=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ar(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return vp(this._delegate,e._delegate)}},Oo=class extends Po{data(e){let t=this._delegate.data(e);return this._delegate._converter||SR(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},ko=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _a(e)}where(e,t,r){try{return new n(this.firestore,kn(this._delegate,cE(e,t,r)))}catch(i){throw qt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,kn(this._delegate,gp(e,t)))}catch(r){throw qt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,kn(this._delegate,mp(e)))}catch(t){throw qt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,kn(this._delegate,lE(e)))}catch(t){throw qt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,kn(this._delegate,dE(...e)))}catch(t){throw qt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,kn(this._delegate,hE(...e)))}catch(t){throw qt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,kn(this._delegate,fE(...e)))}catch(t){throw qt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,kn(this._delegate,pE(...e)))}catch(t){throw qt(t,"endAt()","Query.endAt()")}}isEqual(e){return hp(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=_E(this._delegate):e?.source==="server"?t=wE(this._delegate):t=vE(this._delegate),t.then(r=>new zc(this.firestore,new On(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=FN(e),r=VN(e,i=>new zc(this.firestore,new On(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ga(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},QE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Oo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},zc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ko(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Oo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new QE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Oo(this._firestore,r))})}isEqual(e){return vp(this._delegate,e._delegate)}},Ia=class n extends ko{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new ar(this.firestore,e):null}doc(e){try{return e===void 0?new ar(this.firestore,Mo(this._delegate)):new ar(this.firestore,Mo(this._delegate,e))}catch(t){throw qt(t,"doc()","CollectionReference.doc()")}}add(e){return EE(this._delegate,e).then(t=>new ar(this.firestore,t))}isEqual(e){return Uc(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function No(n){return we(n,Me)}var YE=class n{constructor(...e){this._delegate=new Pn(...e)}static documentId(){return new n(We.keyField().canonicalString())}isEqual(e){return e=ke(e),e instanceof Pn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var ZE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=AE();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=bE();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=SE(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=ME(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=RE(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var ez={Firestore:Tp,GeoPoint:To,Timestamp:Ve,Blob:Cp,Transaction:bp,WriteBatch:Ap,DocumentReference:ar,DocumentSnapshot:Po,Query:ko,QueryDocumentSnapshot:Oo,QuerySnapshot:zc,CollectionReference:Ia,FieldPath:YE,FieldValue:ZE,setLogLevel:XH,CACHE_SIZE_UNLIMITED:nN};function tz(n,e){n.INTERNAL.registerComponent(new Fi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ez)))}function nz(n){tz(n,(e,t)=>new Tp(e,t,new KE)),n.registerVersion(YH,ZH)}nz(Ot);function rz(n,e=Ka){return new ie(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function LN(n,e){return rz(n,e)}function iz(n,e){return LN(n,e).pipe(qr(void 0),Jo(),J(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function tD(n,e){return LN(n,e).pipe(J(t=>({payload:t,type:"query"})))}var Sp=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=qN(r,t);return new Rp(i,o,this.afs)}snapshotChanges(){return iz(this.ref,this.afs.schedulers.outsideAngular).pipe(Ut)}valueChanges(e={}){return this.snapshotChanges().pipe(J(({payload:t})=>e.idField?De(q({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return pe(this.ref.get(e)).pipe(Ut)}};function Mp(n,e){return tD(n,e).pipe(qr(void 0),Jo(),J(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function jN(n,e,t){return Mp(n,t).pipe($r((r,i)=>oz(r,i.map(o=>o.payload),e),[]),jl(),J(r=>r.map(i=>({type:i.type,payload:i}))))}function oz(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=sz(n,r))}),n}function XE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function sz(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return XE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return XE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return XE(n,e.oldIndex,1);break}return n}function UN(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Rp=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Mp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(J(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(qr(void 0),Jo(),Ze(([r,i])=>i.length>0||!r),J(([,r])=>r),Ut)}auditTrail(e){return this.stateChanges(e).pipe($r((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=UN(e);return jN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut)}valueChanges(e={}){return tD(this.query,this.afs.schedulers.outsideAngular).pipe(J(t=>t.payload.docs.map(r=>e.idField?De(q({},r.data()),{[e.idField]:r.id}):r.data())),Ut)}get(e){return pe(this.query.get(e)).pipe(Ut)}add(e){return this.ref.add(e)}doc(e){return new Sp(this.ref.doc(e),this.afs)}},eD=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Mp(this.query,this.afs.schedulers.outsideAngular).pipe(Ut):Mp(this.query,this.afs.schedulers.outsideAngular).pipe(J(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ze(t=>t.length>0),Ut)}auditTrail(e){return this.stateChanges(e).pipe($r((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=UN(e);return jN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut)}valueChanges(e={}){return tD(this.query,this.afs.schedulers.outsideAngular).pipe(J(r=>r.payload.docs.map(i=>e.idField?q({[e.idField]:i.id},i.data()):i.data())),Ut)}get(e){return pe(this.query.get(e)).pipe(Ut)}},BN=new U("angularfire2.enableFirestorePersistence"),$N=new U("angularfire2.firestore.persistenceSettings"),az=new U("angularfire2.firestore.settings"),uz=new U("angularfire2.firestore.use-emulator");function qN(n,e=t=>t){return{query:e(n),ref:n}}var cz=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,d,f,g,y,T,C,A,F,H){this.schedulers=u;let P=qc(t,a,r),K=d;f&&zE(P,a,g,T,C,A,y,F),[this.firestore,this.persistenceEnabled$]=Ep(`${P.name}.firestore`,"AngularFirestore",P.name,()=>{let te=a.runOutsideAngular(()=>P.firestore());if(o&&te.settings(o),K&&te.useEmulator(...K),i&&!ni(s)){let X=()=>{try{return pe(te.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),Z(!1)}};return[te,a.runOutsideAngular(X)]}else return[te,Z(!1)]},[o,K,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=qN(i,r),a=this.schedulers.ngZone.run(()=>o);return new Rp(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new eD(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Sp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(V(ya),V(va,8),V(BN,8),V(az,8),V(lt),V(ue),V(Zn),V($N,8),V(uz,8),V(GE,8),V(jE,8),V(UE,8),V(BE,8),V($E,8),V(qE,8),V(HE,8),V(Mn,8))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),kJ=(()=>{class n{constructor(){Ot.registerVersion("angularfire",Kt.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:BN,useValue:!0},{provide:$N,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=it({type:n});static \u0275inj=rt({providers:[cz]})}return n})();export{He as a,Ue as b,pe as c,J as d,Un as e,ql as f,At as g,G as h,rt as i,V as j,L as k,HT as l,it as m,zT as n,Cn as o,f8 as p,p8 as q,g8 as r,m8 as s,Mt as t,Fe as u,v1 as v,y8 as w,v8 as x,Y as y,cn as z,Fm as A,gs as B,eL as C,eh as D,E8 as E,D8 as F,C8 as G,T8 as H,z0 as I,G0 as J,jy as K,vL as L,_L as M,b8 as N,An as O,A8 as P,CL as Q,S8 as R,Y0 as S,Z0 as T,M8 as U,R8 as V,AL as W,J0 as X,SL as Y,x8 as Z,ML as _,Wt as $,eA as aa,N8 as ba,P8 as ca,O8 as da,k8 as ea,F8 as fa,V8 as ga,ei as ha,uK as ia,cK as ja,lK as ka,dK as la,IA as ma,CK as na,VK as oa,LK as pa,u2 as qa,Y7 as ra,Z7 as sa,io as ta,L2 as ua,Cr as va,KA as wa,n7 as xa,r7 as ya,li as za,fB as Aa,$S as Ba,xS as Ca,E7 as Da,D7 as Ea,UB as Fa,T7 as Ga,$B as Ha,zB as Ia,cM as Ja,lM as Ka,dM as La,YB as Ma,pM as Na,b7 as Oa,A7 as Pa,r$ as Qa,o$ as Ra,S7 as Sa,M7 as Ta,R7 as Ua,Ju as Va,YQ as Wa,ZQ as Xa,JQ as Ya,XQ as Za,eY as _a,tY as $a,dZ as ab,hZ as bb,fZ as cb,pZ as db,gZ as eb,mZ as fb,yZ as gb,vZ as hb,_Z as ib,RZ as jb,pJ as kb,cz as lb,kJ as mb};
